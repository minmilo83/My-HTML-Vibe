<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Liquid Glass V32 - Ultimate Polish</title>

<style>
/* =======================
   1. Design Tokens (è®Šæ•¸è¨­å®š)
   ======================= */
:root {
  /* --- æ·ºè‰²æ¨¡å¼ (Light Mode) --- */
  --bg-gradient: linear-gradient(135deg, #eef2f3 0%, #8e9eab 100%);
  --text-color: #2d3436;
  
  /* ç»ç’ƒè³ªæ„Ÿï¼šå¢åŠ åšåº¦æ„Ÿ */
  --glass-bg: rgba(255, 255, 255, 0.55);
  --glass-border: rgba(255, 255, 255, 0.9);
  /* å…§é™°å½±å‰µé€ åšåº¦ (Thickness) */
  --glass-thickness: inset 0 1px 2px rgba(255, 255, 255, 0.9), inset 0 -1px 2px rgba(0, 0, 0, 0.05);
  --glass-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
  
  /* æŒ‰éˆ•æµ®é›• (Light) */
  --btn-bg: rgba(255, 255, 255, 0.4);
  --btn-shadow: 
    0 8px 20px rgba(0,0,0,0.1), 
    inset 0 1px 1px rgba(255,255,255,1); /* ä¸Šç·£é«˜å…‰ */
  
  /* æ¸¸æ¨™ (Light) - å¼·åŒ–è¼ªå»“èˆ‡æŠ˜å°„ */
  --cursor-bg: rgba(255, 255, 255, 0.15);
  --cursor-border: rgba(255, 255, 255, 0.8);
  --cursor-shadow: 
    0 0 0 1px rgba(0,0,0,0.05), /* å¾®å¼±æé‚Š */
    inset 0 0 10px rgba(255,255,255,0.8), /* å…§éƒ¨åå…‰ */
    0 10px 20px rgba(0,0,0,0.15); /* æŠ•å½± */
}

[data-theme="dark"] {
  /* --- æ·±è‰²æ¨¡å¼ --- */
  --bg-gradient: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
  --text-color: #e0f7fa;
  
  /* ç»ç’ƒè³ªæ„Ÿ (Dark) */
  --glass-bg: rgba(20, 20, 30, 0.4);
  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-thickness: inset 0 1px 1px rgba(255, 255, 255, 0.2), inset 0 -1px 10px rgba(0,0,0,0.3);
  --glass-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
  
  /* æŒ‰éˆ•æµ®é›• (Dark) - ç™¼å…‰æ„Ÿ */
  --btn-bg: rgba(255, 255, 255, 0.05);
  --btn-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 1px 1px rgba(255,255,255,0.2);
  
  /* æ¸¸æ¨™ (Dark) - ç™¼å…‰ */
  --cursor-bg: rgba(255, 255, 255, 0.05);
  --cursor-border: rgba(255, 255, 255, 0.3);
  --cursor-shadow: 0 0 15px rgba(255, 255, 255, 0.2), inset 0 0 10px rgba(255,255,255,0.1);
}

/* =======================
   2. Base Styles
   ======================= */
* { box-sizing: border-box; cursor: none; /* éš±è—åŸç”Ÿæ»‘é¼  */ }

body {
  margin: 0; padding: 40px 20px;
  font-family: "Noto Sans TC", system-ui, -apple-system, sans-serif;
  background: var(--bg-gradient);
  color: var(--text-color);
  min-height: 100vh;
  display: flex; justify-content: center; align-items: flex-start;
  transition: background 0.5s ease, color 0.5s ease;
  overflow-x: hidden;
}

.container {
  display: grid; grid-template-columns: 1fr 400px; gap: 30px;
  width: 100%; max-width: 1100px;
}

/* ğŸ’ æ¶²æ…‹ç»ç’ƒé€šç”¨å¡ç‰‡ (å¢å¼·åšåº¦æ„Ÿ) */
.glass-card {
  padding: 30px; border-radius: 28px;
  background: var(--glass-bg);
  backdrop-filter: blur(25px) saturate(120%); -webkit-backdrop-filter: blur(25px) saturate(120%);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow), var(--glass-thickness); /* é›™é‡é™°å½±æ‰“é€ åšåº¦ */
  transition: all 0.3s ease;
}

h1 { margin: 0 0 10px 0; font-weight: 800; letter-spacing: 1px; }
.subtitle { font-size: 0.9em; opacity: 0.8; margin-bottom: 20px; }
.warning-text { color: #ff6b6b; font-weight: bold; margin-bottom: 15px; font-size: 0.9em; }
[data-theme="dark"] .warning-text { color: #ff8787; }

/* è¼¸å…¥æ¡† */
#wordInput {
  width: 100%; min-height: 180px; padding: 20px;
  border-radius: 20px; border: 1px solid var(--glass-border);
  background: rgba(255,255,255,0.1);
  color: var(--text-color); font-size: 18px; line-height: 1.6;
  outline: none; transition: 0.3s;
  box-shadow: inset 2px 2px 10px rgba(0,0,0,0.05); /* å…§å‡¹æ„Ÿ */
}
#wordInput:focus {
  background: rgba(255,255,255,0.2);
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.05), 0 0 0 2px var(--text-color);
}

/* =======================
   3. Buttons (æ¾æ½¤æµ®é›• & Qå½ˆ)
   ======================= */
.button-group { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 25px; }

.search-button {
  padding: 14px 30px;
  border-radius: 50px;
  border: 1px solid var(--glass-border);
  background: var(--btn-bg);
  box-shadow: var(--btn-shadow);
  color: var(--text-color);
  font-weight: 700; font-size: 16px;
  backdrop-filter: blur(10px);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Qå½ˆæ›²ç·š */
  position: relative; overflow: hidden;
}

/* Hover æµ®èµ· + å…‰æ¾¤ */
.search-button:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 15px 30px rgba(0,0,0,0.15), inset 0 0 15px rgba(255,255,255,0.5);
  border-color: #fff;
}

/* Active æŒ‰å£“ */
.search-button:active {
  transform: scale(0.95);
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.1);
}

/* ç´«è‰²åœ“å½¢æŒ‰éˆ• */
#allButton {
  width: 60px; height: 60px; padding: 0;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 24px;
  background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
  color: white; border: none;
  box-shadow: 0 10px 20px rgba(161, 140, 209, 0.4);
}
#allButton:hover {
  transform: translateY(-5px) scale(1.1);
  box-shadow: 0 15px 30px rgba(161, 140, 209, 0.6);
}

/* =======================
   4. Custom Cursor (é«˜é€Ÿ + ç»ç’ƒé€é¡)
   ======================= */
#customCursor {
  position: fixed; top: 0; left: 0; z-index: 9999;
  width: var(--cursor-size); height: var(--cursor-size);
  pointer-events: none;
  transform: translate(-50%, -50%);
  transition: width 0.2s, height 0.2s, border-radius 0.2s; /* ç§»é™¤ transform transition ä»¥æé«˜é€Ÿåº¦ */
  
  /* ğŸ’§ æ¶²æ…‹æ°´æ»´æ¨£å¼ */
  background: var(--cursor-bg);
  backdrop-filter: blur(4px); /* è¼•å¾®æ¨¡ç³ŠèƒŒæ™¯ï¼Œä¿ç•™é€è¦–æ„Ÿ */
  border: 1px solid var(--cursor-border);
  border-radius: 50%;
  box-shadow: var(--cursor-shadow);
}

/* äº’å‹•ç‹€æ…‹ï¼šå¸é™„èˆ‡è®Šå½¢ */
body.hover-active #customCursor {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255,255,255,0.5);
  backdrop-filter: none; /* å¸é™„æ™‚æ›´æ¸…æ™° */
}

/* =======================
   5. Pomodoro Ring (ç²¾æº–è»Œé“)
   ======================= */
.pomo-container {
  display: flex; flex-direction: column; align-items: center; position: relative;
  /* ç¢ºä¿ SVG å®¹å™¨å°ºå¯¸å›ºå®šï¼Œè®“è¨ˆç®—ç²¾æº– */
  width: 240px; height: 240px; 
  margin: 0 auto;
}
.ring-svg {
  width: 100%; height: 100%; transform: rotate(-90deg);
  overflow: visible; /* å…è¨±é™°å½±è¶…å‡º */
}
/* è»Œé“ (æœªå¡«æ»¿) */
.ring-track {
  fill: none; stroke: rgba(128,128,128, 0.1); stroke-width: 12;
}
[data-theme="dark"] .ring-track { stroke: rgba(255,255,255,0.05); }

/* é€²åº¦ (å¡«æ»¿ - æ¼¸å±¤) */
.ring-progress {
  fill: none; stroke: url(#gradientStroke); stroke-width: 12; stroke-linecap: round;
  stroke-dasharray: 628; stroke-dashoffset: 0; /* 2*PI*100 */
  filter: drop-shadow(0 0 5px rgba(0,198,251,0.5)); /* ç™¼å…‰æ„Ÿ */
}

/* æ‹–æ›³æ‰‹æŠŠ (ç™½é») */
.ring-handle {
  position: absolute; 
  top: 50%; left: 50%; /* åˆå§‹ä¸­å¿ƒé» */
  width: 28px; height: 28px;
  background: #fff; border-radius: 50%;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  cursor: grab; pointer-events: none; /* JSæ§åˆ¶ä½ç½® */
  /* åˆå§‹ä¸åç§»ï¼ŒJS æœƒè¨­å®š transform */
  transform: translate(-50%, -50%); 
  z-index: 20;
}

/* äº’å‹•è“‹æ¿ (é€æ˜ï¼Œè² è²¬æ¥æ”¶æ»‘é¼ äº‹ä»¶) */
.ring-overlay {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  border-radius: 50%;
  cursor: grab; z-index: 10;
}
.ring-overlay:active { cursor: grabbing; }

.time-display {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  text-align: center; pointer-events: none;
}
#timeLeft { font-size: 36px; font-weight: 800; font-variant-numeric: tabular-nums; }
.time-label { font-size: 14px; opacity: 0.7; }

.pomo-controls {
  display: flex; gap: 15px; margin-top: 25px; justify-content: center; width: 100%;
}

/* =======================
   6. Language Menu (æµ®å‹•)
   ======================= */
#langFab {
  position: fixed; bottom: 30px; right: 30px;
  width: 60px; height: 60px; border-radius: 50%;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  backdrop-filter: blur(10px);
  display: flex; align-items: center; justify-content: center;
  font-size: 28px; box-shadow: var(--glass-shadow);
  z-index: 1000; transition: 0.3s;
}
#langFab:hover { transform: scale(1.1) rotate(20deg); }

#langMenu {
  position: fixed; bottom: 100px; right: 30px;
  background: var(--glass-bg); backdrop-filter: blur(20px);
  padding: 10px; border-radius: 16px; border: 1px solid var(--glass-border);
  display: none; flex-direction: column; gap: 5px;
  box-shadow: var(--glass-shadow); z-index: 999;
}
.lang-opt {
  padding: 10px 20px; border-radius: 8px; font-weight: bold;
  transition: 0.2s; text-align: center; color: var(--text-color);
}
.lang-opt:hover { background: rgba(255,255,255,0.2); }

/* Responsive */
@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; }
  #customCursor { display: none; } /* æ‰‹æ©Ÿéš±è—è‡ªè¨‚æ¸¸æ¨™ */
  * { cursor: auto; }
}
</style>
</head>
<body data-theme="light">

<div id="customCursor"></div>

<div id="langFab" class="interactive">ğŸŒ</div>
<div id="langMenu">
  <div class="lang-opt interactive" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</div>
  <div class="lang-opt interactive" data-lang="en">English</div>
  <div class="lang-opt interactive" data-lang="ja">æ—¥æœ¬èª</div>
  <div class="lang-opt interactive" data-lang="ko">í•œêµ­ì–´</div>
  <div class="lang-opt interactive" data-lang="zh-CN">ç®€ä½“ä¸­æ–‡</div>
  <div class="lang-opt interactive" data-lang="fr">FranÃ§ais</div>
</div>

<div class="container">
  
  <div class="glass-card">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
      <div>
        <h1 data-i18n="title">ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢</h1>
        <div class="subtitle" data-i18n="subtitle">è¼¸å…¥å–®å­—ï¼Œä¸€éµé–‹å•Ÿæ‰€æœ‰è§£é‡‹</div>
      </div>
      <button class="search-button interactive" id="themeToggle" style="padding:10px 15px; border-radius:50%;">ğŸŒ™</button>
    </div>

    <div class="warning-text" data-i18n="warning">âš ï¸ è‹¥æŒ‰éˆ•ç„¡åæ‡‰ï¼Œè«‹å˜—è©¦ã€Œç¡¬é‡æ–°æ•´ç†ã€(Ctrl/Cmd + Shift + R)</div>

    <textarea id="wordInput" placeholder="è«‹è¼¸å…¥å–®å­—ï¼Œä¸€è¡Œä¸€å€‹ã€‚&#10;ä¾‹å¦‚ï¼š&#10;paradigm&#10;subsume&#10;tacit"></textarea>

    <div class="button-group">
      <button class="search-button interactive" onclick="searchDict(0)" data-i18n="cambridge">åŠæ©‹è©å…¸</button>
      <button class="search-button interactive" onclick="searchDict(1)" data-i18n="dreye">è­¯å…¸é€š</button>
      <button class="search-button interactive" id="allButton" onclick="searchAll()">ğŸŸ£</button>
    </div>

    <div class="subtitle" style="margin-top:20px; font-size: 0.85em;">
      <span data-i18n="usage">ğŸ¯ ä½¿ç”¨èªªæ˜ï¼š</span>
      <ul style="margin: 5px 0 0 20px; padding:0;">
        <li data-i18n="tip1">æ”¯æ´å¤šè¡Œè¼¸å…¥ï¼Œç´«è‰²æŒ‰éˆ•å¯ä¸€éµå…¨é–‹ã€‚</li>
        <li data-i18n="tip2">æ‹–æ›³å³å´åœ“ç’°å¯è¨­å®šç•ªèŒ„é˜æ™‚é–“ã€‚</li>
      </ul>
    </div>
  </div>

  <div style="display:flex; flex-direction: column; gap:30px;">
    
    <div class="glass-card" style="padding: 20px; text-align:center;">
      <div id="realTime" style="font-size: 2em; font-weight: 800;">00:00:00</div>
      <div id="curLangDisplay" style="font-size: 0.9em; opacity: 0.7;">ZH-TW</div>
    </div>

    <div class="glass-card">
      <div class="pomo-container">
        <svg class="ring-svg" viewBox="0 0 220 220">
          <defs>
            <linearGradient id="gradientStroke" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00c6fb" />
              <stop offset="100%" stop-color="#005bea" />
            </linearGradient>
          </defs>
          <circle class="ring-track" cx="110" cy="110" r="100"></circle>
          <circle class="ring-progress" id="ringProgress" cx="110" cy="110" r="100"></circle>
        </svg>
        
        <div class="ring-overlay" id="ringOverlay"></div>
        <div class="ring-handle" id="ringHandle"></div>
        
        <div class="time-display">
          <div id="timeLeft">30:00</div>
          <div class="time-label" data-i18n="dragTip">æ‹–æ›³èª¿æ•´</div>
        </div>
      </div>

      <div class="pomo-controls">
        <button class="search-button interactive" id="startBtn" data-i18n="start">é–‹å§‹</button>
        <button class="search-button interactive" id="resetBtn" data-i18n="reset">é‡ç½®</button>
      </div>
    </div>

  </div>
</div>

<script>
// ===================================
// 1. Cursor Logic (é«˜é€Ÿ + ç£å¸)
// ===================================
const cursor = document.getElementById('customCursor');
let mouseX = 0, mouseY = 0;
let cursorX = 0, cursorY = 0;

document.addEventListener('mousemove', (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
  
  // Pomodoro Dragging Logic inside mousemove
  if (isDragging) {
    handleDrag(e);
  }
});

function animateCursor() {
  // 1. é€Ÿåº¦èª¿æ•´ï¼š0.4 (éå¸¸è·Ÿæ‰‹)
  const dt = 0.4; 
  cursorX += (mouseX - cursorX) * dt;
  cursorY += (mouseY - cursorY) * dt;
  
  // Normal state positioning
  if (!document.body.classList.contains('hover-active')) {
    cursor.style.left = cursorX + 'px';
    cursor.style.top = cursorY + 'px';
  }
  
  requestAnimationFrame(animateCursor);
}
animateCursor();

// Magnetic Effect
const interactives = document.querySelectorAll('.interactive');

interactives.forEach(el => {
  el.addEventListener('mouseenter', () => {
    document.body.classList.add('hover-active');
    const rect = el.getBoundingClientRect();
    
    // Morph cursor to button shape
    cursor.style.width = (rect.width + 10) + 'px';
    cursor.style.height = (rect.height + 10) + 'px';
    cursor.style.borderRadius = getComputedStyle(el).borderRadius;
    cursor.style.left = (rect.left + rect.width/2) + 'px';
    cursor.style.top = (rect.top + rect.height/2) + 'px';
  });
  
  el.addEventListener('mouseleave', () => {
    document.body.classList.remove('hover-active');
    // Reset shape
    cursor.style.width = 'var(--cursor-size)';
    cursor.style.height = 'var(--cursor-size)';
    cursor.style.borderRadius = '50%';
  });
  
  el.addEventListener('mousemove', (e) => {
    const rect = el.getBoundingClientRect();
    const centerX = rect.left + rect.width/2;
    const centerY = rect.top + rect.height/2;
    
    const moveX = (e.clientX - centerX) * 0.2; 
    const moveY = (e.clientY - centerY) * 0.2;
    
    el.style.transform = `translate(${moveX}px, ${moveY}px)`;
  });
  
  el.addEventListener('mouseleave', () => {
    el.style.transform = 'translate(0, 0)';
  });
});

// ===================================
// 2. Dictionary Logic
// ===================================
const DICT_URLS = [
  "https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/",
  "https://yun.dreye.com/dict_new/dict.php?w="
];

function searchDict(index) {
  const input = document.getElementById('wordInput').value.trim();
  if(!input) return;
  const list = input.split('\n').map(w => w.trim()).filter(w => w);
  
  list.forEach((w, i) => {
    setTimeout(() => {
      let url = "";
      if(index === 0) url = DICT_URLS[0] + w.toLowerCase().replace(/\s/g, '-');
      else url = DICT_URLS[1] + w.replace(/\s/g, '+') + "&hidden_codepage=01";
      window.open(url, '_blank');
    }, i * 150);
  });
}

function searchAll() {
  searchDict(0);
  setTimeout(() => searchDict(1), 200);
}

// ===================================
// 3. Theme & Clock
// ===================================
const themeBtn = document.getElementById('themeToggle');
themeBtn.addEventListener('click', () => {
  const body = document.body;
  const isDark = body.getAttribute('data-theme') === 'dark';
  body.setAttribute('data-theme', isDark ? 'light' : 'dark');
  themeBtn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
});

setInterval(() => {
  document.getElementById('realTime').textContent = new Date().toLocaleTimeString();
}, 1000);

// ===================================
// 4. Pomodoro Logic (Fixed Drag & White Dot)
// ===================================
const ringProgress = document.getElementById('ringProgress');
const ringOverlay = document.getElementById('ringOverlay');
const ringHandle = document.getElementById('ringHandle');
const timeText = document.getElementById('timeLeft');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const svg = document.querySelector('.ring-svg');

let totalTime = 1800;
let timeLeft = 1800;
let timerId = null;
let isDragging = false;
const RADIUS = 100;
const CENTER = 120; // å®¹å™¨å¯¬åº¦ 240/2 = 120
const CIRCUMFERENCE = 2 * Math.PI * RADIUS;

function updateRing(seconds) {
  const ratio = seconds / 10800; // Max 3 hours
  const offset = CIRCUMFERENCE - (ratio * CIRCUMFERENCE);
  ringProgress.style.strokeDashoffset = offset;
  
  // Calculate Handle Position (æ­»æ­»å¸é™„è»Œé“)
  const angleDeg = ratio * 360;
  const angleRad = (angleDeg - 90) * (Math.PI / 180);
  const hX = CENTER + RADIUS * Math.cos(angleRad);
  const hY = CENTER + RADIUS * Math.sin(angleRad);
  
  ringHandle.style.left = `${hX}px`;
  ringHandle.style.top = `${hY}px`;
  
  const m = Math.floor(seconds / 60).toString().padStart(2,'0');
  const s = (seconds % 60).toString().padStart(2,'0');
  timeText.textContent = `${m}:${s}`;
}

// Drag Logic
function getAngle(e) {
  const rect = ringOverlay.getBoundingClientRect();
  const x = e.clientX - rect.left - rect.width/2;
  const y = e.clientY - rect.top - rect.height/2;
  let angle = Math.atan2(y, x) * (180 / Math.PI) + 90;
  if(angle < 0) angle += 360;
  return angle;
}

ringOverlay.addEventListener('mousedown', () => isDragging = true);
document.addEventListener('mouseup', () => isDragging = false);

function handleDrag(e) {
  if (timerId) clearInterval(timerId); 
  startBtn.textContent = STRINGS[currLang].start;
  
  const angle = getAngle(e);
  let sec = Math.round((angle / 360) * 10800 / 10) * 10;
  if (sec < 10) sec = 10;
  
  timeLeft = sec;
  totalTime = sec;
  updateRing(sec);
}

// Timer Controls
startBtn.addEventListener('click', () => {
  if (timerId) {
    clearInterval(timerId);
    timerId = null;
    startBtn.textContent = STRINGS[currLang].start;
  } else {
    startBtn.textContent = STRINGS[currLang].pause;
    timerId = setInterval(() => {
      if (timeLeft > 0) {
        timeLeft--;
        updateRing(timeLeft);
      } else {
        clearInterval(timerId);
        timerId = null;
        startBtn.textContent = STRINGS[currLang].start;
        alert("Time's up!");
      }
    }, 1000);
  }
});

resetBtn.addEventListener('click', () => {
  clearInterval(timerId);
  timerId = null;
  startBtn.textContent = STRINGS[currLang].start;
  timeLeft = 1800;
  updateRing(timeLeft);
});

// Init Ring
updateRing(1800);

// ===================================
// 5. Localization System
// ===================================
let currLang = "zh-TW";
const STRINGS = {
  "zh-TW": { title: "ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢", subtitle: "è¼¸å…¥å–®å­—ï¼Œä¸€éµé–‹å•Ÿæ‰€æœ‰è§£é‡‹", warning: "âš ï¸ è‹¥æŒ‰éˆ•ç„¡åæ‡‰ï¼Œè«‹å˜—è©¦ã€Œç¡¬é‡æ–°æ•´ç†ã€", cambridge: "åŠæ©‹è©å…¸", dreye: "è­¯å…¸é€š", usage: "ğŸ¯ ä½¿ç”¨èªªæ˜ï¼š", tip1: "æ”¯æ´å¤šè¡Œè¼¸å…¥ï¼Œç´«è‰²æŒ‰éˆ•å¯ä¸€éµå…¨é–‹ã€‚", tip2: "æ‹–æ›³å³å´åœ“ç’°å¯è¨­å®šç•ªèŒ„é˜æ™‚é–“ã€‚", dragTip: "æ‹–æ›³èª¿æ•´", start: "é–‹å§‹", pause: "æš«åœ", reset: "é‡ç½®" },
  "en": { title: "ğŸ“š Batch Dictionary", subtitle: "One click to open all tabs", warning: "âš ï¸ If failed, try Hard Refresh (Ctrl+Shift+R)", cambridge: "Cambridge", dreye: "Dr.eye", usage: "ğŸ¯ Usage:", tip1: "Multi-line supported. Purple button opens all.", tip2: "Drag ring to set timer.", dragTip: "Drag to set", start: "Start", pause: "Pause", reset: "Reset" },
  "ja": { title: "ğŸ“š è¾æ›¸ä¸€æ‹¬æ¤œç´¢", subtitle: "ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã™ã¹ã¦é–‹ã", warning: "âš ï¸ åå¿œãŒãªã„å ´åˆã¯ãƒãƒ¼ãƒ‰ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„", cambridge: "ã‚±ãƒ³ãƒ–ãƒªãƒƒã‚¸", dreye: "Dr.eye", usage: "ğŸ¯ ä½¿ã„æ–¹ï¼š", tip1: "è¤‡æ•°è¡Œå¯¾å¿œã€‚ç´«ãƒœã‚¿ãƒ³ã§ä¸€æ‹¬è¡¨ç¤ºã€‚", tip2: "ãƒªãƒ³ã‚°ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ã‚¿ã‚¤ãƒãƒ¼è¨­å®šã€‚", dragTip: "ãƒ‰ãƒ©ãƒƒã‚°è¨­å®š", start: "é–‹å§‹", pause: "ä¸€æ™‚åœæ­¢", reset: "ãƒªã‚»ãƒƒãƒˆ" },
  "ko": { title: "ğŸ“š ì‚¬ì „ ì¼ê´„ ê²€ìƒ‰", subtitle: "í•œ ë²ˆì˜ í´ë¦­ìœ¼ë¡œ ëª¨ë“  íƒ­ ì—´ê¸°", warning: "âš ï¸ ë°˜ì‘ì´ ì—†ìœ¼ë©´ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨ í•˜ì„¸ìš”", cambridge: "ìº ë¸Œë¦¬ì§€", dreye: "Dr.eye", usage: "ğŸ¯ ì‚¬ìš©ë²•:", tip1: "ì—¬ëŸ¬ ì¤„ ì§€ì›. ë³´ë¼ìƒ‰ ë²„íŠ¼ì€ ëª¨ë‘ ì—½ë‹ˆë‹¤.", tip2: "ë§ì„ ë“œë˜ê·¸í•˜ì—¬ íƒ€ì´ë¨¸ ì„¤ì •.", dragTip: "ë“œë˜ê·¸ ì„¤ì •", start: "ì‹œì‘", pause: "ì¼ì‹œì •ì§€", reset: "ì´ˆê¸°í™”" },
  "zh-CN": { title: "ğŸ“š åŒè¯å…¸æ‰¹é‡æŸ¥è¯¢", subtitle: "è¾“å…¥å•è¯ï¼Œä¸€é”®å¼€å¯åˆ†é¡µ", warning: "âš ï¸ è‹¥æ— ååº”ï¼Œè¯·å°è¯•â€œç¡¬åˆ·æ–°â€", cambridge: "å‰‘æ¡¥è¯å…¸", dreye: "è¯‘å…¸é€š", usage: "ğŸ¯ ä½¿ç”¨è¯´æ˜ï¼š", tip1: "æ”¯æŒå¤šè¡Œã€‚ç´«è‰²æŒ‰é’®ä¸€é”®å…¨å¼€ã€‚", tip2: "æ‹–æ‹½åœ†ç¯è®¾ç½®æ—¶é—´ã€‚", dragTip: "æ‹–æ‹½è°ƒæ•´", start: "å¼€å§‹", pause: "æš‚åœ", reset: "é‡ç½®" },
  "fr": { title: "ğŸ“š Recherche Dico", subtitle: "Un clic pour tout ouvrir", warning: "âš ï¸ Si bloquÃ©, essayez Ctrl+Shift+R", cambridge: "Cambridge", dreye: "Dr.eye", usage: "ğŸ¯ Emploi:", tip1: "Multiligne OK. Bouton violet ouvre tout.", tip2: "Glisser l'anneau pour le minuteur.", dragTip: "Glisser", start: "DÃ©marrer", pause: "Pause", reset: "RÃ©initialiser" }
};

const langMenu = document.getElementById('langMenu');
const langFab = document.getElementById('langFab');

langFab.addEventListener('click', (e) => {
  e.stopPropagation();
  langMenu.style.display = langMenu.style.display === 'flex' ? 'none' : 'flex';
});
document.addEventListener('click', () => langMenu.style.display = 'none');

document.querySelectorAll('.lang-opt').forEach(opt => {
  opt.addEventListener('click', () => {
    currLang = opt.getAttribute('data-lang');
    updateLang();
  });
});

function updateLang() {
  const s = STRINGS[currLang];
  document.querySelector('[data-i18n="title"]').textContent = s.title;
  document.querySelector('[data-i18n="subtitle"]').textContent = s.subtitle;
  document.querySelector('[data-i18n="warning"]').textContent = s.warning;
  document.querySelector('[data-i18n="cambridge"]').textContent = s.cambridge;
  document.querySelector('[data-i18n="dreye"]').textContent = s.dreye;
  document.querySelector('[data-i18n="usage"]').textContent = s.usage;
  document.querySelector('[data-i18n="tip1"]').textContent = s.tip1;
  document.querySelector('[data-i18n="tip2"]').textContent = s.tip2;
  document.querySelector('[data-i18n="dragTip"]').textContent = s.dragTip;
  
  if(!timerId) startBtn.textContent = s.start;
  else startBtn.textContent = s.pause;
  resetBtn.textContent = s.reset;
}
</script>
</body>
</html>

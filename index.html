<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Liquid Glass æœ€å®Œæ•´ç‰ˆ â€” é›™å­—å…¸ + å…­èª + æ°´æ»´æ¸¸æ¨™ + ç•ªèŒ„é˜</title>

<style>
/* =======================
   Design tokens
   ======================= */
:root{
  --bg-gradient: linear-gradient(135deg,#fdfbfb 0%,#ebedee 100%);
  --text-color:#222;
  --glass-bg: rgba(255,255,255,0.60);
  --glass-border: rgba(255,255,255,0.85);
  --glass-shadow: 0 8px 32px rgba(100,100,111,0.12);
  --accent-1: #00bcd4;
  --accent-2: #9b59b6;
  --accent-3: #2ecc71;
  --btn-text: #1f2a2b;
  --cursor-size: 48px;      /* final cursor diameter (half of original design) */
  --cursor-inner: 32px;
  --ring-radius: 40;       /* r for SVG ring */
  --ring-circumference: 251.2; /* 2*pi*40 */
}

/* Dark theme adjustments for readability */
[data-theme="dark"]{
  --bg-gradient: linear-gradient(135deg,#0f0c29,#302b63,#24243e);
  --text-color:#eaf6ff;
  --glass-bg: rgba(255,255,255,0.04);
  --glass-border: rgba(255,255,255,0.16);
  --glass-shadow: 0 8px 32px rgba(0,0,0,0.6);
  --accent-1:#00d2ff;
  --accent-2:#d580ff;
  --accent-3:#00ff88;
}

/* =======================
   Layout & base styles
   ======================= */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family: "Noto Sans TC","Segoe UI",system-ui,-apple-system,Arial;background:var(--bg-gradient);color:var(--text-color);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
body{display:flex;align-items:flex-start;justify-content:center;padding:32px;transition:background .45s ease,color .45s ease;}

/* page container */
.container{ width:100%; max-width:1200px; display:grid; grid-template-columns: 1fr 420px; gap:28px; align-items:start; }

/* glass card */
.card{
  padding:22px;border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.24), rgba(255,255,255,0.06));
  backdrop-filter: blur(18px) saturate(140%); -webkit-backdrop-filter: blur(18px) saturate(140%);
  border:1px solid var(--glass-border); box-shadow:var(--glass-shadow);
}

/* header */
.header{display:flex;align-items:center;justify-content:space-between;gap:12px}
.header h1{margin:0;font-weight:700;letter-spacing:1px}
.small{font-size:13px;color:rgba(0,0,0,0.6)}

/* textarea */
#wordInput{width:100%;min-height:180px;padding:16px;border-radius:12px;resize:vertical;font-size:16px;border:1px solid var(--glass-border);background:var(--glass-bg);color:var(--text-color);outline:none;box-shadow:inset 0 6px 12px rgba(0,0,0,0.04)}

/* buttons */
.button-group{margin-top:14px;display:flex;gap:14px;align-items:center;flex-wrap:wrap}
.search-button{padding:10px 20px;border-radius:999px;cursor:pointer;border:1px solid rgba(255,255,255,0.12);background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));font-weight:700;transition:transform .28s cubic-bezier(.2,.9,.3,1.2),box-shadow .28s}
.search-button:hover{transform:translateY(-6px) scale(1.02)}
#allButton{width:64px;height:64px;font-size:22px;padding:0;border-radius:50%;display:flex;align-items:center;justify-content:center}

/* templates area */
.templates{margin-top:18px;font-size:14px;color:rgba(0,0,0,0.6)}

/* right column */
.right{display:flex;flex-direction:column;gap:18px}
.clock-card{padding:16px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:10px;border:1px solid var(--glass-border);background:var(--glass-bg);box-shadow:var(--glass-shadow)}
#currentTime{font-size:22px;font-weight:800}

/* pomo */
.pomo-card{padding:14px;border-radius:12px;background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));border:1px solid var(--glass-border);box-shadow: var(--glass-shadow)}
.pomo-ring{width:220px;height:220px;display:grid;place-items:center;position:relative}
svg.pomo-svg{width:100%;height:100%;transform:rotate(-90deg)}
.pomo-center{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
.time-label{font-weight:800;font-size:20px}
.handle{position:absolute;width:20px;height:20px;border-radius:50%;background:var(--glass-bg);border:2px solid rgba(255,255,255,0.85);transform:translate(-50%,-50%);cursor:grab;box-shadow:0 8px 20px rgba(0,0,0,0.12)}

/* language toggle (floating) */
#languageToggle{position:fixed;right:22px;bottom:22px;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;background:var(--glass-bg);border:1px solid var(--glass-border);cursor:pointer;box-shadow:var(--glass-shadow);z-index:220;transition:transform .25s}
#languageToggle:hover{transform:scale(1.08) rotate(12deg)}
#languageMenu{position:fixed;right:22px;bottom:100px;width:250px;padding:12px;border-radius:16px;display:none;flex-direction:column;gap:8px;z-index:210;background: rgba(255,255,255,0.12);border:1px solid rgba(255,255,255,0.2);backdrop-filter: blur(18px) saturate(140%);-webkit-backdrop-filter: blur(18px) saturate(140%);animation:menuPop .38s cubic-bezier(.31,1.6,.37,1.27)}
@keyframes menuPop{0%{transform:translateY(14px) scale(.86);opacity:0}70%{transform:translateY(-4px) scale(1.03);opacity:1}100%{transform:translateY(0) scale(1)}}
.lang-btn{padding:10px;border-radius:12px;text-align:center;cursor:pointer;background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.06));border:1px solid rgba(255,255,255,0.08);transition: transform .22s, box-shadow .22s;font-weight:800}
.lang-btn:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 10px 24px rgba(0,0,0,0.12)}
#currentLang{font-size:13px;opacity:0.9}

/* toast */
#toast{position:fixed;left:50%;top:18px;transform:translateX(-50%);z-index:950;min-width:240px;max-width:520px;padding:12px 18px;border-radius:12px;display:none;align-items:center;gap:12px;background: rgba(255,255,255,0.12);border:1px solid rgba(255,255,255,0.18);backdrop-filter:blur(12px) saturate(160%);box-shadow:var(--glass-shadow);font-weight:800}

/* custom cursor (liquid glass droplet) */
#customCursor{position:fixed;left:0;top:0;pointer-events:none;z-index:999;width:var(--cursor-size);height:var(--cursor-size);display:flex;align-items:center;justify-content:center;transform:translate(-50%,-50%) scale(1);transition:transform .12s linear;will-change:transform,left,top}
.cursor-lens{width:100%;height:100%;border-radius:50%;background: radial-gradient(circle at 35% 30%, rgba(255,255,255,0.62), rgba(255,255,255,0.18) 18%, rgba(255,255,255,0.04) 40%, transparent 55%);border: 1px solid rgba(255,255,255,0.18);box-shadow: 0 10px 24px rgba(0,0,0,0.12), inset 0 6px 14px rgba(255,255,255,0.06);backdrop-filter: blur(8px) saturate(140%);-webkit-backdrop-filter: blur(8px) saturate(140%);display:flex;align-items:center;justify-content:center;transition:width .12s ease,height .12s ease,box-shadow .12s ease,transform .08s}
.cursor-inner{width:var(--cursor-inner);height:var(--cursor-inner);border-radius:50%;background: linear-gradient(145deg, rgba(255,255,255,0.92), rgba(255,255,255,0.06));box-shadow: inset 0 -6px 14px rgba(0,0,0,0.08), 0 6px 16px rgba(0,0,0,0.12);transform:translateY(-4px);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--text-color);opacity:0.92}
.refraction{position:absolute;left:0;top:0;width:100%;height:100%;border-radius:50%;background: radial-gradient(circle at 40% 35%, rgba(255,255,255,0.28), rgba(255,255,255,0.02) 25%, transparent 40%);mix-blend-mode:overlay;pointer-events:none;opacity:.95;transform:translateZ(0)}
#customCursor.big .cursor-lens{transform:scale(1.16);width:120%;height:120%;box-shadow:0 18px 40px rgba(0,0,0,0.26)}

/* interaction */
.interactive{transition:transform .22s cubic-bezier(.2,.9,.3,1.2), filter .22s;will-change:transform,filter}
.text-warp{display:inline-block;transition:transform .18s linear}

/* handle small screens */
@media (max-width:1000px){
  .container{grid-template-columns:1fr;padding-bottom:120px}
  #languageMenu{right:12px;bottom:92px}
}
</style>
</head>
<body>

<!-- toast -->
<div id="toast" class="liquid-glass" role="status" aria-live="polite"></div>

<!-- custom cursor -->
<div id="customCursor" aria-hidden="true">
  <div class="cursor-lens">
    <div class="cursor-inner">â—‹</div>
    <div class="refraction"></div>
  </div>
</div>

<!-- language floating toggle -->
<button id="languageToggle" title="åˆ‡æ›èªè¨€">ğŸŒ</button>
<div id="languageMenu" class="liquid-glass" aria-hidden="true">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
    <div style="font-weight:800" data-i18n="langTitle">èªè¨€ / Language</div>
    <div id="currentLang" class="small">ç¹é«”ä¸­æ–‡</div>
  </div>
  <div class="lang-btn" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</div>
  <div class="lang-btn" data-lang="en">English</div>
  <div class="lang-btn" data-lang="ja">æ—¥æœ¬èª</div>
  <div class="lang-btn" data-lang="ko">í•œêµ­ì–´</div>
  <div class="lang-btn" data-lang="zh-CN">ç®€ä½“ä¸­æ–‡</div>
  <div class="lang-btn" data-lang="fr">FranÃ§ais</div>
</div>

<div class="container" role="main">

  <!-- LEFT -->
  <div class="card">
    <div class="header">
      <div>
        <h1 data-i18n="title">ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢å·¥å…·</h1>
        <div class="small" id="tagline" data-i18n="tagline">æ”¯æ´åŠæ©‹ / Dr.eyeï¼Œä»¥åŠä¸€éµé–‹å•Ÿå…¨éƒ¨åˆ†é </div>
      </div>
      <div>
        <button id="themeToggle" class="search-button" title="åˆ‡æ›æ·±æ·ºè‰²">ğŸŒ™</button>
      </div>
    </div>

    <p class="small warning-text" data-i18n="warning">âš ï¸ é»æ“ŠæŒ‰éˆ•ç„¡åæ‡‰æ™‚ï¼Œç³»çµ±æœƒé¡¯ç¤ºé€šçŸ¥è€Œéç›´æ¥è·³è½‰ã€‚</p>

    <textarea id="wordInput" rows="8" placeholder="è«‹è¼¸å…¥å–®å­—ï¼è©èªï¼Œå»ºè­°ä¸€è¡Œä¸€å€‹ã€‚ä¾‹å¦‚ï¼š
paradigm
subsume
tacit"></textarea>

    <div class="button-group" style="margin-top:16px;">
      <button id="cambridgeButton" class="search-button interactive" data-i18n="cambridge">åŠæ©‹è©å…¸</button>
      <button id="dreyeButton" class="search-button interactive" data-i18n="dreye">è­¯å…¸é€š (Dr.eye)</button>
      <button id="allButton" class="search-button interactive" data-i18n="all">ğŸŸ£</button>
      <button id="openNotify" class="search-button interactive" data-i18n="demoNotify">ç¤ºç¯„é€šçŸ¥</button>
    </div>

    <div class="templates small" style="margin-top:20px;">
      <h3 style="margin:0 0 10px 0" data-i18n="usage">ğŸ¯ ä½¿ç”¨èªªæ˜</h3>
      <ul>
        <li data-i18n="usage1">æ¯è¡Œä¸€å€‹å–®å­—æˆ–è©èªï¼›å¯æŒ‰ã€Œä¸€éµæŸ¥è©¢ã€åŒæ™‚é–‹å•Ÿå¤šå€‹åˆ†é ï¼ˆç€è¦½å™¨å¯èƒ½é˜»æ“‹å½ˆå‡ºè¦–çª—ï¼‰ã€‚</li>
        <li data-i18n="usage2">å³ä¸‹åœ°çƒå¯åˆ‡æ›ä»‹é¢èªè¨€ï¼ˆåˆ‡æ›å¾Œå…¨éƒ¨æ–‡å­—æœƒæ”¹è®Šï¼‰ã€‚</li>
        <li data-i18n="usage3">æ¸¸æ¨™ç‚ºæ°´æ»´/é€é¡ï¼Œé è¿‘æŒ‰éˆ•æœƒå‡ºç¾å¸é™„èˆ‡æ‰­æ›²æ„Ÿã€‚</li>
      </ul>
    </div>
  </div>

  <!-- RIGHT -->
  <div style="display:flex;flex-direction:column;gap:18px">

    <div class="clock-card card">
      <div style="display:flex;align-items:center;justify-content:space-between;width:100%">
        <div>
          <div class="small" data-i18n="nowTime">ç¾åœ¨æ™‚é–“</div>
          <div id="currentTime">--:--:--</div>
        </div>
        <div style="text-align:right">
          <div class="small" data-i18n="curLang">ç•¶å‰èªè¨€</div>
          <div id="displayLang" style="font-weight:800">zh-TW</div>
        </div>
      </div>
      <div style="margin-top:12px" class="small" data-i18n="timeNote">ï¼ˆæ™‚é–“æœƒè‡ªå‹•æ›´æ–°ï¼‰</div>
    </div>

    <div class="pomo-card card">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div>
          <div style="font-weight:800" data-i18n="pomoTitle">ç•ªèŒ„é˜ / å€’æ•¸è¨ˆæ™‚å™¨</div>
          <div class="small" data-i18n="pomoNote">å¯è‡ªè¨‚æ™‚é–“ï¼Œæœ€çŸ­ 10 ç§’ï¼Œæœ€é•· 180 åˆ†é˜ï¼ˆæ¯æ ¼ 10 ç§’ï¼‰</div>
        </div>
        <div>
          <button id="startPomo" class="search-button interactive" data-i18n="start">Start</button>
          <button id="pausePomo" class="search-button interactive" data-i18n="pause">Pause</button>
          <button id="resetPomo" class="search-button interactive" data-i18n="reset">Reset</button>
        </div>
      </div>

      <div style="display:flex;gap:12px;align-items:center;margin-top:14px">
        <div class="pomo-ring" aria-hidden="true">
          <svg class="pomo-svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="var(--accent-1)"/>
                <stop offset="50%" stop-color="var(--accent-2)"/>
                <stop offset="100%" stop-color="var(--accent-3)"/>
              </linearGradient>
            </defs>
            <circle cx="50" cy="50" r="40" stroke="rgba(200,200,200,0.18)" stroke-width="8" fill="none"></circle>
            <circle id="progress" cx="50" cy="50" r="40" stroke="url(#grad)" stroke-width="8" fill="none" stroke-linecap="round"
              stroke-dasharray="251.2" stroke-dashoffset="251.2"></circle>
          </svg>

          <div class="pomo-center">
            <div id="timeRemaining" class="time-label">00:00</div>
            <div class="controls-small">æ™‚é•·ï¼š<span id="setDurationLabel">00:30</span></div>
          </div>

          <div id="pomoHandle" class="handle" style="left:100%;top:50%">â‡†</div>
        </div>

        <div style="flex:1">
          <div style="display:flex;gap:8px;align-items:center">
            <input id="durationInput" type="number" min="10" max="10800" step="10" value="1800" style="width:120px;padding:8px;border-radius:8px;border:1px solid var(--glass-border);background:var(--glass-bg)">
            <div class="small" data-i18n="secLabel">ç§’ï¼ˆ10 ç§’ç‚ºä¸€æ ¼ï¼‰</div>
          </div>
          <div class="pomo-controls" style="margin-top:12px">
            <button id="decTen" class="search-button interactive" title="æ¸› 10 ç§’">-10s</button>
            <button id="incTen" class="search-button interactive" title="åŠ  10 ç§’">+10s</button>
            <div class="footnote" data-i18n="dragHint">æ‹–æ›³åœ“ç’°å³å´åœ“é»å¯èª¿æ•´æ™‚é–“</div>
          </div>

        </div>
      </div>

      <div style="margin-top:12px" class="small" data-i18n="pomoFooter">æç¤ºï¼šè¨ˆæ™‚ä¸­å¯æš«åœèˆ‡é‡è¨­ï¼ŒçµæŸæ™‚ä»¥é€šçŸ¥ï¼ˆç•«é¢è·³å‡ºï¼‰æç¤ºã€‚</div>

    </div>
  </div>

</div>

<script>
/* ============================
   i18n translations
   ============================ */
const TRANSLATIONS = {
  'zh-TW':{
    title:'ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢å·¥å…·', tagline:'æ”¯æ´åŠæ©‹ / Dr.eyeï¼Œä»¥åŠä¸€éµé–‹å•Ÿå…¨éƒ¨åˆ†é ', warning:'âš ï¸ é»æ“ŠæŒ‰éˆ•ç„¡åæ‡‰æ™‚ï¼Œç³»çµ±é€šçŸ¥æœƒé¡¯ç¤ºåŸå› è€Œéè·³è½‰æ–°é ã€‚',
    usage:'ğŸ¯ ä½¿ç”¨èªªæ˜', usage1:'æ¯è¡Œä¸€å€‹å–®å­—æˆ–è©èªï¼›å¯æŒ‰ã€Œä¸€éµæŸ¥è©¢ã€åŒæ™‚é–‹å•Ÿå¤šå€‹åˆ†é ï¼ˆç€è¦½å™¨æœƒå½ˆå‡ºåˆ†é ï¼‰ã€‚', usage2:'å³ä¸‹åœ°çƒå¯åˆ‡æ›ä»‹é¢èªè¨€ï¼ˆåˆ‡æ›å¾Œå…¨éƒ¨æ–‡å­—æœƒæ”¹è®Šï¼‰ã€‚', usage3:'æ¸¸æ¨™ç‚ºæ°´æ»´/é€é¡ï¼Œé è¿‘æŒ‰éˆ•æœƒå‡ºç¾å¸é™„èˆ‡æ‰­æ›²æ„Ÿã€‚',
    cambridge:'åŠæ©‹è©å…¸', dreye:'è­¯å…¸é€š (Dr.eye)', all:'ä¸€éµæŸ¥è©¢', demoNotify:'ç¤ºç¯„é€šçŸ¥',
    nowTime:'ç¾åœ¨æ™‚é–“', curLang:'ç•¶å‰èªè¨€', pomoTitle:'ç•ªèŒ„é˜ / å€’æ•¸è¨ˆæ™‚å™¨', pomoNote:'å¯è‡ªè¨‚æ™‚é–“ï¼Œæœ€çŸ­ 10 ç§’ï¼Œæœ€é•· 180 åˆ†é˜ï¼ˆæ¯æ ¼ 10 ç§’ï¼‰', start:'é–‹å§‹', pause:'æš«åœ', reset:'é‡è¨­',
    secLabel:'ç§’ï¼ˆ10 ç§’ç‚ºä¸€æ ¼ï¼‰', dragHint:'æ‹–æ›³åœ“ç’°å³å´åœ“é»å¯èª¿æ•´æ™‚é–“', pomoFooter:'æç¤ºï¼šè¨ˆæ™‚ä¸­å¯æš«åœèˆ‡é‡è¨­ï¼ŒçµæŸæ™‚ä»¥é€šçŸ¥ï¼ˆç•«é¢è·³å‡ºï¼‰æç¤ºã€‚',
    langTitle:'èªè¨€ / Language'
  },
  'en':{
    title:'ğŸ“š Batch Dictionary Lookup', tagline:'Supports Cambridge / Dr.eye and open all tabs at once', warning:'âš ï¸ If a button does not respond, a system notification will explain instead of navigating.',
    usage:'ğŸ¯ How to use', usage1:'One word or phrase per line. Click "Open All" to open multiple tabs.', usage2:'Use the globe at bottom-right to change the UI language.', usage3:'Cursor behaves like a droplet lens with attraction effects.',
    cambridge:'Cambridge', dreye:'Dr.eye', all:'Open All', demoNotify:'Demo Notification',
    nowTime:'Current time', curLang:'Language', pomoTitle:'Pomodoro / Timer', pomoNote:'Custom duration: min 10s, max 180min (10s step)', start:'Start', pause:'Pause', reset:'Reset',
    secLabel:'seconds (10s step)', dragHint:'Drag the knob on the ring to adjust time', pomoFooter:'Tip: You can pause/reset. A notification appears when finished.',
    langTitle:'Language'
  },
  'ja':{
    title:'ğŸ“š ãƒãƒƒãƒè¾æ›¸æ¤œç´¢ãƒ„ãƒ¼ãƒ«', tagline:'Cambridge / Dr.eye ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å…¨ã‚¿ãƒ–ã‚’ä¸€æ‹¬ã§é–‹ãã¾ã™', warning:'âš ï¸ ãƒœã‚¿ãƒ³ãŒåå¿œã—ãªã„å ´åˆã€ç”»é¢é€šçŸ¥ã§ç†ç”±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚',
    usage:'ğŸ¯ ä½¿ã„æ–¹', usage1:'1 è¡Œã« 1 å˜èªã¾ãŸã¯ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚å…¨ã¦é–‹ãã‚’æŠ¼ã™ã¨è¤‡æ•°ã‚¿ãƒ–ã‚’é–‹ãã¾ã™ã€‚', usage2:'å³ä¸‹ã®åœ°çƒãƒœã‚¿ãƒ³ã§è¨€èªã‚’å¤‰æ›´ã§ãã¾ã™ï¼ˆUI å…¨ä½“ãŒåˆ‡æ›¿ï¼‰ã€‚', usage3:'ã‚«ãƒ¼ã‚½ãƒ«ã¯æ°´æ»´ãƒ¬ãƒ³ã‚ºã®ã‚ˆã†ãªæŒ™å‹•ã‚’ã—ã¾ã™ã€‚',
    cambridge:'ã‚±ãƒ³ãƒ–ãƒªãƒƒã‚¸', dreye:'Dr.eye', all:'ä¸€æ‹¬é–‹ã', demoNotify:'é€šçŸ¥ã®ãƒ‡ãƒ¢',
    nowTime:'ç¾åœ¨ã®æ™‚åˆ»', curLang:'ç¾åœ¨ã®è¨€èª', pomoTitle:'ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ / ã‚¿ã‚¤ãƒãƒ¼', pomoNote:'10ç§’æœ€å°ã€180åˆ†æœ€å¤§ï¼ˆ10ç§’åˆ»ã¿ï¼‰', start:'é–‹å§‹', pause:'ä¸€æ™‚åœæ­¢', reset:'ãƒªã‚»ãƒƒãƒˆ',
    secLabel:'ç§’ï¼ˆ10ç§’åˆ»ã¿ï¼‰', dragHint:'ãƒªãƒ³ã‚°å³ã®ãƒãƒ–ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦æ™‚é–“ã‚’èª¿æ•´', pomoFooter:'çµ‚äº†æ™‚ã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚',
    langTitle:'è¨€èª'
  },
  'ko':{
    title:'ğŸ“š ì¼ê´„ ì‚¬ì „ ê²€ìƒ‰ ë„êµ¬', tagline:'Cambridge / Dr.eye ì§€ì›, ëª¨ë“  íƒ­ì„ í•œ ë²ˆì— ì—´ê¸°', warning:'âš ï¸ ë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ í™”ë©´ ì•Œë¦¼ìœ¼ë¡œ ì´ìœ ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤ã€‚',
    usage:'ğŸ¯ ì‚¬ìš© ë°©ë²•', usage1:'í•œ ì¤„ì— ë‹¨ì–´ ë˜ëŠ” êµ¬ë¬¸ í•˜ë‚˜. ëª¨ë‘ ì—´ê¸°ë¥¼ ëˆ„ë¥´ë©´ ì—¬ëŸ¬ íƒ­ì„ ì—½ë‹ˆë‹¤ã€‚', usage2:'ìš°ì¸¡ í•˜ë‹¨ ì§€êµ¬ ë²„íŠ¼ìœ¼ë¡œ UI ì–¸ì–´ë¥¼ ì „í™˜í•©ë‹ˆë‹¤ã€‚', usage3:'ì»¤ì„œëŠ” ë¬¼ë°©ìš¸ ë Œì¦ˆì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤ã€‚',
    cambridge:'ìº ë¸Œë¦¬ì§€', dreye:'Dr.eye', all:'ëª¨ë‘ ì—´ê¸°', demoNotify:'ì•Œë¦¼ ë°ëª¨',
    nowTime:'í˜„ì¬ ì‹œê°„', curLang:'í˜„ì¬ ì–¸ì–´', pomoTitle:'í¬ëª¨ë„ë¡œ / íƒ€ì´ë¨¸', pomoNote:'ìµœì†Œ 10ì´ˆ, ìµœëŒ€ 180ë¶„(10ì´ˆ ë‹¨ìœ„)', start:'ì‹œì‘', pause:'ì¼ì‹œì •ì§€', reset:'ë¦¬ì…‹',
    secLabel:'ì´ˆ(10ì´ˆ ë‹¨ìœ„)', dragHint:'ë§ ì˜¤ë¥¸ìª½ ë…¸ë¸Œë¥¼ ë“œë˜ê·¸í•´ ì‹œê°„ ì¡°ì ˆ', pomoFooter:'ì™„ë£Œ ì‹œ í™”ë©´ ì•Œë¦¼ì´ í‘œì‹œë©ë‹ˆë‹¤ã€‚',
    langTitle:'ì–¸ì–´'
  },
  'zh-CN':{
    title:'ğŸ“š åŒè¯å…¸æ‰¹é‡æŸ¥è¯¢å·¥å…·', tagline:'æ”¯æŒ Cambridge / Dr.eyeï¼Œä¸€é”®æ‰“å¼€å…¨éƒ¨æ ‡ç­¾é¡µ', warning:'âš ï¸ æŒ‰é’®æ— ååº”æ—¶ï¼Œç³»ç»Ÿé€šçŸ¥ä¼šè¯´æ˜åŸå› ä»£æ›¿è·³è½¬ã€‚',
    usage:'ğŸ¯ ä½¿ç”¨è¯´æ˜', usage1:'æ¯è¡Œä¸€ä¸ªå•è¯æˆ–çŸ­è¯­ï¼›å¯ç‚¹å‡»â€œä¸€é”®æŸ¥è¯¢â€åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µã€‚', usage2:'å³ä¸‹åœ°çƒå¯åˆ‡æ¢ç•Œé¢è¯­è¨€ï¼ˆåˆ‡æ¢åæ‰€æœ‰æ–‡å­—ä¼šå˜åŒ–ï¼‰ã€‚', usage3:'é¼ æ ‡ä¸ºæ°´æ»´é€é•œï¼Œé è¿‘æŒ‰é’®ä¼šæœ‰å¸é™„ä¸æ‰­æ›²æ•ˆæœã€‚',
    cambridge:'å‰‘æ¡¥è¯å…¸', dreye:'è¯‘å…¸é€š (Dr.eye)', all:'ä¸€é”®æŸ¥è¯¢', demoNotify:'é€šçŸ¥ç¤ºä¾‹',
    nowTime:'å½“å‰æ—¶é—´', curLang:'å½“å‰è¯­è¨€', pomoTitle:'ç•ªèŒ„é’Ÿ / å€’è®¡æ—¶', pomoNote:'å¯è‡ªå®šä¹‰æ—¶é—´ï¼Œæœ€çŸ­10ç§’ï¼Œæœ€é•¿180åˆ†é’Ÿï¼ˆ10ç§’æ­¥è¿›ï¼‰', start:'å¼€å§‹', pause:'æš‚åœ', reset:'é‡ç½®',
    secLabel:'ç§’ï¼ˆ10ç§’ä¸ºä¸€æ ¼ï¼‰', dragHint:'æ‹–åŠ¨åœ†ç¯å³ä¾§åœ†ç‚¹æ¥è°ƒæ•´æ—¶é—´', pomoFooter:'è®¡æ—¶ç»“æŸæ—¶ä¼šä»¥é€šçŸ¥æç¤ºã€‚',
    langTitle:'è¯­è¨€'
  },
  'fr':{
    title:'ğŸ“š Outil de recherche de dictionnaire par lot', tagline:'Prend en charge Cambridge / Dr.eye et ouvre tous les onglets', warning:'âš ï¸ Si un bouton ne rÃ©pond pas, une notification sâ€™affichera au lieu de naviguerã€‚',
    usage:'ğŸ¯ Mode dâ€™emploi', usage1:'Un mot ou une phrase par ligne. Cliquer sur "Ouvrir tout" pour ouvrir plusieurs ongletsã€‚', usage2:'Utilisez la planÃ¨te en bas Ã  droite pour changer la langue de lâ€™interfaceã€‚', usage3:'Le curseur se comporte comme une lentille goutte dâ€™eau avec effets dâ€™attractionã€‚',
    cambridge:'Cambridge', dreye:'Dr.eye', all:'Tout ouvrir', demoNotify:'DÃ©mo notification',
    nowTime:'Heure actuelle', curLang:'Langue', pomoTitle:'Pomodoro / Minuteur', pomoNote:'Personnalisez la durÃ©e: min 10s, max 180min (pas de 10s)', start:'DÃ©marrer', pause:'Pause', reset:'RÃ©initialiser',
    secLabel:'secondes (pas 10s)', dragHint:'Faites glisser le bouton sur lâ€™anneau pour rÃ©gler le temps', pomoFooter:'Astuce: vous pouvez mettre en pause/rÃ©initialiser. Une notification sâ€™affiche Ã  la finã€‚',
    langTitle:'Langue'
  }
};

let currentLang = 'zh-TW';
function applyTranslations(code){
  const dict = TRANSLATIONS[code] || TRANSLATIONS['zh-TW'];
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.getAttribute('data-i18n');
    if (dict[key]) el.textContent = dict[key];
  });
}
applyTranslations(currentLang);

/* ============================
   Toast helper (replaces alert)
   ============================ */
function showToast(text, ms = 2800){
  const t = document.getElementById('toast');
  t.style.display = 'flex';
  t.textContent = text;
  clearTimeout(t._t);
  t._t = setTimeout(()=>{ t.style.display = 'none'; }, ms);
}

/* ============================
   Theme toggle
   ============================ */
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', ()=>{
  const body = document.body;
  if (body.getAttribute('data-theme') === 'dark') {
    body.removeAttribute('data-theme');
    themeToggle.textContent = 'ğŸŒ™';
  } else {
    body.setAttribute('data-theme','dark');
    themeToggle.textContent = 'â˜€ï¸';
  }
});

/* ============================
   Dictionary logic (open pages; uses toast instead of alert)
   ============================ */
const DICTIONARY_TEMPLATES = [
  "https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/",
  "https://yun.dreye.com/dict_new/dict.php?w="
];
const BASE_DELAY = 300;

function openDictionaries(dictionaryIndex, isBatchMode = false) {
  const wordInput = document.getElementById('wordInput');
  const inputContent = wordInput.value.trim();
  if (!inputContent) { showToast(TRANSLATIONS[currentLang].warning); return; }
  const wordsToSearch = inputContent.split('\n').map(s=>s.trim()).filter(Boolean);
  if (wordsToSearch.length === 0) { showToast(TRANSLATIONS[currentLang].warning); return; }
  if (!isBatchMode) { wordInput.value = ''; wordInput.focus(); }

  let totalDelay = 0;
  const targetTemplate = DICTIONARY_TEMPLATES[dictionaryIndex];

  wordsToSearch.forEach((word, index) => {
    totalDelay += BASE_DELAY;
    setTimeout(() => {
      let finalUrl = "";
      if (dictionaryIndex === 0) {
        const cambridgeWordFormatted = word.toLowerCase().replace(/\s/g, '-');
        finalUrl = targetTemplate + cambridgeWordFormatted;
      } else {
        const dreyeWord = word.replace(/\s/g, '+');
        finalUrl = targetTemplate + dreyeWord + "&hidden_codepage=01";
      }
      try { window.open(finalUrl, '_blank'); } catch(e) { console.warn('popup blocked', e); }
      if (!isBatchMode && index === wordsToSearch.length - 1) {
        setTimeout(()=> showToast('å·²å˜—è©¦é–‹å•Ÿå­—å…¸åˆ†é ', 1200), 800);
      }
    }, totalDelay);
  });

  return totalDelay;
}

document.getElementById('cambridgeButton').addEventListener('click', ()=> openDictionaries(0));
document.getElementById('dreyeButton').addEventListener('click', ()=> openDictionaries(1));
document.getElementById('allButton').addEventListener('click', ()=>{
  const cambridgeDelay = openDictionaries(0, true);
  setTimeout(()=>{ openDictionaries(1, true); showToast('å·²å˜—è©¦é–‹å•Ÿæ‰€æœ‰å­—å…¸åˆ†é ', 1000); }, cambridgeDelay + 120);
});
document.getElementById('openNotify').addEventListener('click', ()=> showToast('é€™æ˜¯ä¸€å€‹ç³»çµ±é€šçŸ¥ç¤ºç¯„ã€‚', 1800));

/* ============================
   Language menu behavior
   ============================ */
const langToggle = document.getElementById('languageToggle');
const langMenu = document.getElementById('languageMenu');
const currentLangLabel = document.getElementById('currentLang');
const displayLang = document.getElementById('displayLang');

langToggle.addEventListener('click', ()=>{
  if (langMenu.style.display === 'flex') { langMenu.style.display = 'none'; langMenu.setAttribute('aria-hidden','true'); }
  else { langMenu.style.display = 'flex'; langMenu.setAttribute('aria-hidden','false'); }
});

document.querySelectorAll('#languageMenu .lang-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const code = btn.getAttribute('data-lang');
    currentLang = code;
    currentLangLabel.textContent = btn.textContent;
    displayLang.textContent = code;
    langMenu.style.display = 'none';
    applyTranslations(code);
    showToast('å·²åˆ‡æ›èªè¨€ï¼š' + btn.textContent, 1200);
  });
});
document.addEventListener('click', (e)=>{ if (!langMenu.contains(e.target) && !langToggle.contains(e.target)) langMenu.style.display='none'; });

/* ============================
   Clock
   ============================ */
function pad(n){ return String(n).padStart(2,'0'); }
function updateClock(){
  const now = new Date();
  const s = pad(now.getHours()) + ':' + pad(now.getMinutes()) + ':' + pad(now.getSeconds());
  document.getElementById('currentTime').textContent = s;
}
setInterval(updateClock, 1000); updateClock();

/* ============================
   Custom cursor & proximity interactions
   ============================ */
const cursor = document.getElementById('customCursor');
const lens = cursor.querySelector('.cursor-lens');
const inner = cursor.querySelector('.cursor-inner');

let mouseX = window.innerWidth/2, mouseY = window.innerHeight/2;
function moveCursor(x,y){ mouseX=x; mouseY=y; cursor.style.left = x + 'px'; cursor.style.top = y + 'px'; }

const interactiveEls = document.querySelectorAll('.interactive');

document.addEventListener('mousemove', (e)=>{
  moveCursor(e.clientX, e.clientY);

  // find nearest interactive element
  let nearest = null, minDist = Infinity;
  interactiveEls.forEach(el=>{
    const rect = el.getBoundingClientRect();
    const center = { x: rect.left + rect.width/2, y: rect.top + rect.height/2 };
    const d = Math.hypot(e.clientX - center.x, e.clientY - center.y);
    if (d < minDist) { minDist = d; nearest = { el, rect, center, d }; }
  });

  // reset defaults
  cursor.classList.remove('big');
  inner.textContent = 'â—‹';
  lens.style.opacity = '1';
  interactiveEls.forEach(el => { el.style.transform = ''; el.style.filter = ''; el.querySelectorAll('.text-warp').forEach(t=> t.style.transform = ''); });

  // apply attraction if close
  if (nearest && minDist < 220) {
    cursor.classList.add('big'); inner.textContent = 'â—';
    const force = Math.max(0, 1 - (minDist / 220));
    const el = nearest.el;
    const vecX = (nearest.center.x - e.clientX);
    const vecY = (nearest.center.y - e.clientY);
    const tx = -vecX * 0.06 * force;
    const ty = -vecY * 0.06 * force;
    const rot = ((vecX / nearest.rect.width) * 8 * force).toFixed(2);
    el.style.transform = `translate(${tx}px, ${ty}px) rotate(${rot}deg) scale(${1 + 0.06*force})`;
    el.style.filter = `brightness(${1 - 0.1*force}) saturate(${1 + 0.12*force})`;
    el.querySelectorAll('.text-warp').forEach(t=>{
      const wob = (Math.sin((e.clientX + e.clientY)/40) * 6 * force).toFixed(2);
      t.style.transform = `skewX(${wob}deg) translateY(${(6*force).toFixed(1)}px)`;
    });
    lens.style.transform = `scale(${1 + 0.22*force}) translate(${(-vecX*0.002*force).toFixed(2)}px, ${(-vecY*0.002*force).toFixed(2)}px)`;
  }
});

// hide native cursor
document.documentElement.style.cursor = 'none';
document.addEventListener('mousedown', ()=>{ cursor.style.transform = 'translate(-50%,-50%) scale(.95)'; });
document.addEventListener('mouseup', ()=>{ cursor.style.transform = 'translate(-50%,-50%) scale(1)'; });

/* ============================
   Pomodoro (dual-color ring) and controls
   ============================ */
const progress = document.getElementById('progress');
const timeRemainingLabel = document.getElementById('timeRemaining');
const durationInput = document.getElementById('durationInput');
const setDurationLabel = document.getElementById('setDurationLabel');
const handle = document.getElementById('pomoHandle');

let totalSeconds = parseInt(durationInput.value,10) || 1800;
if (totalSeconds < 10) totalSeconds = 10;
if (totalSeconds > 10800) totalSeconds = 10800;
durationInput.value = totalSeconds;
let remaining = totalSeconds;
let timerInterval = null;
let isRunning = false;

function secToClock(s){
  const mm = Math.floor(s/60);
  const ss = s % 60;
  return (mm<10?'0'+mm:mm)+':' + (ss<10?'0'+ss:ss);
}

function updateProgress(){
  const circumference = 2 * Math.PI * 40; // r=40
  const pct = (remaining / totalSeconds);
  const dash = circumference * pct;
  progress.style.strokeDashoffset = (circumference - dash).toFixed(2);
  timeRemainingLabel.textContent = secToClock(remaining);
}

(function initStroke(){
  const circumference = 2 * Math.PI * 40;
  progress.style.strokeDasharray = circumference.toFixed(2);
  progress.style.strokeDashoffset = circumference.toFixed(2);
})();

document.getElementById('startPomo').addEventListener('click', ()=>{
  if (isRunning) return;
  if (remaining <= 0) remaining = totalSeconds;
  isRunning = true;
  timerInterval = setInterval(()=>{
    if (remaining > 0) {
      remaining--;
      updateProgress();
    } else {
      clearInterval(timerInterval);
      isRunning = false;
      showToast('â° è¨ˆæ™‚çµæŸï¼', 3800);
      progress.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}], {duration:900, easing:'ease-out'});
    }
  }, 1000);
});

document.getElementById('pausePomo').addEventListener('click', ()=>{
  if (!isRunning) return;
  clearInterval(timerInterval);
  isRunning = false;
  showToast('å·²æš«åœè¨ˆæ™‚', 1500);
});

document.getElementById('resetPomo').addEventListener('click', ()=>{
  clearInterval(timerInterval);
  isRunning = false;
  remaining = totalSeconds;
  updateProgress();
  showToast('å·²é‡è¨­', 1200);
});

document.getElementById('incTen').addEventListener('click', ()=>{
  totalSeconds = Math.min(10800, totalSeconds + 10);
  durationInput.value = totalSeconds;
  remaining = totalSeconds;
  updateDurationLabel(); updateProgress();
});
document.getElementById('decTen').addEventListener('click', ()=>{
  totalSeconds = Math.max(10, totalSeconds - 10);
  durationInput.value = totalSeconds;
  remaining = totalSeconds;
  updateDurationLabel(); updateProgress();
});

durationInput.addEventListener('change', ()=>{
  let v = parseInt(durationInput.value,10) || 10;
  if (v < 10) v = 10; if (v > 10800) v = 10800;
  v = Math.round(v / 10) * 10;
  totalSeconds = v; remaining = totalSeconds;
  durationInput.value = totalSeconds;
  updateDurationLabel(); updateProgress();
});

function updateDurationLabel(){
  const mm = Math.floor(totalSeconds/60);
  const ss = totalSeconds%60;
  setDurationLabel.textContent = `${mm}:${ss.toString().padStart(2,'0')}`;
}

// dragging the handle
const ringBox = document.querySelector('.pomo-ring');
let dragging = false;
handle.addEventListener('mousedown', (ev)=>{
  ev.preventDefault(); dragging = true; handle.style.cursor='grabbing';
});
document.addEventListener('mouseup', ()=>{ dragging=false; handle.style.cursor='grab'; });
document.addEventListener('mousemove', (ev)=>{
  if (!dragging) return;
  const rect = ringBox.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  const angle = Math.atan2(ev.clientY - cy, ev.clientX - cx);
  let frac = (angle + Math.PI/2) / (2*Math.PI);
  if (frac < 0) frac += 1;
  let seconds = Math.round((frac * 10800) / 10) * 10;
  if (seconds < 10) seconds = 10;
  totalSeconds = seconds;
  remaining = totalSeconds;
  durationInput.value = totalSeconds;
  updateDurationLabel(); updateProgress();
  const r = rect.width/2 * 0.9;
  const hx = cx + Math.cos(angle) * r;
  const hy = cy + Math.sin(angle) * r;
  handle.style.left = ( (hx - rect.left) / rect.width * 100 ) + '%';
  handle.style.top = ( (hy - rect.top) / rect.height * 100 ) + '%';
});

// initial
remaining = totalSeconds;
updateProgress();

/* ============================
   Small polish: make button labels warp-ready
   ============================ */
document.querySelectorAll('.search-button').forEach(btn=>{
  const span = document.createElement('span'); span.className='text-warp';
  span.innerHTML = btn.innerHTML;
  btn.innerHTML = '';
  btn.appendChild(span);
});

/* ============================
   Keyboard shortcut for start/pause
   ============================ */
document.addEventListener('keydown', (e)=>{
  if (e.code === 'Space') {
    e.preventDefault();
    if (isRunning) document.getElementById('pausePomo').click();
    else document.getElementById('startPomo').click();
  }
});

/* ============================
   Hide cursor when unfocused
   ============================ */
window.addEventListener('blur', ()=>{ cursor.style.display='none'; });
window.addEventListener('focus', ()=>{ cursor.style.display='block'; });

/* ============================
   Final loaded toast
   ============================ */
showToast('å·²è¼‰å…¥ï¼šLiquid Glass æœ€å®Œæ•´ç‰ˆä»‹é¢', 1400);

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Liquid Glass æœ€å®Œæ•´ç‰ˆ â€” é›™å­—å…¸ + å…­èª + æ°´æ»´æ¸¸æ¨™ + ç•ªèŒ„é˜</title>

<style>
/* =======================
Â  Â Design tokens
Â  Â ======================= */
:root{
Â  /* æ·ºè‰²æ¨¡å¼ (Light Mode) */
Â  --bg-gradient: linear-gradient(135deg,#fdfbfb 0%,#ebedee 100%);
Â  --text-color:#222;
Â  --glass-bg: rgba(255,255,255,0.75); /* æ›´ä¸é€æ˜ä¸€é» */
Â  --glass-border: rgba(255,255,255,0.9);
Â  --glass-shadow: 0 8px 32px rgba(100,100,111,0.1);
Â  --accent-1: #00bcd4; /* é’è‰² */
Â  --accent-2: #9b59b6; /* ç´«è‰² */
Â  --accent-3: #2ecc71; /* ç¶ è‰² */
Â  --btn-text: #1f2a2b; /* æŒ‰éˆ•æ–‡å­—ï¼šæ·±è‰² */
Â  --cursor-size: 48px;
Â  --cursor-inner: 32px;
Â  --ring-radius: 40;
Â  --ring-circumference: 251.2;
}

/* 5. æ·±è‰²æ¨¡å¼æ–‡å­—é¡è‰²ä¿®å¾©èˆ‡èª¿æ•´ */
[data-theme="dark"]{
Â  /* æ·±è‰²æ¨¡å¼ (Dark Mode) */
Â  --bg-gradient: linear-gradient(135deg,#0f0c29,#302b63,#24243e);
Â  --text-color:#e0f7fa; /* æ·ºè‰²ç³»æ–‡å­—ï¼Œç¢ºä¿æ¸…æ™° */
Â  --glass-bg: rgba(255,255,255,0.06);
Â  --glass-border: rgba(255,255,255,0.18);
Â  --glass-shadow: 0 8px 32px rgba(0,0,0,0.6);
Â  /* 3. æ™‚é–“ç’°é¡è‰²ä¿®å¾©ï¼šä½¿ç”¨éœ“è™¹äº®è‰²ç³» */
Â  --accent-1:#00d2ff; /* äº®é’è‰² */
Â  --accent-2:#d580ff; /* äº®ç´«è‰² */
Â  --accent-3:#00ff88; /* äº®ç¶ è‰² */
Â  --btn-text: #e0f7fa; /* æŒ‰éˆ•æ–‡å­—ï¼šæ·ºè‰² */
}

/* =======================
Â  Â Layout & base styles
Â  Â ======================= */
*{box-sizing:border-box}
/* 4. å­—é«”èˆ‡åŸºç¤æ¨£å¼èª¿æ•´ */
html,body{height:100%;margin:0;font-family: "Noto Sans TC","Segoe UI",system-ui,-apple-system,Arial;background:var(--bg-gradient);color:var(--text-color);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
body{display:flex;align-items:flex-start;justify-content:center;padding:32px;transition:background .45s ease,color .45s ease;}

/* page container */
.container{ width:100%; max-width:1200px; display:grid; grid-template-columns: 1fr 420px; gap:28px; align-items:start; }

/* glass card */
.card{
Â  padding:28px;border-radius:20px; /* ç¨å¾®å¤§ä¸€é»çš„åœ“è§’å’Œå…§é‚Šè· */
Â  background: var(--glass-bg); /* ç°¡åŒ–èƒŒæ™¯ç‚ºå–®ä¸€è®Šæ•¸ */
Â  backdrop-filter: blur(18px) saturate(140%); -webkit-backdrop-filter: blur(18px) saturate(140%);
Â  border:1px solid var(--glass-border); box-shadow:var(--glass-shadow);
Â  transition: all 0.4s ease; /* è®“æ·±æ·ºæ¨¡å¼åˆ‡æ›æ›´é †æ»‘ */
}

/* header */
.header{display:flex;align-items:center;justify-content:space-between;gap:12px; margin-bottom: 20px;}
.header h1{margin:0;font-weight:700;letter-spacing:1px}
/* 4. å°å­—é«”èª¿æ•´ */
.small{font-size:14px; color:var(--text-color); opacity:0.65;}
[data-theme="dark"] .small{opacity:0.6;}

/* textarea */
#wordInput{width:100%;min-height:180px;padding:16px;border-radius:12px;resize:vertical;font-size:16px;border:1px solid var(--glass-border);background:var(--glass-bg);color:var(--text-color);outline:none;box-shadow:inset 0 6px 12px rgba(0,0,0,0.04)}

/* buttons */
.button-group{margin-top:14px;display:flex;gap:14px;align-items:center;flex-wrap:wrap}
/* 2. æŒ‰éˆ•æµ®é›•æ„Ÿèª¿æ•´ (Liquid Glass Embossing) */
.search-button{
Â  padding:12px 22px; /* ç¨å¾®å¤§ä¸€é» */
Â  border-radius:999px;
Â  cursor:pointer;
Â  border:none; /* ç§»é™¤èˆŠé‚Šæ¡† */
Â  color:var(--btn-text);
Â  font-weight:700;
Â  transition:transform .28s cubic-bezier(.2,.9,.3,1.2),box-shadow .28s, color .45s;
Â  
Â  /* å‰µå»ºæµ®é›•æ•ˆæœ */
Â  background: var(--glass-bg);
Â  box-shadow: 
Â  Â  /* å¤–å±¤æŸ”å’Œç™¼å…‰ (Outset) */
Â  Â  0 4px 10px rgba(0,0,0,0.06), 
Â  Â  /* å…§å±¤åå…‰ (Inset) */
Â  Â  inset 0 2px 4px rgba(255,255,255,0.2),
Â  Â  inset 0 -2px 4px rgba(0,0,0,0.05); 
}
[data-theme="dark"] .search-button {
Â  color:var(--btn-text);
Â  box-shadow:
Â  Â  0 4px 12px rgba(0,0,0,0.5), /* æ·±è‰²æ¨¡å¼æ›´å¼·çš„é™°å½± */
Â  Â  inset 0 2px 4px rgba(255,255,255,0.05),
Â  Â  inset 0 -2px 4px rgba(0,0,0,0.5);
}

.search-button:hover{transform:translateY(-6px) scale(1.02); box-shadow: var(--glass-shadow); }

#allButton{width:64px;height:64px;font-size:22px;padding:0;border-radius:50%;display:flex;align-items:center;justify-content:center}
.search-button .text-warp{font-size:16px;} /* ç¢ºä¿æŒ‰éˆ•æ–‡å­—å¤§å°ä¸€è‡´ */

/* templates area */
.templates{margin-top:18px;font-size:14px;}

/* right column */
.right{display:flex;flex-direction:column;gap:18px}
.clock-card{padding:20px; border-radius:16px;}
#currentTime{font-size:24px;font-weight:800}

/* pomo */
.pomo-card{padding:20px; border-radius:16px;}
.pomo-ring{width:220px;height:220px;display:grid;place-items:center;position:relative}
svg.pomo-svg{width:100%;height:100%;transform:rotate(-90deg)}
.pomo-center{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
.time-label{font-weight:800;font-size:24px} /* èª¿æ•´å­—é«”å¤§å° */
.controls-small{font-size:14px; opacity:0.8;}
.handle{position:absolute;width:20px;height:20px;border-radius:50%;background:var(--glass-bg);border:2px solid var(--glass-border);transform:translate(-50%,-50%);cursor:grab;box-shadow:0 8px 20px rgba(0,0,0,0.12)}

/* language toggle (floating) */
#languageToggle{position:fixed;right:22px;bottom:22px;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;background:var(--glass-bg);border:1px solid var(--glass-border);cursor:pointer;box-shadow:var(--glass-shadow);z-index:220;transition:transform .25s}
#languageToggle:hover{transform:scale(1.08) rotate(12deg)}
#languageMenu{position:fixed;right:22px;bottom:100px;width:250px;padding:12px;border-radius:16px;display:none;flex-direction:column;gap:8px;z-index:210;
Â  /* ç°¡åŒ–èƒŒæ™¯ä½¿ç”¨è®Šæ•¸ */
Â  background: var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter: blur(18px) saturate(140%);-webkit-backdrop-filter: blur(18px) saturate(140%);
Â  animation:menuPop .38s cubic-bezier(.31,1.6,.37,1.27);
Â  box-shadow:var(--glass-shadow); /* å¢åŠ é™°å½± */
}
@keyframes menuPop{0%{transform:translateY(14px) scale(.86);opacity:0}70%{transform:translateY(-4px) scale(1.03);opacity:1}100%{transform:translateY(0) scale(1)}}
.lang-btn{padding:10px;border-radius:12px;text-align:center;cursor:pointer;
Â  background: rgba(255,255,255,0.05); /* è¼•å¾®èƒŒæ™¯è‰² */
Â  border:1px solid rgba(255,255,255,0.08);transition: transform .22s, box-shadow .22s;font-weight:700;
Â  box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); /* è¼•å¾®å…§é™°å½± */
}
.lang-btn:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 8px 20px rgba(0,0,0,0.12)}
#currentLang{font-size:14px;opacity:0.9; font-weight: 500;}

/* toast */
#toast{position:fixed;left:50%;top:18px;transform:translateX(-50%);z-index:950;min-width:240px;max-width:520px;padding:12px 18px;border-radius:12px;display:none;align-items:center;gap:12px;
Â  /* ç°¡åŒ–èƒŒæ™¯ä½¿ç”¨è®Šæ•¸ */
Â  background: var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:blur(12px) saturate(160%);
Â  box-shadow:var(--glass-shadow);font-weight:700}

/* 1. custom cursor (liquid glass droplet) ä¿®å¾©é€æ˜åº¦å’Œé»‘é» */
#customCursor{
Â  position:fixed;left:0;top:0;pointer-events:none;z-index:999;
Â  width:var(--cursor-size);height:var(--cursor-size);
Â  display:flex;align-items:center;justify-content:center;
Â  transform:translate(-50%,-50%) scale(1);
Â  transition:transform .12s linear;
Â  will-change:transform,left,top;
}
.cursor-lens{
Â  width:100%;height:100%;border-radius:50%;
Â  /* å¤§å¹…å¢åŠ é€æ˜åº¦ï¼Œç§»é™¤é»‘é» */
Â  background: radial-gradient(circle at 35% 30%, rgba(255,255,255,0.4), rgba(255,255,255,0.1) 18%, rgba(255,255,255,0.02) 40%, transparent 55%);
Â  border: 1px solid rgba(255,255,255,0.2);
Â  /* ç§»é™¤å¤–éƒ¨å¼·çƒˆé™°å½± */
Â  box-shadow: inset 0 6px 14px rgba(255,255,255,0.06); 
Â  backdrop-filter: blur(10px) saturate(140%);-webkit-backdrop-filter: blur(10px) saturate(140%);
Â  display:flex;align-items:center;justify-content:center;
Â  transition:width .12s ease,height .12s ease,box-shadow .12s ease; /* ç§»é™¤ transform é¿å…è®Šå½¢ */
}
.cursor-inner{
Â  width:var(--cursor-inner);height:var(--cursor-inner);border-radius:50%;
Â  background: linear-gradient(145deg, rgba(255,255,255,0.92), rgba(255,255,255,0.06));
Â  box-shadow: inset 0 -4px 10px rgba(0,0,0,0.08), 0 4px 10px rgba(0,0,0,0.1);
Â  transform:translateY(-2px); /* è¼•å¾®èª¿æ•´ */
Â  display:flex;align-items:center;justify-content:center;font-weight:800;
Â  color:var(--text-color);opacity:0.92;
Â  transition: transform .08s; /* ä¿æŒ transform éæ¸¡ */
}
.refraction{
Â  position:absolute;left:0;top:0;width:100%;height:100%;border-radius:50%;
Â  background: radial-gradient(circle at 40% 35%, rgba(255,255,255,0.28), rgba(255,255,255,0.02) 25%, transparent 40%);
Â  mix-blend-mode:overlay;pointer-events:none;opacity:.8;
Â  transform:translateZ(0);
}
/* 1. é˜»æ­¢æ¸¸æ¨™åœ¨ interactive ç‹€æ…‹ä¸‹è®Šå½¢ */
#customCursor.big .cursor-lens{
Â  transform:scale(1.1); /* è¼•å¾®æ”¾å¤§ï¼Œä½†ä¿æŒåœ“å½¢ */
Â  width:100%;height:100%; /* é˜»æ­¢å¯¬é«˜è®ŠåŒ– */
Â  box-shadow: 0 14px 30px rgba(0,0,0,0.18), inset 0 6px 14px rgba(255,255,255,0.06); /* ç¨å¾®å¼·ä¸€é»çš„å¤–éƒ¨é™°å½± */
}

/* interaction */
.interactive{transition:transform .22s cubic-bezier(.2,.9,.3,1.2), filter .22s;will-change:transform,filter}
.text-warp{display:inline-block;transition:transform .18s linear}

/* handle small screens */
@media (max-width:1000px){
Â  .container{grid-template-columns:1fr;padding-bottom:120px}
Â  #languageMenu{right:12px;bottom:92px}
}
</style>
</head>
<body>

<div id="toast" class="card" role="status" aria-live="polite"></div>

<div id="customCursor" aria-hidden="true">
Â  <div class="cursor-lens">
Â  Â  <div class="cursor-inner">â—‹</div>
Â  Â  <div class="refraction"></div>
Â  </div>
</div>

<button id="languageToggle" title="åˆ‡æ›èªè¨€">ğŸŒ</button>
<div id="languageMenu" class="card" aria-hidden="true">
Â  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
Â  Â  <div style="font-weight:800" data-i18n="langTitle">èªè¨€ / Language</div>
Â  Â  <div id="currentLang" class="small">ç¹é«”ä¸­æ–‡</div>
Â  </div>
Â  <div class="lang-btn" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</div>
Â  <div class="lang-btn" data-lang="en">English</div>
Â  <div class="lang-btn" data-lang="ja">æ—¥æœ¬èª</div>
Â  <div class="lang-btn" data-lang="ko">í•œêµ­ì–´</div>
Â  <div class="lang-btn" data-lang="zh-CN">ç®€ä½“ä¸­æ–‡</div>
Â  <div class="lang-btn" data-lang="fr">FranÃ§ais</div>
</div>

<div class="container" role="main">

Â  Â  <div class="card">
Â  Â  <div class="header">
Â  Â  Â  <div>
Â  Â  Â  Â  <h1 data-i18n="title">ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢å·¥å…·</h1>
Â  Â  Â  Â  <div class="small" id="tagline" data-i18n="tagline">æ”¯æ´åŠæ©‹ / Dr.eyeï¼Œä»¥åŠä¸€éµé–‹å•Ÿå…¨éƒ¨åˆ†é </div>
Â  Â  Â  </div>
Â  Â  Â  <div>
Â  Â  Â  Â  <button id="themeToggle" class="search-button interactive" title="åˆ‡æ›æ·±æ·ºè‰²">ğŸŒ™</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <p class="small warning-text" data-i18n="warning">âš ï¸ é»æ“ŠæŒ‰éˆ•ç„¡åæ‡‰æ™‚ï¼Œç³»çµ±é€šçŸ¥æœƒé¡¯ç¤ºåŸå› è€Œéè·³è½‰æ–°é ã€‚</p>

Â  Â  <textarea id="wordInput" rows="8" placeholder="è«‹è¼¸å…¥å–®å­—ï¼è©èªï¼Œå»ºè­°ä¸€è¡Œä¸€å€‹ã€‚ä¾‹å¦‚ï¼š
paradigm
subsume
tacit"></textarea>

Â  Â  <div class="button-group" style="margin-top:16px;">
Â  Â  Â  <button id="cambridgeButton" class="search-button interactive" data-i18n="cambridge">åŠæ©‹è©å…¸</button>
Â  Â  Â  <button id="dreyeButton" class="search-button interactive" data-i18n="dreye">è­¯å…¸é€š (Dr.eye)</button>
Â  Â  Â  <button id="allButton" class="search-button interactive" data-i18n="all">ğŸŸ£</button>
Â  Â  Â  <button id="openNotify" class="search-button interactive" data-i18n="demoNotify">ç¤ºç¯„é€šçŸ¥</button>
Â  Â  </div>

Â  Â  <div class="templates small" style="margin-top:20px;">
Â  Â  Â  <h3 style="margin:0 0 10px 0" data-i18n="usage">ğŸ¯ ä½¿ç”¨èªªæ˜</h3>
Â  Â  Â  <ul>
Â  Â  Â  Â  <li data-i18n="usage1">æ¯è¡Œä¸€å€‹å–®å­—æˆ–è©èªï¼›å¯æŒ‰ã€Œä¸€éµæŸ¥è©¢ã€åŒæ™‚é–‹å•Ÿå¤šå€‹åˆ†é ï¼ˆç€è¦½å™¨æœƒå½ˆå‡ºåˆ†é ï¼‰ã€‚</li>
Â  Â  Â  Â  <li data-i18n="usage2">å³ä¸‹åœ°çƒå¯åˆ‡æ›ä»‹é¢èªè¨€ï¼ˆåˆ‡æ›å¾Œå…¨éƒ¨æ–‡å­—æœƒæ”¹è®Šï¼‰ã€‚</li>
Â  Â  Â  Â  <li data-i18n="usage3">æ¸¸æ¨™ç‚ºæ°´æ»´/é€é¡ï¼Œé è¿‘æŒ‰éˆ•æœƒå‡ºç¾å¸é™„èˆ‡æ‰­æ›²æ„Ÿã€‚</li>
Â  Â  Â  </ul>
Â  Â  </div>
Â  </div>

Â  Â  <div class="right">

Â  Â  <div class="clock-card card">
Â  Â  Â  <div style="display:flex;align-items:center;justify-content:space-between;width:100%">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <div class="small" data-i18n="nowTime">ç¾åœ¨æ™‚é–“</div>
Â  Â  Â  Â  Â  <div id="currentTime">--:--:--</div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="text-align:right">
Â  Â  Â  Â  Â  <div class="small" data-i18n="curLang">ç•¶å‰èªè¨€</div>
Â  Â  Â  Â  Â  <div id="displayLang" style="font-weight:800">zh-TW</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div style="margin-top:12px" class="small" data-i18n="timeNote">ï¼ˆæ™‚é–“æœƒè‡ªå‹•æ›´æ–°ï¼‰</div>
Â  Â  </div>

Â  Â  <div class="pomo-card card">
Â  Â  Â  <div style="display:flex;align-items:center;justify-content:space-between">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <div style="font-weight:800" data-i18n="pomoTitle">ç•ªèŒ„é˜ / å€’æ•¸è¨ˆæ™‚å™¨</div>
Â  Â  Â  Â  Â  <div class="small" data-i18n="pomoNote">å¯è‡ªè¨‚æ™‚é–“ï¼Œæœ€çŸ­ 10 ç§’ï¼Œæœ€é•· 180 åˆ†é˜ï¼ˆæ¯æ ¼ 10 ç§’ï¼‰</div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="button-group" style="margin:0; gap: 8px;">
Â  Â  Â  Â  Â  <button id="startPomo" class="search-button interactive" data-i18n="start">Start</button>
Â  Â  Â  Â  Â  <button id="pausePomo" class="search-button interactive" data-i18n="pause">Pause</button>
Â  Â  Â  Â  Â  <button id="resetPomo" class="search-button interactive" data-i18n="reset">Reset</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div style="display:flex;gap:12px;align-items:center;margin-top:14px">
Â  Â  Â  Â  <div class="pomo-ring" aria-hidden="true">
Â  Â  Â  Â  Â  <svg class="pomo-svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
Â  Â  Â  Â  Â  Â  <defs>
Â  Â  Â  Â  Â  Â  Â  <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
Â  Â  Â  Â  Â  Â  Â  Â  <stop offset="0%" stop-color="var(--accent-1)"/>
Â  Â  Â  Â  Â  Â  Â  Â  <stop offset="50%" stop-color="var(--accent-2)"/>
Â  Â  Â  Â  Â  Â  Â  Â  <stop offset="100%" stop-color="var(--accent-3)"/>
Â  Â  Â  Â  Â  Â  Â  </linearGradient>
Â  Â  Â  Â  Â  Â  </defs>
Â  Â  Â  Â  Â  Â  <circle cx="50" cy="50" r="40" stroke="rgba(200,200,200,0.18)" stroke-width="8" fill="none"></circle>
Â  Â  Â  Â  Â  Â  <circle id="progress" cx="50" cy="50" r="40" stroke="url(#grad)" stroke-width="8" fill="none" stroke-linecap="round"
Â  Â  Â  Â  Â  Â  Â  stroke-dasharray="251.2" stroke-dashoffset="251.2"></circle>
Â  Â  Â  Â  Â  </svg>

Â  Â  Â  Â  Â  <div class="pomo-center">
Â  Â  Â  Â  Â  Â  <div id="timeRemaining" class="time-label">00:00</div>
Â  Â  Â  Â  Â  Â  <div class="controls-small">æ™‚é•·ï¼š<span id="setDurationLabel">00:30</span></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="pomoHandle" class="handle" style="left:100%;top:50%">â‡†</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;align-items:center">
Â  Â  Â  Â  Â  Â  <input id="durationInput" type="number" min="10" max="10800" step="10" value="1800" style="width:120px;padding:8px;border-radius:8px;border:1px solid var(--glass-border);background:var(--glass-bg)">
Â  Â  Â  Â  Â  Â  <div class="small" data-i18n="secLabel">ç§’ï¼ˆ10 ç§’ç‚ºä¸€æ ¼ï¼‰</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="pomo-controls" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  <button id="decTen" class="search-button interactive" title="æ¸› 10 ç§’">-10s</button>
Â  Â  Â  Â  Â  Â  <button id="incTen" class="search-button interactive" title="åŠ  10 ç§’">+10s</button>
Â  Â  Â  Â  Â  Â  <div class="footnote small" data-i18n="dragHint">æ‹–æ›³åœ“ç’°å³å´åœ“é»å¯èª¿æ•´æ™‚é–“</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div style="margin-top:12px" class="small" data-i18n="pomoFooter">æç¤ºï¼šè¨ˆæ™‚ä¸­å¯æš«åœèˆ‡é‡è¨­ï¼ŒçµæŸæ™‚ä»¥é€šçŸ¥ï¼ˆç•«é¢è·³å‡ºï¼‰æç¤ºã€‚</div>

Â  Â  </div>
Â  </div>

</div>

<script>
/* ============================
Â  Â i18n translations
Â  Â ============================ */
const TRANSLATIONS = {
Â  'zh-TW':{
Â  Â  title:'ğŸ“š é›™å­—å…¸æ‰¹æ¬¡æŸ¥è©¢å·¥å…·', tagline:'æ”¯æ´åŠæ©‹ / Dr.eyeï¼Œä»¥åŠä¸€éµé–‹å•Ÿå…¨éƒ¨åˆ†é ', warning:'âš ï¸ é»æ“ŠæŒ‰éˆ•ç„¡åæ‡‰æ™‚ï¼Œç³»çµ±é€šçŸ¥æœƒé¡¯ç¤ºåŸå› è€Œéè·³è½‰æ–°é ã€‚',
Â  Â  usage:'ğŸ¯ ä½¿ç”¨èªªæ˜', usage1:'æ¯è¡Œä¸€å€‹å–®å­—æˆ–è©èªï¼›å¯æŒ‰ã€Œä¸€éµæŸ¥è©¢ã€åŒæ™‚é–‹å•Ÿå¤šå€‹åˆ†é ï¼ˆç€è¦½å™¨æœƒå½ˆå‡ºåˆ†é ï¼‰ã€‚', usage2:'å³ä¸‹åœ°çƒå¯åˆ‡æ›ä»‹é¢èªè¨€ï¼ˆåˆ‡æ›å¾Œå…¨éƒ¨æ–‡å­—æœƒæ”¹è®Šï¼‰ã€‚', usage3:'æ¸¸æ¨™ç‚ºæ°´æ»´/é€é¡ï¼Œé è¿‘æŒ‰éˆ•æœƒå‡ºç¾å¸é™„èˆ‡æ‰­æ›²æ„Ÿã€‚',
Â  Â  cambridge:'åŠæ©‹è©å…¸', dreye:'è­¯å…¸é€š (Dr.eye)', all:'ä¸€éµæŸ¥è©¢', demoNotify:'ç¤ºç¯„é€šçŸ¥',
Â  Â  nowTime:'ç¾åœ¨æ™‚é–“', curLang:'ç•¶å‰èªè¨€', pomoTitle:'ç•ªèŒ„é˜ / å€’æ•¸è¨ˆæ™‚å™¨', pomoNote:'å¯è‡ªè¨‚æ™‚é–“ï¼Œæœ€çŸ­ 10 ç§’ï¼Œæœ€é•· 180 åˆ†é˜ï¼ˆæ¯æ ¼ 10 ç§’ï¼‰', start:'é–‹å§‹', pause:'æš«åœ', reset:'é‡è¨­',
Â  Â  secLabel:'ç§’ï¼ˆ10 ç§’ç‚ºä¸€æ ¼ï¼‰', dragHint:'æ‹–æ›³åœ“ç’°å³å´åœ“é»å¯èª¿æ•´æ™‚é–“', pomoFooter:'æç¤ºï¼šè¨ˆæ™‚ä¸­å¯æš«åœèˆ‡é‡è¨­ï¼ŒçµæŸæ™‚ä»¥é€šçŸ¥ï¼ˆç•«é¢è·³å‡ºï¼‰æç¤ºã€‚',
Â  Â  langTitle:'èªè¨€ / Language'
Â  },
Â  'en':{
Â  Â  title:'ğŸ“š Batch Dictionary Lookup', tagline:'Supports Cambridge / Dr.eye and open all tabs at once', warning:'âš ï¸ If a button does not respond, a system notification will explain instead of navigating.',
Â  Â  usage:'ğŸ¯ How to use', usage1:'One word or phrase per line. Click "Open All" to open multiple tabs.', usage2:'Use the globe at bottom-right to change the UI language.', usage3:'Cursor behaves like a droplet lens with attraction effects.',
Â  Â  cambridge:'Cambridge', dreye:'Dr.eye', all:'Open All', demoNotify:'Demo Notification',
Â  Â  nowTime:'Current time', curLang:'Language', pomoTitle:'Pomodoro / Timer', pomoNote:'Custom duration: min 10s, max 180min (10s step)', start:'Start', pause:'Pause', reset:'Reset',
Â  Â  secLabel:'seconds (10s step)', dragHint:'Drag the knob on the ring to adjust time', pomoFooter:'Tip: You can pause/reset. A notification appears when finished.',
Â  Â  langTitle:'Language'
Â  },
Â  'ja':{
Â  Â  title:'ğŸ“š ãƒãƒƒãƒè¾æ›¸æ¤œç´¢ãƒ„ãƒ¼ãƒ«', tagline:'Cambridge / Dr.eye ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å…¨ã‚¿ãƒ–ã‚’ä¸€æ‹¬ã§é–‹ãã¾ã™', warning:'âš ï¸ ãƒœã‚¿ãƒ³ãŒåå¿œã—ãªã„å ´åˆã€ç”»é¢é€šçŸ¥ã§ç†ç”±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚',
Â  Â  usage:'ğŸ¯ ä½¿ã„æ–¹', usage1:'1 è¡Œã« 1 å˜èªã¾ãŸã¯ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚å…¨ã¦é–‹ãã‚’æŠ¼ã™ã¨è¤‡æ•°ã‚¿ãƒ–ã‚’é–‹ãã¾ã™ã€‚', usage2:'å³ä¸‹ã®åœ°çƒãƒœã‚¿ãƒ³ã§è¨€èªã‚’å¤‰æ›´ã§ãã¾ã™ï¼ˆUI å…¨ä½“ãŒåˆ‡æ›¿ï¼‰ã€‚', usage3:'ã‚«ãƒ¼ã‚½ãƒ«ã¯æ°´æ»´ãƒ¬ãƒ³ã‚ºã®ã‚ˆã†ãªæŒ™å‹•ã‚’ã—ã¾ã™ã€‚',
Â  Â  cambridge:'ã‚±ãƒ³ãƒ–ãƒªãƒƒã‚¸', dreye:'Dr.eye', all:'ä¸€æ‹¬é–‹ã', demoNotify:'é€šçŸ¥ã®ãƒ‡ãƒ¢',
Â  Â  nowTime:'ç¾åœ¨ã®æ™‚åˆ»', curLang:'ç¾åœ¨ã®è¨€èª', pomoTitle:'ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ / ã‚¿ã‚¤ãƒãƒ¼', pomoNote:'10ç§’æœ€å°ã€180åˆ†æœ€å¤§ï¼ˆ10ç§’åˆ»ã¿ï¼‰', start:'é–‹å§‹', pause:'ä¸€æ™‚åœæ­¢', reset:'ãƒªã‚»ãƒƒãƒˆ',
Â  Â  secLabel:'ç§’ï¼ˆ10ç§’åˆ»ã¿ï¼‰', dragHint:'ãƒªãƒ³ã‚°å³ã®ãƒãƒ–ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦æ™‚é–“ã‚’èª¿æ•´', pomoFooter:'çµ‚äº†æ™‚ã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚',
Â  Â  langTitle:'è¨€èª'
Â  },
Â  'ko':{
Â  Â  title:'ğŸ“š ì¼ê´„ ì‚¬ì „ ê²€ìƒ‰ ë„êµ¬', tagline:'Cambridge / Dr.eye ì§€ì›, ëª¨ë“  íƒ­ì„ í•œ ë²ˆì— ì—´ê¸°', warning:'âš ï¸ ë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ í™”ë©´ ì•Œë¦¼ìœ¼ë¡œ ì´ìœ ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤ã€‚',
Â  Â  usage:'ğŸ¯ ì‚¬ìš© ë°©ë²•', usage1:'í•œ ì¤„ì— ë‹¨ì–´ ë˜ëŠ” êµ¬ë¬¸ í•˜ë‚˜. ëª¨ë‘ ì—´ê¸°ë¥¼ ëˆ„ë¥´ë©´ ì—¬ëŸ¬ íƒ­ì„ ì—½ë‹ˆë‹¤ã€‚', usage2:'ìš°ì¸¡ í•˜ë‹¨ ì§€êµ¬ ë²„íŠ¼ìœ¼ë¡œ UI ì–¸ì–´ë¥¼ ì „í™˜í•©ë‹ˆë‹¤ã€‚', usage3:'ì»¤ì„œëŠ” ë¬¼ë°©ìš¸ ë Œì¦ˆì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤ã€‚',
Â  Â  cambridge:'ìº ë¸Œë¦¬ì§€', dreye:'Dr.eye', all:'ëª¨ë‘ ì—´ê¸°', demoNotify:'ì•Œë¦¼ ë°ëª¨',
Â  Â  nowTime:'í˜„ì¬ ì‹œê°„', curLang:'í˜„ì¬ ì–¸ì–´', pomoTitle:'í¬ëª¨ë„ë¡œ / íƒ€ì´ë¨¸', pomoNote:'ìµœì†Œ 10ì´ˆ, ìµœëŒ€ 180ë¶„(10ì´ˆ ë‹¨ìœ„)', start:'ì‹œì‘', pause:'ì¼ì‹œì •ì§€', reset:'ë¦¬ì…‹',
Â  Â  secLabel:'ì´ˆ(10ì´ˆ ë‹¨ìœ„)', dragHint:'ë§ ì˜¤ë¥¸ìª½ ë…¸ë¸Œë¥¼ ë“œë˜ê·¸í•´ ì‹œê°„ ì¡°ì ˆ', pomoFooter:'ì™„ë£Œ ì‹œ í™”ë©´ ì•Œë¦¼ì´ í‘œì‹œë©ë‹ˆë‹¤ã€‚',
Â  Â  langTitle:'ì–¸ì–´'
Â  },
Â  'zh-CN':{
Â  Â  title:'ğŸ“š åŒè¯å…¸æ‰¹é‡æŸ¥è¯¢å·¥å…·', tagline:'æ”¯æŒ Cambridge / Dr.eyeï¼Œä¸€é”®æ‰“å¼€å…¨éƒ¨æ ‡ç­¾é¡µ', warning:'âš ï¸ æŒ‰é’®æ— ååº”æ—¶ï¼Œç³»ç»Ÿé€šçŸ¥ä¼šè¯´æ˜åŸå› ä»£æ›¿è·³è½¬ã€‚',
Â  Â  usage:'ğŸ¯ ä½¿ç”¨è¯´æ˜', usage1:'æ¯è¡Œä¸€ä¸ªå•è¯æˆ–çŸ­è¯­ï¼›å¯ç‚¹å‡»â€œä¸€é”®æŸ¥è¯¢â€åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µã€‚', usage2:'å³ä¸‹åœ°çƒå¯åˆ‡æ¢ç•Œé¢è¯­è¨€ï¼ˆåˆ‡æ¢åæ‰€æœ‰æ–‡å­—ä¼šå˜åŒ–ï¼‰ã€‚', usage3:'é¼ æ ‡ä¸ºæ°´æ»´é€é•œï¼Œé è¿‘æŒ‰é’®ä¼šæœ‰å¸é™„ä¸æ‰­æ›²æ•ˆæœã€‚',
Â  Â  cambridge:'å‰‘æ¡¥è¯å…¸', dreye:'è¯‘å…¸é€š (Dr.eye)', all:'ä¸€é”®æŸ¥è¯¢', demoNotify:'é€šçŸ¥ç¤ºä¾‹',
Â  Â  nowTime:'å½“å‰æ—¶é—´', curLang:'å½“å‰è¯­è¨€', pomoTitle:'ç•ªèŒ„é’Ÿ / å€’è®¡æ—¶', pomoNote:'å¯è‡ªå®šä¹‰æ—¶é—´ï¼Œæœ€çŸ­10ç§’ï¼Œæœ€é•¿180åˆ†é’Ÿï¼ˆ10ç§’æ­¥è¿›ï¼‰', start:'å¼€å§‹', pause:'æš‚åœ', reset:'é‡ç½®',
Â  Â  secLabel:'ç§’ï¼ˆ10ç§’ä¸ºä¸€æ ¼ï¼‰', dragHint:'æ‹–åŠ¨åœ†ç¯å³ä¾§åœ†ç‚¹æ¥è°ƒæ•´æ—¶é—´', pomoFooter:'è®¡æ—¶ç»“æŸæ—¶ä¼šä»¥é€šçŸ¥æç¤ºã€‚',
Â  Â  langTitle:'è¯­è¨€'
Â  },
Â  'fr':{
Â  Â  title:'ğŸ“š Outil de recherche de dictionnaire par lot', tagline:'Prend en charge Cambridge / Dr.eye et ouvre tous les onglets', warning:'âš ï¸ Si un bouton ne rÃ©pond pas, une notification sâ€™affichera au lieu de naviguerã€‚',
Â  Â  usage:'ğŸ¯ Mode dâ€™emploi', usage1:'Un mot ou une phrase par ligne. Cliquer sur "Ouvrir tout" pour ouvrir plusieurs ongletsã€‚', usage2:'Utilisez la planÃ¨te en bas Ã  droite pour changer la langue de lâ€™interfaceã€‚', usage3:'Le curseur se comporte comme une lentille goutte dâ€™eau avec effets dâ€™attractionã€‚',
Â  Â  cambridge:'Cambridge', dreye:'Dr.eye', all:'Tout ouvrir', demoNotify:'DÃ©mo notification',
Â  Â  nowTime:'Heure actuelle', curLang:'Langue', pomoTitle:'Pomodoro / Minuteur', pomoNote:'Personnalisez la durÃ©e: min 10s, max 180min (pas de 10s)', start:'DÃ©marrer', pause:'Pause', reset:'RÃ©initialiser',
Â  Â  secLabel:'secondes (pas 10s)', dragHint:'Faites glisser le bouton sur lâ€™anneau pour rÃ©gler le temps', pomoFooter:'Astuce: vous pouvez mettre en pause/rÃ©initialiser. Une notification sâ€™affiche Ã  la finã€‚',
Â  Â  langTitle:'Langue'
Â  }
};

let currentLang = 'zh-TW';
function applyTranslations(code){
Â  const dict = TRANSLATIONS[code] || TRANSLATIONS['zh-TW'];
Â  document.querySelectorAll('[data-i18n]').forEach(el=>{
Â  Â  const key = el.getAttribute('data-i18n');
Â  Â  if (dict[key]) el.textContent = dict[key];
Â  });
}
applyTranslations(currentLang);

/* ============================
Â  Â Toast helper (replaces alert)
Â  Â ============================ */
function showToast(text, ms = 2800){
Â  const t = document.getElementById('toast');
Â  t.style.display = 'flex';
Â  t.textContent = text;
Â  clearTimeout(t._t);
Â  t._t = setTimeout(()=>{ t.style.display = 'none'; }, ms);
}

/* ============================
Â  Â Theme toggle
Â  Â ============================ */
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', ()=>{
Â  const body = document.body;
Â  if (body.getAttribute('data-theme') === 'dark') {
Â  Â  body.removeAttribute('data-theme');
Â  Â  themeToggle.textContent = 'ğŸŒ™';
Â  } else {
Â  Â  body.setAttribute('data-theme','dark');
Â  Â  themeToggle.textContent = 'â˜€ï¸';
Â  }
});

/* ============================
Â  Â Dictionary logic (open pages; uses toast instead of alert)
Â  Â ============================ */
const DICTIONARY_TEMPLATES = [
Â  "https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/",
Â  "https://yun.dreye.com/dict_new/dict.php?w="
];
const BASE_DELAY = 300;

function openDictionaries(dictionaryIndex, isBatchMode = false) {
Â  const wordInput = document.getElementById('wordInput');
Â  const inputContent = wordInput.value.trim();
Â  if (!inputContent) { showToast(TRANSLATIONS[currentLang].warning); return; }
Â  const wordsToSearch = inputContent.split('\n').map(s=>s.trim()).filter(Boolean);
Â  if (wordsToSearch.length === 0) { showToast(TRANSLATIONS[currentLang].warning); return; }
Â  if (!isBatchMode) { wordInput.value = ''; wordInput.focus(); }

Â  let totalDelay = 0;
Â  const targetTemplate = DICTIONARY_TEMPLATES[dictionaryIndex];

Â  wordsToSearch.forEach((word, index) => {
Â  Â  totalDelay += BASE_DELAY;
Â  Â  setTimeout(() => {
Â  Â  Â  let finalUrl = "";
Â  Â  Â  if (dictionaryIndex === 0) {
Â  Â  Â  Â  const cambridgeWordFormatted = word.toLowerCase().replace(/\s/g, '-');
Â  Â  Â  Â  finalUrl = targetTemplate + cambridgeWordFormatted;
Â  Â  Â  } else {
Â  Â  Â  Â  const dreyeWord = word.replace(/\s/g, '+');
Â  Â  Â  Â  finalUrl = targetTemplate + dreyeWord + "&hidden_codepage=01";
Â  Â  Â  }
Â  Â  Â  try { window.open(finalUrl, '_blank'); } catch(e) { console.warn('popup blocked', e); }
Â  Â  Â  if (!isBatchMode && index === wordsToSearch.length - 1) {
Â  Â  Â  Â  setTimeout(()=> showToast('å·²å˜—è©¦é–‹å•Ÿå­—å…¸åˆ†é ', 1200), 800);
Â  Â  Â  }
Â  Â  }, totalDelay);
Â  });

Â  return totalDelay;
}

document.getElementById('cambridgeButton').addEventListener('click', ()=> openDictionaries(0));
document.getElementById('dreyeButton').addEventListener('click', ()=> openDictionaries(1));
document.getElementById('allButton').addEventListener('click', ()=>{
Â  const cambridgeDelay = openDictionaries(0, true);
Â  setTimeout(()=>{ openDictionaries(1, true); showToast('å·²å˜—è©¦é–‹å•Ÿæ‰€æœ‰å­—å…¸åˆ†é ', 1000); }, cambridgeDelay + 120);
});
document.getElementById('openNotify').addEventListener('click', ()=> showToast('é€™æ˜¯ä¸€å€‹ç³»çµ±é€šçŸ¥ç¤ºç¯„ã€‚', 1800));

/* ============================
Â  Â Language menu behavior
Â  Â ============================ */
const langToggle = document.getElementById('languageToggle');
const langMenu = document.getElementById('languageMenu');
const currentLangLabel = document.getElementById('currentLang');
const displayLang = document.getElementById('displayLang');

langToggle.addEventListener('click', ()=>{
Â  if (langMenu.style.display === 'flex') { langMenu.style.display = 'none'; langMenu.setAttribute('aria-hidden','true'); }
Â  else { langMenu.style.display = 'flex'; langMenu.setAttribute('aria-hidden','false'); }
});

document.querySelectorAll('#languageMenu .lang-btn').forEach(btn=>{
Â  btn.addEventListener('click', ()=>{
Â  Â  const code = btn.getAttribute('data-lang');
Â  Â  currentLang = code;
Â  Â  currentLangLabel.textContent = btn.textContent;
Â  Â  displayLang.textContent = code;
Â  Â  langMenu.style.display = 'none';
Â  Â  applyTranslations(code);
Â  Â  showToast('å·²åˆ‡æ›èªè¨€ï¼š' + btn.textContent, 1200);
Â  });
});
document.addEventListener('click', (e)=>{ if (!langMenu.contains(e.target) && !langToggle.contains(e.target)) langMenu.style.display='none'; });

/* ============================
Â  Â Clock
Â  Â ============================ */
function pad(n){ return String(n).padStart(2,'0'); }
function updateClock(){
Â  const now = new Date();
Â  const s = pad(now.getHours()) + ':' + pad(now.getMinutes()) + ':' + pad(now.getSeconds());
Â  document.getElementById('currentTime').textContent = s;
}
setInterval(updateClock, 1000); updateClock();

/* ============================
Â  Â Custom cursor & proximity interactions
Â  Â ============================ */
const cursor = document.getElementById('customCursor');
const lens = cursor.querySelector('.cursor-lens');
const inner = cursor.querySelector('.cursor-inner');

let mouseX = window.innerWidth/2, mouseY = window.innerHeight/2;
function moveCursor(x,y){ mouseX=x; mouseY=y; cursor.style.left = x + 'px'; cursor.style.top = y + 'px'; }

const interactiveEls = document.querySelectorAll('.interactive');

document.addEventListener('mousemove', (e)=>{
Â  moveCursor(e.clientX, e.clientY);

Â  // find nearest interactive element
Â  let nearest = null, minDist = Infinity;
Â  interactiveEls.forEach(el=>{
Â  Â  const rect = el.getBoundingClientRect();
Â  Â  const center = { x: rect.left + rect.width/2, y: rect.top + rect.height/2 };
Â  Â  const d = Math.hypot(e.clientX - center.x, e.clientY - center.y);
Â  Â  if (d < minDist) { minDist = d; nearest = { el, rect, center, d }; }
Â  });

Â  // reset defaults
Â  cursor.classList.remove('big');
Â  inner.textContent = 'â—‹';
Â  lens.style.transform = ''; /* 1. ç¢ºä¿æ¸¸æ¨™é¡é ­ä¸æœƒè®Šå½¢ */
Â  interactiveEls.forEach(el => { el.style.transform = ''; el.style.filter = ''; el.querySelectorAll('.text-warp').forEach(t=> t.style.transform = ''); });

Â  // apply attraction if close
Â  if (nearest && minDist < 220) {
Â  Â  cursor.classList.add('big'); inner.textContent = 'â—';
Â  Â  const force = Math.max(0, 1 - (minDist / 220));
Â  Â  const el = nearest.el;
Â  Â  const vecX = (nearest.center.x - e.clientX);
Â  Â  const vecY = (nearest.center.y - e.clientY);
Â  Â  const tx = -vecX * 0.06 * force;
Â  Â  const ty = -vecY * 0.06 * force;
Â  Â  const rot = ((vecX / nearest.rect.width) * 8 * force).toFixed(2);
Â  Â  el.style.transform = `translate(${tx}px, ${ty}px) rotate(${rot}deg) scale(${1 + 0.06*force})`;
Â  Â  el.style.filter = `brightness(${1 - 0.1*force}) saturate(${1 + 0.12*force})`;
Â  Â  el.querySelectorAll('.text-warp').forEach(t=>{
Â  Â  Â  const wob = (Math.sin((e.clientX + e.clientY)/40) * 6 * force).toFixed(2);
Â  Â  Â  t.style.transform = `skewX(${wob}deg) translateY(${(6*force).toFixed(1)}px)`;
Â  Â  });
Â  Â  /* 1. æ¸¸æ¨™é¡é ­çš„æ‰­æ›²æ„Ÿï¼Œä½†ä¸å†è®Šå½¢ */
Â  Â  lens.style.transform = `translate(${(-vecX*0.04*force).toFixed(2)}px, ${(-vecY*0.04*force).toFixed(2)}px) scale(1.05)`;
Â  }
});

// hide native cursor
document.documentElement.style.cursor = 'none';
document.addEventListener('mousedown', ()=>{ cursor.style.transform = 'translate(-50%,-50%) scale(.95)'; });
document.addEventListener('mouseup', ()=>{ cursor.style.transform = 'translate(-50%,-50%) scale(1)'; });

/* ============================
Â  Â Pomodoro (dual-color ring) and controls
Â  Â ============================ */
const progress = document.getElementById('progress');
const timeRemainingLabel = document.getElementById('timeRemaining');
const durationInput = document.getElementById('durationInput');
const setDurationLabel = document.getElementById('setDurationLabel');
const handle = document.getElementById('pomoHandle');

let totalSeconds = parseInt(durationInput.value,10) || 1800;
if (totalSeconds < 10) totalSeconds = 10;
if (totalSeconds > 10800) totalSeconds = 10800;
durationInput.value = totalSeconds;
let remaining = totalSeconds;
let timerInterval = null;
let isRunning = false;

function secToClock(s){
Â  const mm = Math.floor(s/60);
Â  const ss = s % 60;
Â  return (mm<10?'0'+mm:mm)+':' + (ss<10?'0'+ss:ss);
}

function updateProgress(){
Â  const circumference = 2 * Math.PI * 40; // r=40
Â  const pct = (remaining / totalSeconds);
Â  const dash = circumference * pct;
Â  progress.style.strokeDashoffset = (circumference - dash).toFixed(2);
Â  timeRemainingLabel.textContent = secToClock(remaining);
}

(function initStroke(){
Â  const circumference = 2 * Math.PI * 40;
Â  progress.style.strokeDasharray = circumference.toFixed(2);
Â  progress.style.strokeDashoffset = circumference.toFixed(2);
})();

document.getElementById('startPomo').addEventListener('click', ()=>{
Â  if (isRunning) return;
Â  if (remaining <= 0) remaining = totalSeconds;
Â  isRunning = true;
Â  timerInterval = setInterval(()=>{
Â  Â  if (remaining > 0) {
Â  Â  Â  remaining--;
Â  Â  Â  updateProgress();
Â  Â  } else {
Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  isRunning = false;
Â  Â  Â  showToast('â° è¨ˆæ™‚çµæŸï¼', 3800);
Â  Â  Â  progress.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}], {duration:900, easing:'ease-out'});
Â  Â  }
Â  }, 1000);
});

document.getElementById('pausePomo').addEventListener('click', ()=>{
Â  if (!isRunning) return;
Â  clearInterval(timerInterval);
Â  isRunning = false;
Â  showToast('å·²æš«åœè¨ˆæ™‚', 1500);
});

document.getElementById('resetPomo').addEventListener('click', ()=>{
Â  clearInterval(timerInterval);
Â  isRunning = false;
Â  remaining = totalSeconds;
Â  updateProgress();
Â  showToast('å·²é‡è¨­', 1200);
});

document.getElementById('incTen').addEventListener('click', ()=>{
Â  totalSeconds = Math.min(10800, totalSeconds + 10);
Â  durationInput.value = totalSeconds;
Â  remaining = totalSeconds;
Â  updateDurationLabel(); updateProgress();
});
document.getElementById('decTen').addEventListener('click', ()=>{
Â  totalSeconds = Math.max(10, totalSeconds - 10);
Â  durationInput.value = totalSeconds;
Â  remaining = totalSeconds;
Â  updateDurationLabel(); updateProgress();
});

durationInput.addEventListener('change', ()=>{
Â  let v = parseInt(durationInput.value,10) || 10;
Â  if (v < 10) v = 10; if (v > 10800) v = 10800;
Â  v = Math.round(v / 10) * 10;
Â  totalSeconds = v; remaining = totalSeconds;
Â  durationInput.value = totalSeconds;
Â  updateDurationLabel(); updateProgress();
});

function updateDurationLabel(){
Â  const mm = Math.floor(totalSeconds/60);
Â  const ss = totalSeconds%60;
Â  setDurationLabel.textContent = `${mm}:${ss.toString().padStart(2,'0')}`;
}

// dragging the handle
const ringBox = document.querySelector('.pomo-ring');
let dragging = false;
handle.addEventListener('mousedown', (ev)=>{
Â  ev.preventDefault(); dragging = true; handle.style.cursor='grabbing';
});
document.addEventListener('mouseup', ()=>{ dragging=false; handle.style.cursor='grab'; });
document.addEventListener('mousemove', (ev)=>{
Â  if (!dragging) return;
Â  const rect = ringBox.getBoundingClientRect();
Â  const cx = rect.left + rect.width/2;
Â  const cy = rect.top + rect.height/2;
Â  const angle = Math.atan2(ev.clientY - cy, ev.clientX - cx);
Â  let frac = (angle + Math.PI/2) / (2*Math.PI);
Â  if (frac < 0) frac += 1;
Â  let seconds = Math.round((frac * 10800) / 10) * 10;
Â  if (seconds < 10) seconds = 10;
Â  totalSeconds = seconds;
Â  remaining = totalSeconds;
Â  durationInput.value = totalSeconds;
Â  updateDurationLabel(); updateProgress();
Â  const r = rect.width/2 * 0.9;
Â  const hx = cx + Math.cos(angle) * r;
Â  const hy = cy + Math.sin(angle) * r;
Â  handle.style.left = ( (hx - rect.left) / rect.width * 100 ) + '%';
Â  handle.style.top = ( (hy - rect.top) / rect.height * 100 ) + '%';
});

// initial
updateDurationLabel();
remaining = totalSeconds;
updateProgress();

/* ============================
Â  Â Small polish: make button labels warp-ready
Â  Â ============================ */
document.querySelectorAll('.search-button').forEach(btn=>{
Â  const originalText = btn.innerHTML;
Â  if (!originalText.includes('<span class="text-warp">')) {
Â  Â  const span = document.createElement('span'); span.className='text-warp';
Â  Â  span.innerHTML = originalText;
Â  Â  btn.innerHTML = '';
Â  Â  btn.appendChild(span);
Â  }
});

/* ============================
Â  Â Keyboard shortcut for start/pause
Â  Â ============================ */
document.addEventListener('keydown', (e)=>{
Â  if (e.code === 'Space') {
Â  Â  e.preventDefault();
Â  Â  if (isRunning) document.getElementById('pausePomo').click();
Â  Â  else document.getElementById('startPomo').click();
Â  }
});

/* ============================
Â  Â Hide cursor when unfocused
Â  Â ============================ */
window.addEventListener('blur', ()=>{ cursor.style.display='none'; });
window.addEventListener('focus', ()=>{ cursor.style.display='block'; });

/* ============================
Â  Â Final loaded toast
Â  Â ============================ */
showToast('å·²è¼‰å…¥ï¼šLiquid Glass è¦–è¦ºä¿®å¾©ç‰ˆ', 1400);

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<meta name="theme-color" content="#e0eafc" />
<title>å…¨èƒ½æ‰¹æ¬¡æœå°‹æ§åˆ¶å°</title>

<script src="https://unpkg.com/@phosphor-icons/web"></script>

<style>
/* =======================
   1. Design Tokens (è®Šæ•¸è¨­å®š)
   ======================= */
:root {
  /* --- æ·ºè‰²æ¨¡å¼ (Light Mode) --- */
  --bg-gradient: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
  --text-color: #2d3436;
  
  --glass-bg: rgba(255, 255, 255, 0.65);
  --glass-border: rgba(255, 255, 255, 0.8);
  --glass-thickness: inset 0 1px 2px rgba(255, 255, 255, 0.95), inset 0 -1px 2px rgba(0, 0, 0, 0.03);
  --glass-shadow: 0 20px 40px rgba(0, 0, 0, 0.08), 0 5px 15px rgba(0,0,0,0.05);
  
  --btn-bg: rgba(255, 255, 255, 0.5);
  --btn-shadow: 0 8px 20px rgba(180, 190, 200, 0.2), inset 0 1px 1px rgba(255,255,255,1);
  
  /* æ¸¸æ¨™è¨­å®š */
  --cursor-size: 60px;
  --cursor-bg: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.02) 10%, transparent 60%);
  --cursor-backdrop: blur(5px) brightness(1.1) saturate(1.2);
  --cursor-border: 1px solid rgba(255, 255, 255, 0.4);
  --cursor-shadow: inset 0 0 15px rgba(255, 255, 255, 0.6), 0 10px 25px rgba(0, 0, 0, 0.1);
      
  --flip-bg: #2d3436;
  --flip-text: #dfe6e9;

  --weather-bg: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
  --weather-text: #2d3436;
}

[data-theme="dark"] {
  --bg-gradient: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
  --text-color: #e0f7fa;
  
  --glass-bg: rgba(20, 20, 30, 0.5);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-thickness: inset 0 1px 1px rgba(255, 255, 255, 0.15), inset 0 -1px 10px rgba(0,0,0,0.3);
  --glass-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
  
  --btn-bg: rgba(255, 255, 255, 0.08);
  --btn-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 1px 1px rgba(255,255,255,0.1);
  
  --cursor-bg: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.02) 10%, transparent 60%);
  --cursor-backdrop: blur(4px) brightness(1.3);
  --cursor-border: 1px solid rgba(255, 255, 255, 0.2);
  --cursor-shadow: inset 0 0 15px rgba(255, 255, 255, 0.1), 0 0 20px rgba(255, 255, 255, 0.2);

  --flip-bg: #e0f7fa;
  --flip-text: #0f2027;

  --weather-bg: linear-gradient(120deg, #2c3e50 0%, #4ca1af 100%);
  --weather-text: #fff;
}

/* =======================
   2. Base Styles
   ======================= */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

/* PCé è¨­éš±è—ç³»çµ±æ¸¸æ¨™ï¼Œæ”¹ç”¨è‡ªå®šç¾© */
@media (pointer: fine) {
    * { cursor: none; }
}

body {
  margin: 0; padding: 40px 20px;
  font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: var(--bg-gradient);
  color: var(--text-color);
  min-height: 100vh;
  display: flex; justify-content: center; align-items: flex-start;
  transition: background 0.5s ease, color 0.5s ease;
  overflow-x: hidden;
}

.container {
  display: grid; grid-template-columns: 1fr 400px; gap: 30px;
  width: 100%; max-width: 1100px;
}

.glass-card {
  padding: 30px; border-radius: 32px;
  background: var(--glass-bg);
  backdrop-filter: blur(30px) saturate(120%);
  -webkit-backdrop-filter: blur(30px) saturate(120%);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow), var(--glass-thickness); 
  transition: all 0.3s ease;
  display: flex; flex-direction: column; 
}

h1 { margin: 0 0 10px 0; font-weight: 700; letter-spacing: 1px; font-size: 2em; }
.subtitle { font-size: 0.9em; opacity: 0.8; margin-bottom: 20px; }
.warning-text { color: #ff6b6b; font-weight: 600; margin-bottom: 15px; font-size: 0.9em; }
[data-theme="dark"] .warning-text { color: #ff8787; }

#wordInput {
  width: 100%; min-height: 150px; padding: 20px;
  border-radius: 24px; border: 1px solid var(--glass-border);
  background: rgba(255,255,255,0.15); 
  color: var(--text-color); 
  font-size: 16px; 
  line-height: 1.6;
  outline: none; transition: 0.3s;
  box-shadow: inset 2px 2px 10px rgba(0,0,0,0.05); 
  resize: vertical;
  font-family: inherit;
}
#wordInput:focus {
  background: rgba(255,255,255,0.3);
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.05), 0 0 0 1px var(--text-color);
}

/* =======================
   3. Buttons
   ======================= */
.button-group { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 25px; }

.search-button {
  padding: 14px 28px;
  border-radius: 50px;
  border: 1px solid rgba(255,255,255,0.4);
  background: var(--btn-bg);
  box-shadow: var(--btn-shadow);
  color: var(--text-color);
  font-weight: 600; font-size: 15px;
  backdrop-filter: blur(15px);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
  display: flex; align-items: center; gap: 8px;
  position: relative; overflow: hidden;
  touch-action: manipulation;
  cursor: pointer;
}

.btn-youtube {
  background: linear-gradient(135deg, rgba(255,0,0,0.1) 0%, rgba(255,255,255,0.2) 100%);
  border-color: rgba(255,0,0,0.3);
}
.btn-youtube:hover {
  background: linear-gradient(135deg, rgba(255,0,0,0.2) 0%, rgba(255,255,255,0.4) 100%);
  box-shadow: 0 10px 25px rgba(255, 0, 0, 0.2);
}
.btn-web {
  background: linear-gradient(135deg, rgba(66, 133, 244, 0.1) 0%, rgba(255,255,255,0.2) 100%);
  border-color: rgba(66, 133, 244, 0.3);
}
.btn-web:hover {
  background: linear-gradient(135deg, rgba(66, 133, 244, 0.2) 0%, rgba(255,255,255,0.4) 100%);
  box-shadow: 0 10px 25px rgba(66, 133, 244, 0.25);
}

@media (hover: hover) {
  .search-button:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 15px 35px rgba(0,0,0,0.15), inset 0 0 20px rgba(255,255,255,0.6);
    border-color: rgba(255,255,255,0.9);
  }
}

.search-button:active, #themeToggle:active, #langFab:active, .lang-opt:active {
  animation: liquidClick 0.6s cubic-bezier(0.25, 1, 0.5, 1);
}

@keyframes liquidClick {
  0% { transform: scale(1); border-radius: 50px; }
  30% { transform: scale(0.95); border-radius: 40px 60px 40px 60px / 50px 40px 60px 50px; }
  60% { transform: scale(1.02); border-radius: 55px 45px 60px 40px / 45px 55px 40px 60px; }
  100% { transform: scale(1); border-radius: 50px; }
}

#themeToggle {
    width: 48px; height: 48px; padding: 0; border-radius: 50%; 
    display: flex; align-items: center; justify-content: center; font-size: 22px;
}
#allButton {
  width: 64px; height: 64px; padding: 0;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 26px;
  background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
  color: white; border: none;
  box-shadow: 0 10px 25px rgba(161, 140, 209, 0.5);
}

/* =======================
   3.5 Status Board (Updated for Time)
   ======================= */
#statusBoard {
  margin-top: 15px; padding: 12px 25px;
  background: rgba(255,255,255,0.25);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;
  font-size: 0.9em; font-weight: 500;
  opacity: 0; transform: translateY(-10px);
  transition: all 0.3s ease;
  pointer-events: none;
  height: 0; overflow: hidden;
  text-align: center;
}
#statusBoard.active {
  opacity: 1; transform: translateY(0); pointer-events: auto; height: auto; margin-bottom: 10px;
}
.status-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.status-label { font-size: 0.75em; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.5px; }
.status-val { font-weight: 700; font-size: 1.1em; font-variant-numeric: tabular-nums; }
.status-timer { color: #ff6b6b; }
.status-total { color: #2ecc71; }

/* =======================
   4. Weather Widget
   ======================= */
#weatherCard {
    background: var(--weather-bg); color: var(--weather-text);
    padding: 0; overflow: hidden; position: relative;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 30px; border: none;
}
.weather-header { padding: 25px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.weather-main { display: flex; align-items: center; gap: 15px; }
.weather-icon-lg { font-size: 48px; }
.weather-temp { font-size: 36px; font-weight: 700; }
.weather-meta { display: flex; flex-direction: column; font-size: 0.9em; opacity: 0.9; }
.weather-city-select {
    background: rgba(255,255,255,0.2); border: none; color: currentColor;
    padding: 5px 10px; border-radius: 12px; font-size: 0.9em; cursor: pointer;
    outline: none; backdrop-filter: blur(5px);
    appearance: none; -webkit-appearance: none; 
}
.weather-city-select option { background: #fff; color: #333; }
.weather-advice { padding: 0 25px 25px 25px; font-size: 0.95em; font-weight: 500; display: flex; align-items: flex-start; gap: 10px; line-height: 1.5; }
.weather-details { max-height: 0; opacity: 0; transition: all 0.5s ease; background: rgba(0,0,0,0.05); padding: 0 25px; }
#weatherCard.expanded .weather-details { max-height: 550px; opacity: 1; padding: 25px; }
.forecast-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px; }
.forecast-day { display: flex; flex-direction: column; align-items: center; gap: 5px; font-size: 0.8em; text-align: center; }
.detail-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; }
.detail-item { background: rgba(255,255,255,0.15); padding: 10px; border-radius: 12px; display: flex; flex-direction: column; align-items: center; text-align: center; }
.detail-label { font-size: 0.75em; opacity: 0.8; margin-bottom: 4px; }
.detail-val { font-weight: 700; font-size: 1.1em; }
.toggle-arrow { transition: transform 0.4s; }
#weatherCard.expanded .toggle-arrow { transform: rotate(180deg); }

/* =======================
   5. Custom Cursor (RWD Fix)
   ======================= */
#customCursor {
  position: fixed; top: 0; left: 0; z-index: 9999;
  width: var(--cursor-size); height: var(--cursor-size);
  pointer-events: none;
  transform: translate(-50%, -50%);
  transition: width 0.2s, height 0.2s, border-radius 0.2s; 
  background: var(--cursor-bg);
  backdrop-filter: var(--cursor-backdrop); 
  -webkit-backdrop-filter: var(--cursor-backdrop);
  border: var(--cursor-border); border-radius: 50%;
  box-shadow: var(--cursor-shadow);
  display: none; 
}

@media (pointer: fine) {
    #customCursor { display: block; }
    body.hover-active #customCursor {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255,255,255,0.4);
      backdrop-filter: none;
      box-shadow: 0 0 0 2px rgba(255,255,255,0.5);
    }
}

/* =======================
   6. Flip Clock (Responsive)
   ======================= */
.clock-container {
  display: flex; justify-content: center; align-items: center;
  min-height: 100px; cursor: pointer; user-select: none;
  position: relative; width: 100%;
}
.clock-digital { font-size: 2.5em; font-weight: 700; font-variant-numeric: tabular-nums; }
.clock-analog {
  width: 90px; height: 90px; border-radius: 50%;
  border: 3px solid var(--text-color); position: relative;
  background: rgba(255,255,255,0.1);
}
.hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom center; background: var(--text-color); border-radius: 2px; }
.hand.hour { width: 4px; height: 25px; transform: translateX(-50%); }
.hand.min { width: 3px; height: 35px; transform: translateX(-50%); }
.hand.sec { width: 2px; height: 40px; background: #ff6b6b; transform: translateX(-50%); }
.center-dot { position: absolute; top: 50%; left: 50%; width: 8px; height: 8px; background: var(--text-color); border-radius: 50%; transform: translate(-50%, -50%); }

.clock-flip { display: flex; gap: 10px; font-family: 'Courier New', monospace; font-weight: bold; }
.flip-unit {
  position: relative; width: 40px; height: 60px; /* Mobile Size */
  background: var(--flip-bg); color: var(--flip-text);
  border-radius: 6px; font-size: 32px; line-height: 60px; text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2); perspective: 400px; 
}
@media (min-width: 600px) {
    .flip-unit { width: 50px; height: 70px; font-size: 40px; line-height: 70px; border-radius: 8px; }
}
.flip-top, .flip-bottom, .flip-leaf-front, .flip-leaf-back {
  position: absolute; left: 0; width: 100%; height: 50%;
  overflow: hidden; background: var(--flip-bg); backface-visibility: hidden; 
}
.flip-top { top: 0; border-radius: 6px 6px 0 0; border-bottom: 1px solid rgba(0,0,0,0.3); z-index: 1; }
.flip-bottom { bottom: 0; border-radius: 0 0 6px 6px; line-height: 0; z-index: 0; }
.flip-leaf-front { top: 0; border-radius: 6px 6px 0 0; transform-origin: bottom; z-index: 2; border-bottom: 1px solid rgba(0,0,0,0.3); }
.flip-leaf-back { bottom: 0; border-radius: 0 0 6px 6px; line-height: 0; transform-origin: top; transform: rotateX(180deg); z-index: 2; }
.flipping .flip-leaf-front { animation: flipDownFront 0.5s cubic-bezier(0.455, 0.030, 0.515, 0.955) forwards; }
.flipping .flip-leaf-back { animation: flipDownBack 0.5s cubic-bezier(0.455, 0.030, 0.515, 0.955) forwards; }
@keyframes flipDownFront { 0% { transform: rotateX(0deg); } 100% { transform: rotateX(-180deg); } }
@keyframes flipDownBack { 0% { transform: rotateX(180deg); } 100% { transform: rotateX(0deg); } }

/* =======================
   7. Pomodoro
   ======================= */
.pomo-container {
  display: flex; flex-direction: column; align-items: center; position: relative;
  width: 240px; height: 240px; margin: 0 auto;
}
.ring-svg { width: 100%; height: 100%; transform: rotate(-90deg); overflow: visible; }
.ring-track { stroke: rgba(128,128,128, 0.15); stroke-width: 12; fill: none; }
[data-theme="dark"] .ring-track { stroke: rgba(255,255,255,0.1); }
.ring-progress {
  fill: none; stroke: url(#gradientStroke); stroke-width: 12; stroke-linecap: round;
  stroke-dasharray: 628; stroke-dashoffset: 0; 
  filter: drop-shadow(0 0 5px rgba(0,198,251,0.5)); 
}
.ring-handle {
  position: absolute; top: 50%; left: 50%; 
  width: 32px; height: 32px; background: #fff; border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  cursor: grab; pointer-events: none; transform: translate(-50%, -50%); z-index: 20;
}
.ring-overlay {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  border-radius: 50%; cursor: grab; z-index: 10;
}
.ring-overlay:active { cursor: grabbing; }
.time-display {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  text-align: center; pointer-events: none;
}
#timeLeft { font-size: 36px; font-weight: 700; font-variant-numeric: tabular-nums; }
.time-label { font-size: 14px; opacity: 0.7; }
.pomo-controls {
  display: flex; gap: 15px; margin-top: 25px; justify-content: center; width: 100%;
}

/* =======================
   8. Language Menu
   ======================= */
@keyframes liquidMorphOpen {
  0% { opacity: 0; transform: scale(0.2) translate(100px, 100px); border-radius: 50%; }
  40% { opacity: 1; transform: scale(1.1) translate(-10px, -20px); border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
  70% { transform: scale(0.95) translate(5px, 5px); border-radius: 40% 60% 60% 40% / 40% 50% 50% 60%; }
  100% { opacity: 1; transform: scale(1) translate(0, 0); border-radius: 16px; }
}

#langFab {
  position: fixed; bottom: 30px; right: 30px;
  width: 60px; height: 60px; border-radius: 50%;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  backdrop-filter: blur(10px);
  display: flex; align-items: center; justify-content: center;
  font-size: 28px; box-shadow: var(--glass-shadow);
  z-index: 1000; transition: 0.3s; cursor: pointer;
}
#langFab:hover { transform: scale(1.1) rotate(20deg); }

#langMenu {
  position: fixed; bottom: 100px; right: 30px;
  background: var(--glass-bg); backdrop-filter: blur(20px);
  padding: 10px; 
  border-radius: 20px;
  border: 1px solid var(--glass-border);
  display: none; flex-direction: column; gap: 5px;
  box-shadow: var(--glass-shadow); z-index: 999;
  transform-origin: bottom right;
  max-height: 60vh;
  overflow-y: auto;
}

#langMenu.active {
  display: flex;
  animation: liquidMorphOpen 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.lang-opt {
  padding: 10px 20px; border-radius: 8px; font-weight: 600; 
  transition: 0.2s; text-align: center; color: var(--text-color);
  white-space: nowrap; cursor: pointer;
}
.lang-opt:hover { background: rgba(255,255,255,0.2); }

/* RWD Layout */
@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; }
  * { cursor: auto !important; }
}
</style>
</head>
<body data-theme="light">

<div id="customCursor"></div>

<div id="langFab" class="interactive">ğŸŒ</div>
<div id="langMenu">
  <div class="lang-opt interactive" data-lang="en">English</div>
  <div class="lang-opt interactive" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</div>
  <div class="lang-opt interactive" data-lang="zh-CN">ç®€ä½“ä¸­æ–‡</div>
  <div class="lang-opt interactive" data-lang="ja">æ—¥æœ¬èª</div>
  <div class="lang-opt interactive" data-lang="ko">í•œêµ­ì–´</div>
  <div class="lang-opt interactive" data-lang="es">EspaÃ±ol</div>
  <div class="lang-opt interactive" data-lang="pt">PortuguÃªs</div>
  <div class="lang-opt interactive" data-lang="vi">Tiáº¿ng Viá»‡t</div>
  <div class="lang-opt interactive" data-lang="bn">à¦¬à¦¾à¦‚à¦²à¦¾</div>
  <div class="lang-opt interactive" data-lang="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</div>
  <div class="lang-opt interactive" data-lang="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</div>
  <div class="lang-opt interactive" data-lang="yue">ç²µèª</div>
</div>

<div class="container">
  
  <div class="glass-card">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
      <div>
        <h1 data-i18n="title">å…¨èƒ½æ‰¹æ¬¡æœå°‹æ§åˆ¶å°</h1>
        <div class="subtitle" data-i18n="subtitle">æ•´åˆæœå°‹å¼•æ“ã€å­—å…¸èˆ‡å¯¦ç”¨å·¥å…·çš„ä¸­å¿ƒ</div>
      </div>
      <button class="search-button interactive" id="themeToggle">ğŸŒ™</button>
    </div>

    <div class="warning-text" data-i18n="warning">âš ï¸ è‹¥ç„¡æ³•é–‹å•Ÿï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦ã€Œé˜»æ“‹å½ˆå‡ºè¦–çª—ã€</div>

    <textarea id="wordInput" placeholder="è«‹è¼¸å…¥é—œéµå­—æˆ–ç¶²å€ï¼Œä¸€è¡Œä¸€å€‹ã€‚&#10;ä¾‹å¦‚ï¼š&#10;å¤©æ°£&#10;www.google.com&#10;https://www.youtube.com"></textarea>

    <div id="statusBoard">
        <div class="status-item">
            <span class="status-label" data-i18n="statusProgress">é€²åº¦</span>
            <span class="status-val" id="stProgress">0 / 0</span>
        </div>
        <div class="status-item">
            <span class="status-label" data-i18n="timeTotal">é è¨ˆç¸½æ™‚</span>
            <span class="status-val status-total" id="stTotalTime">--</span>
        </div>
        <div class="status-item">
            <span class="status-label" data-i18n="timeLeft">å‰©é¤˜æ™‚é–“</span>
            <span class="status-val status-timer" id="stRemainTime">--</span>
        </div>
    </div>

    <div class="button-group">
      <button class="search-button interactive" onclick="searchDict(0)" data-i18n="cambridge">åŠæ©‹è©å…¸</button>
      <button class="search-button interactive" onclick="searchDict(1)" data-i18n="dreye">è­¯å…¸é€š</button>
      
      <button class="search-button btn-youtube interactive" onclick="searchYoutube()">
        <i class="ph ph-youtube-logo" style="font-size:1.2em;"></i> YouTube
      </button>

      <button class="search-button btn-web interactive" onclick="searchWeb()" data-i18n="googleweb">
         <i class="ph ph-globe" style="font-size:1.2em;"></i> Google / Web
      </button>

      <button class="search-button interactive" id="allButton" onclick="searchAll()">ğŸŸ£</button>
    </div>

    <div id="weatherCard" class="glass-card">
        <div class="weather-header interactive" onclick="toggleWeather()">
            <div class="weather-main">
                <i id="weatherIcon" class="ph ph-cloud-sun weather-icon-lg"></i>
                <div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <span id="weatherTemp" class="weather-temp">--Â°</span>
                        <select id="citySelect" class="weather-city-select interactive" onclick="event.stopPropagation()">
                            <option value="auto">ğŸ“ è‡ªå‹•åµæ¸¬</option>
                            <option value="25.033,121.565">Taipei</option>
                            <option value="24.147,120.673">Taichung</option>
                            <option value="22.627,120.301">Kaohsiung</option>
                            <option value="24.813,120.967">Hsinchu</option>
                            <option value="22.999,120.226">Tainan</option>
                            <option value="35.689,139.691">Tokyo</option>
                            <option value="40.712,-74.006">New York</option>
                            <option value="51.507,-0.127">London</option>
                        </select>
                    </div>
                    <div class="weather-meta">
                        <span id="weatherDesc">è¼‰å…¥ä¸­...</span>
                        <span id="weatherFeels">é«”æ„Ÿ --Â°</span>
                    </div>
                </div>
            </div>
            <i class="ph ph-caret-down toggle-arrow interactive" style="font-size:24px;"></i>
        </div>
        
        <div class="weather-advice">
             <i class="ph ph-coat-hanger" style="font-size:1.5em; flex-shrink:0; margin-top:2px;"></i>
             <span id="clothingAdvice">æ­£åœ¨åˆ†æå¤©æ°£ç‹€æ³...</span>
        </div>

        <div class="weather-details">
            <div class="detail-grid">
                <div class="detail-item">
                    <span class="detail-label">ç´«å¤–ç·š (UV)</span>
                    <span class="detail-val" id="uvIndex">--</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">é¢¨é€Ÿ (Wind)</span>
                    <span class="detail-val" id="windSpeed">-- km/h</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">æ—¥å‡º / æ—¥è½</span>
                    <span class="detail-val" id="sunTime" style="font-size:0.95em">-- : --</span>
                </div>
            </div>
            <div style="font-size:0.8em; opacity:0.7; margin-bottom:5px;">æœªä¾† 7 æ—¥é å ±</div>
            <div class="forecast-grid" id="forecastGrid"></div>
        </div>
    </div>

    <div class="subtitle" style="margin-top:20px; font-size: 0.85em;">
      <span data-i18n="usage">ğŸ¯ ä½¿ç”¨èªªæ˜ï¼š</span>
      <ul style="margin: 5px 0 0 20px; padding:0;">
        <li data-i18n="tip1">æ”¯æ´å¤šè¡Œè¼¸å…¥ï¼Œç´«è‰²æŒ‰éˆ•å¯ä¸€éµå…¨é–‹ã€‚</li>
        <li data-i18n="tip2">é»æ“Šå¤©æ°£å¡ç‰‡å¯å±•é–‹æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚</li>
        <li data-i18n="tip3">ç•ªèŒ„é˜æ…¢é€Ÿæ‹–æ›³å¯å¾®èª¿æ™‚é–“ï¼Œå¿«é€Ÿæ‹–æ›³å¯å¤§å¹…èª¿æ•´ã€‚</li>
      </ul>
    </div>
  </div>

  <div style="display:flex; flex-direction: column; gap:30px;">
    
    <div class="glass-card" id="clockCard" style="padding: 25px; align-items: center; justify-content: center;">
      <div class="clock-container"></div>
      <div class="clock-hint" style="font-size: 0.7em; opacity: 0.5; margin-top:5px;">Click to switch</div>
    </div>

    <div class="glass-card">
      <div class="pomo-container">
        <svg class="ring-svg" viewBox="0 0 220 220">
          <defs>
            <linearGradient id="gradientStroke" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#00c6fb" />
              <stop offset="100%" stop-color="#005bea" />
            </linearGradient>
          </defs>
          <circle class="ring-track" cx="110" cy="110" r="100"></circle>
          <circle class="ring-progress" id="ringProgress" cx="110" cy="110" r="100"></circle>
        </svg>
        <div class="ring-overlay" id="ringOverlay"></div>
        <div class="ring-handle" id="ringHandle"></div>
        
        <div class="time-display">
          <div id="timeLeft">30:00</div>
          <div class="time-label" data-i18n="dragTip">æ‹–æ›³èª¿æ•´</div>
        </div>
      </div>

      <div class="pomo-controls">
        <button class="search-button interactive" id="startBtn" data-i18n="start">é–‹å§‹</button>
        <button class="search-button interactive" id="resetBtn" data-i18n="reset">é‡ç½®</button>
      </div>
    </div>

  </div>
</div>

<script>
// ===================================
// 1. Cursor & Interaction
// ===================================
const cursor = document.getElementById('customCursor');
let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0;
const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

if (!isTouchDevice) {
    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX; mouseY = e.clientY;
      if (isDragging) handleDrag(e.clientX, e.clientY);
    });

    function animateCursor() {
      const dt = 0.2; 
      cursorX += (mouseX - cursorX) * dt;
      cursorY += (mouseY - cursorY) * dt;
      cursor.style.left = cursorX + 'px';
      cursor.style.top = cursorY + 'px';
      requestAnimationFrame(animateCursor);
    }
    animateCursor();
}

function initInteractive() {
    if(isTouchDevice) return;
    
    document.querySelectorAll('.interactive').forEach(el => {
      el.removeEventListener('mouseenter', null); 
      el.addEventListener('mouseenter', () => {
        document.body.classList.add('hover-active');
        const rect = el.getBoundingClientRect();
        cursor.style.width = (rect.width + 10) + 'px';
        cursor.style.height = (rect.height + 10) + 'px';
        cursor.style.borderRadius = getComputedStyle(el).borderRadius;
      });
      el.addEventListener('mouseleave', () => {
        document.body.classList.remove('hover-active');
        cursor.style.width = 'var(--cursor-size)';
        cursor.style.height = 'var(--cursor-size)';
        cursor.style.borderRadius = '50%';
        el.style.transform = 'translate(0, 0)';
      });
      el.addEventListener('mousemove', (e) => {
        const rect = el.getBoundingClientRect();
        const centerX = rect.left + rect.width/2;
        const centerY = rect.top + rect.height/2;
        el.style.transform = `translate(${(e.clientX - centerX)*0.15}px, ${(e.clientY - centerY)*0.15}px)`;
      });
    });
}
initInteractive();

// ===================================
// 2. Search Engine Functions & Logic
// ===================================
const DICT_URLS = [
  "https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/",
  "https://yun.dreye.com/dict_new/dict.php?w="
];
const YOUTUBE_URL = "https://www.youtube.com/results?search_query=";

const statusBoard = document.getElementById('statusBoard');
const stProgress = document.getElementById('stProgress');
const stTotalTime = document.getElementById('stTotalTime');
const stRemainTime = document.getElementById('stRemainTime');

function getLines() {
    const input = document.getElementById('wordInput').value.trim();
    if(!input) return [];
    return input.split('\n').map(w => w.trim()).filter(w => w);
}

function wait(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

function randomRange(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function formatTime(seconds) {
    if (seconds < 60) return `${seconds.toFixed(0)}s`;
    const m = Math.floor(seconds / 60);
    const s = Math.floor(seconds % 60);
    return `${m}m ${s}s`;
}

function updateStatus(opened, total, estTotalSec, remainSec) {
    statusBoard.classList.add('active');
    stProgress.textContent = `${opened} / ${total}`;
    stTotalTime.textContent = formatTime(estTotalSec);
    stRemainTime.textContent = remainSec <= 0 ? 'å®Œæˆ' : formatTime(remainSec);
}

async function processBatch(type) {
    const list = getLines();
    const total = list.length;
    
    if (total === 0) return;

    if (total > 10 && isTouchDevice) {
        alert("âš ï¸ æé†’ï¼šåœ¨æ‰‹æ©Ÿä¸Šæ‰¹é‡é–‹å•Ÿå¤§é‡åˆ†é å¯èƒ½æœƒè¢«ç€è¦½å™¨é˜»æ“‹ã€‚");
    }

    let openedCount = 0;
    
    // --- èª¿æ•´é–‹å•Ÿé–“éš”çš„é‚è¼¯ (New Interval Logic) ---
    let delayMin, delayMax;
    
    if (total <= 30) {
        delayMin = 200; delayMax = 300; // 30å€‹ä»¥å…§ï¼šç¶­æŒç¾ç‹€ (å¿«)
    } else if (total <= 75) {
        delayMin = 1000; delayMax = 3000; // 31-75å€‹ï¼š1~3ç§’
    } else {
        delayMin = 9000; delayMax = 11000; // >75å€‹ï¼š9~11ç§’
    }

    // è¨ˆç®—é è¨ˆç¸½æ™‚é–“ (Estimated Total Time)
    // ä½¿ç”¨å¹³å‡å»¶é²æ™‚é–“ä¾†ä¼°ç®—ï¼š (min+max)/2 * (total items)
    const avgDelayMs = (delayMin + delayMax) / 2;
    const estTotalSec = (total * avgDelayMs) / 1000;

    updateStatus(0, total, estTotalSec, estTotalSec);

    for (let i = 0; i < total; i++) {
        const w = list[i];
        let url = "";

        if (type === 'web') {
            // è‡ªå‹•åµæ¸¬ç¶²å€æˆ–æœå°‹ (Auto Detect URL)
            const isUrl = w.match(/^(http|https):\/\//i) || w.match(/^www\./i) || w.includes('.com') || w.includes('.org') || w.includes('.net') || w.includes('.tw') || w.includes('.io');
            if (isUrl) url = w.match(/^(http|https):\/\//i) ? w : 'http://' + w;
            else url = "https://www.google.com/search?q=" + encodeURIComponent(w);
        } else if (type === 'youtube') {
            url = YOUTUBE_URL + encodeURIComponent(w);
        } else if (type === 'dict0') {
            url = DICT_URLS[0] + w.toLowerCase().replace(/\s/g, '-');
        } else if (type === 'dict1') {
            url = DICT_URLS[1] + w.replace(/\s/g, '+') + "&hidden_codepage=01";
        }

        const win = window.open(url, '_blank');
        if (win) {
            try { win.blur(); } catch(e){}
            try { window.focus(); } catch(e){}
            setTimeout(() => { try { window.focus(); } catch(e){} }, 100);
        } else {
            alert("âš ï¸ ç€è¦½å™¨æ””æˆªäº†å½ˆå‡ºè¦–çª—ï¼Œè«‹å…è¨±æœ¬ç¶²ç«™é–‹å•Ÿå½ˆå‡ºè¦–çª—ã€‚");
            break;
        }

        openedCount++;
        const remainCount = total - openedCount;
        
        // æ›´æ–°å‰©é¤˜æ™‚é–“ä¼°ç®—
        const remainSec = (remainCount * avgDelayMs) / 1000;
        
        if (remainCount > 0) {
            let delay = randomRange(delayMin, delayMax);
            let steps = 10;
            let stepTime = delay / steps;
            
            // å€’æ•¸å‹•ç•«
            for(let t=steps; t>0; t--) {
                // é¡¯ç¤ºçš„å‰©é¤˜æ™‚é–“ = (å‰©é¤˜é …ç›®é ä¼°æ™‚é–“) + (ç•¶å‰é …ç›®Delayå‰©é¤˜æ™‚é–“)
                const currentDelayLeft = (t * stepTime) / 1000;
                updateStatus(openedCount, total, estTotalSec, remainSec + currentDelayLeft);
                await wait(stepTime);
            }
        } else {
            updateStatus(openedCount, total, estTotalSec, 0);
            setTimeout(() => {
                statusBoard.classList.remove('active');
            }, 3000);
        }
    }
}

function searchDict(index) { processBatch('dict' + index); }
function searchYoutube() { processBatch('youtube'); }
function searchWeb() { processBatch('web'); }
function searchAll() {
  searchDict(0);
  setTimeout(() => searchDict(1), 500);
}

// ===================================
// 3. Flip Clock 
// ===================================
const clockContainer = document.querySelector('.clock-container');
let clockMode = 2; 
let prevS = -1, prevM = -1, prevH = -1;

function pad(n) { return n.toString().padStart(2, '0'); }

function renderClock() {
  const now = new Date();
  const h = now.getHours();
  const m = now.getMinutes();
  const s = now.getSeconds();

  if (clockMode === 0) { 
    clockContainer.innerHTML = `<div class="clock-digital">${pad(h)}:${pad(m)}:${pad(s)}</div>`;
  } else if (clockMode === 1) { 
    const secDeg = (s / 60) * 360;
    const minDeg = ((m + s/60) / 60) * 360;
    const hourDeg = ((h % 12 + m/60) / 12) * 360;
    clockContainer.innerHTML = `
      <div class="clock-analog">
        <div class="hand hour" style="transform: translateX(-50%) rotate(${hourDeg}deg)"></div>
        <div class="hand min" style="transform: translateX(-50%) rotate(${minDeg}deg)"></div>
        <div class="hand sec" style="transform: translateX(-50%) rotate(${secDeg}deg)"></div>
        <div class="center-dot"></div>
      </div>`;
  } else { 
    if (!clockContainer.querySelector('.clock-flip')) {
      clockContainer.innerHTML = `
        <div class="clock-flip">
          ${createFlipUnit('flipH', h)} : ${createFlipUnit('flipM', m)} : ${createFlipUnit('flipS', s)}
        </div>`;
      prevH = h; prevM = m; prevS = s;
    } else {
      updateFlip('flipH', h, prevH);
      updateFlip('flipM', m, prevM);
      updateFlip('flipS', s, prevS);
    }
  }
  prevH = h; prevM = m; prevS = s;
}

function createFlipUnit(id, val) {
    const v = pad(val);
    return `
    <div class="flip-unit" id="${id}">
        <div class="flip-top">${v}</div>
        <div class="flip-bottom">${v}</div>
        <div class="flip-leaf-front">${v}</div>
        <div class="flip-leaf-back">${v}</div>
    </div>`;
}

function updateFlip(id, current, prev) {
    if (current === prev) return;
    const el = document.getElementById(id);
    const currStr = pad(current);
    const prevStr = pad(prev);

    const top = el.querySelector('.flip-top');
    const bottom = el.querySelector('.flip-bottom');
    const front = el.querySelector('.flip-leaf-front');
    const back = el.querySelector('.flip-leaf-back');

    el.classList.remove('flipping');
    void el.offsetWidth;

    top.textContent = currStr;
    bottom.textContent = prevStr;
    front.textContent = prevStr;
    back.textContent = currStr;

    el.classList.add('flipping');

    setTimeout(() => {
        bottom.textContent = currStr;
        front.textContent = currStr;
    }, 500);
}

document.getElementById('clockCard').addEventListener('click', () => {
  clockMode = (clockMode + 1) % 3;
  clockContainer.innerHTML = '';
  prevS = -1; 
  renderClock();
});
setInterval(renderClock, 1000);
renderClock();

// ===================================
// 4. Weather Module (Edit for minmilo83)
// ===================================
const weatherCard = document.getElementById('weatherCard');
const citySelect = document.getElementById('citySelect');

function toggleWeather() {
    weatherCard.classList.toggle('expanded');
}

// å¤©æ°£ä»£ç¢¼å°æ‡‰è¡¨
function getWeatherInfo(code, isDay = 1) {
    if(code === 0) return { icon: isDay ? 'ph-sun' : 'ph-moon', text: 'æ™´æœ—' };
    if(code === 1) return { icon: isDay ? 'ph-sun' : 'ph-moon-stars', text: 'å¤§è‡´æ™´æœ—' };
    if(code === 2) return { icon: isDay ? 'ph-cloud-sun' : 'ph-cloud-moon', text: 'å±€éƒ¨å¤šé›²' };
    if(code === 3) return { icon: 'ph-cloud', text: 'é™°å¤©' };
    if(code === 45) return { icon: 'ph-waves', text: 'æœ‰éœ§' }; 
    if(code === 48) return { icon: 'ph-snowflake', text: 'éœ§æ·' }; 
    if(code >= 51 && code <= 55) return { icon: 'ph-cloud-rain', text: 'æ¯›æ¯›é›¨' }; 
    if(code >= 61 && code <= 65) return { icon: 'ph-cloud-rain', text: 'ä¸‹é›¨' }; 
    if(code >= 66 && code <= 67) return { icon: 'ph-cloud-snow', text: 'é›¨å¤¾é›ª' }; 
    if(code >= 80 && code <= 82) return { icon: 'ph-cloud-rain', text: 'é™£é›¨' }; 
    if(code >= 95) return { icon: 'ph-cloud-lightning', text: 'é›·é›¨' }; 
    if(code >= 71 && code <= 77) return { icon: 'ph-snowflake', text: 'ä¸‹é›ª' };
    if(code >= 85 && code <= 86) return { icon: 'ph-snowflake', text: 'é™£é›ª' };

    return { icon: 'ph-question', text: 'æœªçŸ¥å¤©æ°£' };
}

// ----------------------------------------------------
// minmilo83's Enhanced Weather Matrix Logic [2026 Updated]
// ----------------------------------------------------
const WEATHER_DB = {
    // åŸºç¤å¤©æ°£æè¿°èˆ‡å¿ƒæƒ… (Source: Reference 1)
    weather: {
        sunny: {
            desc: [
                "è¬é‡Œç„¡é›²çš„æ¹›è—å¤©ç©ºï¼Œé™½å…‰æ¯«ç„¡ä¿ç•™åœ°ç‘è½ã€‚",
                "é™½å…‰æ™®ç…§ï¼Œæ•´å€‹åŸå¸‚éƒ½è¢«é‡‘è‰²çš„å…‰èŠ’ç± ç½©ã€‚",
                "å¤©ç©ºè—å¾—åƒå¯¶çŸ³ä¸€æ¨£ï¼Œèƒ½è¦‹åº¦æ¥µä½³ã€‚",
                "é™½å…‰åœ¨é›²æœµé–“ç©èº²è²“è²“ï¼Œå…‰ç·šæŸ”å’Œè€Œèˆ’é©ã€‚",
                "æ¸…æ¾ˆæ˜äº®çš„å¤©ç©ºï¼Œè®“äººå¿ƒæƒ…ä¹Ÿè·Ÿè‘—é–‹é—Šèµ·ä¾†ã€‚"
            ],
            mood: ["æ´»åŠ›å……æ²›ã€ç©æ¥µ", "å……æ»¿å¸Œæœ›ã€æ¸…æ–°", "æ„œæ„ã€èˆ’é©", "æ”¾é¬†ã€æ„‰æ‚…"],
            advice: [
                "ç›¡æƒ…äº«å—æˆ¶å¤–æ´»å‹•ï¼Œæ›¬æ›¬å¤ªé™½è£œå……ç¶­ç”Ÿç´ Dã€‚",
                "å¤©æ°£æ¥µä½³ï¼Œé©åˆé‡é¤æˆ–å»å…¬åœ’èµ°èµ°ã€‚",
                "æ—©èµ·æ™¨è·‘çš„æœ€ä½³æ™‚åˆ»ï¼Œæ„Ÿå—åŸå¸‚çš„ç”¦é†’ã€‚",
                "é©åˆæ”å½±ï¼Œæ•æ‰å…‰å½±çš„è®ŠåŒ–ã€‚",
                "æ‰¾å€‹è¦–é‡é–‹é—Šçš„åœ°æ–¹ï¼Œäº«å—é€™ç¾å¥½çš„æ™‚å…‰ã€‚"
            ]
        },
        cloudy: {
            desc: [
                "æ•´ç‰‡å¤©ç©ºè¢«ç°ç™½é›²å±¤è¦†è“‹ï¼Œå…‰ç·šå¹³æ·¡ã€‚",
                "è—å¤©èˆ‡ç™½é›²å„ä½”ä¸€åŠï¼Œå¤©ç©ºå±¤æ¬¡è±å¯Œã€‚",
                "é›²å±¤è¼ƒåšï¼Œé™½å…‰å¶çˆ¾éœ²è‡‰ï¼Œæ°£æº«ç›¸å°ç©©å®šã€‚",
                "å¤©ç©ºç°æ¿›æ¿›çš„ï¼Œé›²å±¤ä½å‚ï¼Œå½·å½¿ä¼¸æ‰‹å¯åŠã€‚",
                "é™½å…‰è¢«é›²å±¤éæ¿¾å¾Œè®Šå¾—æŸ”å’Œï¼Œä¸å†åˆºçœ¼ã€‚"
            ],
            mood: ["æ²ˆç©©ã€ä½èª¿", "å¹³å’Œã€è‡ªåœ¨", "æ…µæ‡¶ã€å†·éœ", "å…§æ–‚ã€å®‰éœ"],
            advice: [
                "ç´«å¤–ç·šé›–å¼±ä½†ä¸å¯è¼•å¿½ï¼Œé©åˆå®¤å…§æ´»å‹•æˆ–é–±è®€ã€‚",
                "é©åˆé€›è¡—æˆ–åœ¨æˆ¶å¤–å’–å•¡å»³å·¥ä½œã€‚",
                "é€™ç¨®å…‰ç·šéå¸¸é©åˆæ‹æ”äººåƒï¼Œé™°å½±æŸ”å’Œã€‚",
                "æ°£æº«é©å®œï¼Œå»æ²³æ¿±æ•£æ­¥æ˜¯å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚",
                "å¸¶è‘—ä¸€æœ¬æ›¸å»å’–å•¡å»³ï¼Œäº«å—æ‚ é–’çš„åˆå¾Œã€‚"
            ]
        },
        rain: {
            desc: [
                "ç©©å®šçš„é›¨å‹¢æ»´ç­”ä½œéŸ¿ï¼Œæ´—åˆ·è‘—åŸå¸‚çš„å¡µåŸƒã€‚",
                "ç©ºæ°£ä¸­é£„è‘—ä¼¼æœ‰è‹¥ç„¡çš„ç´°é›¨ï¼Œåœ°é¢å¾®æ¿•ã€‚",
                "é›¨æ°´å¦‚å€’çŒèˆ¬å‚¾ç€‰ï¼Œè¦–ç·šæ¨¡ç³Šï¼Œè¡—é“è®Šæˆå°æ²³ã€‚",
                "å¤©ç©ºç°æš—ï¼Œé›¨çµ²ç¶¿å¯†ï¼Œä¸–ç•Œå½·å½¿è¢«éš”çµ•ã€‚",
                "é™£é›¨ä¾†å»åŒ†åŒ†ï¼Œç©ºæ°£ä¸­ç€°æ¼«è‘—æ³¥åœŸçš„æ°£æ¯ã€‚"
            ],
            mood: ["å…§çœã€å¹³éœ", "è©©æ„ã€æ†‚é¬±", "ç„¦æ…®ã€ç…©èº", "æ²‰æ¾±ã€æ€è€ƒ"],
            advice: [
                "å¿…å‚™é›¨å…·ï¼Œç©¿è‘—é˜²æ»‘é‹é¡ï¼Œé©åˆåœ¨å®¤å…§è½é›¨ã€‚",
                "ä¸€æŠŠè¼•ä¾¿å‚˜æˆ–é˜²æ½‘æ°´å¤–å¥—å³å¯æ‡‰ä»˜ã€‚",
                "é¿å…å‰å¾€å±±å€æˆ–ä½çªªè™•ï¼Œé–‹è»Šè«‹æ”¾æ…¢é€Ÿåº¦ã€‚",
                "é›¨å¤©è·¯æ»‘ï¼Œé¨è»Šæˆ–é–‹è»Šéƒ½è¦ä¿æŒå®‰å…¨è·é›¢ã€‚",
                "åœ¨çª—é‚Šæ³¡æ¯ç†±èŒ¶ï¼Œæ¬£è³é›¨æ™¯ä¹Ÿæ˜¯ä¸€ç¨®äº«å—ã€‚"
            ]
        },
        thunder: {
            desc: [
                "æ‚¶ç†±çš„ç©ºæ°£ä¸­é†é‡€è‘—é¢¨æš´ï¼Œé è™•é›·è²éš±éš±ä½œéŸ¿ã€‚",
                "é–ƒé›»åŠƒç ´å¤©éš›ä¼´éš¨è½Ÿéš†é›·è²ï¼Œå¤§æ°£æ¥µä¸ç©©å®šã€‚",
                "ç‹‚é¢¨æš´é›¨å¤¾é›œè‘—é›·é³´ï¼Œå¤©ç©ºå¿½æ˜å¿½æš—ã€‚",
                "é›·è²å¤§ä½œï¼Œå½·å½¿å¤©ç©ºåœ¨æ€’å¼ï¼Œé›¨å‹¢é©šäººã€‚"
            ],
            mood: ["é©šæã€æ•¬ç•", "ç·Šå¼µã€å£“è¿«", "éœ‡æ’¼ã€æ•¬ç•"],
            advice: [
                "âš¡ å±éšªï¼šé é›¢ç©ºæ› åœ°èˆ‡æ¨¹ä¸‹ï¼Œå„˜é€Ÿé€²å…¥å®¤å…§èº²é¿ã€‚",
                "æ‹”æ‰ä¸å¿…è¦çš„é›»å™¨æ’é ­ï¼Œé¿å…é›·æ“Šçªæ³¢ã€‚",
                "æš«æ™‚åˆ¥å‡ºé–€äº†ï¼å¦‚æœåœ¨æˆ¶å¤–ï¼Œè«‹å°‹æ‰¾å®‰å…¨å»ºç¯‰ç‰©ã€‚",
                "æ³¨æ„è±ªå¤§é›¨å¯èƒ½é€ æˆçš„ç©æ°´ï¼Œé é›¢ä½çªªåœ°å€ã€‚"
            ]
        },
        fog: {
            desc: [
                "ç™½èŒ«èŒ«ä¸€ç‰‡ï¼ŒåŸå¸‚éš±æ²’åœ¨è¿·éœ§ä¹‹ä¸­ï¼Œèƒ½è¦‹åº¦ä½ã€‚",
                "é æ–¹æ™¯ç‰©åƒæ˜¯è’™ä¸Šä¸€å±¤é«’é«’çš„æ¿¾é¡ï¼Œç©ºæ°£æ··æ¿ã€‚",
                "æ™¨éœ§ç¹šç¹ï¼Œå»ºç¯‰ç‰©è‹¥éš±è‹¥ç¾ï¼Œå®›å¦‚ä»™å¢ƒã€‚",
                "æ¿ƒéœ§é–åŸï¼Œè¦–ç·šä¸æ¸…ï¼Œä¸–ç•Œè®Šå¾—æ¨¡ç³Šè€Œç¥ç§˜ã€‚"
            ],
            mood: ["ç¥ç§˜ã€è¿·æƒ˜", "é¬±æ‚¶ã€çª’æ¯æ„Ÿ", "å¤¢å¹»ã€æœ¦æœ§"],
            advice: [
                "é–‹è»Šè«‹é–‹éœ§ç‡ˆï¼Œå°å¿ƒè·¯æ»‘èˆ‡è¦–ç·šä¸æ¸…ã€‚",
                "èƒ½è¦‹åº¦å·®ï¼Œéé¦¬è·¯è«‹ç‰¹åˆ¥ç•™æ„ä¾†è»Šã€‚",
                "å¦‚æœç©ºæ°£å“è³ªä¸ä½³ï¼ˆéœ¾ï¼‰ï¼Œè«‹ä½©æˆ´å£ç½©ã€‚",
                "æ”¾æ…¢è…³æ­¥ï¼Œæ³¨æ„å‘¨é­ç’°å¢ƒè®ŠåŒ–ã€‚"
            ]
        },
        snow: {
            desc: [
                "ç™½è‰²é›ªèŠ±ç·©ç·©é£„è½ï¼Œä¸–ç•Œæ¼¸æ¼¸è®ŠæˆéŠ€ç™½è‰²ã€‚",
                "ç‹‚é¢¨æ²è‘—å¤§é›ªï¼Œè¦–ç·šå¹¾ä¹ç‚ºé›¶ï¼Œèˆ‰æ­¥ç¶­è‰±ã€‚",
                "å†°å†·çš„ç©ºæ°£ä¸­é£„è‘—é›ªèŠ±ï¼Œå‘¼å¸éƒ½åŒ–ä½œç™½ç…™ã€‚",
                "ç©é›ªè¦†è“‹äº†å¤§åœ°ï¼Œå‘¨é­è®Šå¾—ç•°å¸¸å¯§éœã€‚"
            ],
            mood: ["ç´”æ½”ã€ç«¥å¿ƒ", "åš´å³»ã€å­¤ç«‹", "å¯§éœã€å¹³å’Œ"],
            advice: [
                "æ³¨æ„ä¿æš–ï¼Œæˆ´ä¸Šæ‰‹å¥—ï¼Œäº«å—å †é›ªäººçš„æ¨‚è¶£ã€‚",
                "â„ï¸ ç”Ÿå­˜æ¨¡å¼ï¼šéå¿…è¦ä¸å‡ºé–€ï¼Œå„²å‚™ç³§é£Ÿèˆ‡æš–æ°£ã€‚",
                "é“è·¯å¯èƒ½çµå†°ï¼ˆé»‘å†°ï¼‰ï¼Œè¡Œèµ°èˆ‡é§•é§›éœ€è¬åˆ†å°å¿ƒã€‚",
                "ç©¿è‘—é˜²æ°´é˜²æ»‘çš„é‹å­ï¼Œä»¥å…æ»‘å€’å—å‚·ã€‚"
            ]
        }
    },
    // æº«åº¦èˆ‡é«”æ„Ÿæ„Ÿå®˜åº« (Source: Reference 2)
    temp: {
        extreme_hot: { // > 36
            desc: ["é…·æš‘é›£è€ï¼Œèµ°åœ¨è·¯ä¸Šä¸€åˆ†é˜å°±æ±—æµæµ¹èƒŒã€‚", "åƒå¾…åœ¨å·¨å‹å¹é¢¨æ©Ÿå‰ï¼ŒæŸæ²¹è·¯é¢è»ŸåŒ–ï¼Œç†±æµªæ‰­æ›²äº†è¦–ç·šã€‚", "åœ°è¡¨å½·å½¿åœ¨ç‡ƒç‡’ï¼Œç©ºæ°£åƒæ»¾ç‡™çš„çƒ™éµè‚ºéƒ¨éš±éš±ä½œç—›ã€‚"],
            advice: ["ğŸŒ¡ï¸ ç”Ÿå­˜è­¦å‘Šï¼šåš´ç¦é•·æ™‚é–“å¤–å‡ºã€‚å¿…é ˆå¾…åœ¨å†·æ°£æˆ¿ã€‚", "å¤šå–æ°´ï¼Œå°‹æ‰¾é™°æ¶¼è™•ï¼Œå»ºè­°éš¨èº«æ”œå¸¶æ‰‹æŒé›»é¢¨æ‰‡ã€‚", "é é˜²ä¸­æš‘æ˜¯é¦–è¦ä»»å‹™ï¼Œç©¿è‘—æœ€è¼•è–„é€æ°£çš„è¡£ç‰©ã€‚"]
        },
        hot: { // 31-35
            desc: ["å…¸å‹çš„å¤æ—¥åˆå¾Œï¼Œæ‚¶ç†±æ„Ÿæ®ä¹‹ä¸å»ã€‚", "ç†±æ°£é€¼äººï¼Œåªè¦ä¸€å‹•å°±æœƒæµæ±—ã€‚", "é™½å…‰ç†±è¾£è¾£çš„ï¼Œç©ºæ°£ä¸­å……æ»¿äº†ç†±èƒ½é‡ã€‚"],
            advice: ["è¼•ä¾¿çŸ­è¢–ã€çŸ­è¤²ã€‚é©åˆå®¤å…§å¹å†·æ°£æˆ–å»æµ·é‚Šæˆ²æ°´ã€‚", "é¿å…åœ¨æ­£åˆæ™‚åˆ†é€²è¡ŒåŠ‡çƒˆé‹å‹•ã€‚", "è¨˜å¾—å¤šè£œå……æ°´åˆ†ï¼Œä»¥å…è„«æ°´ã€‚"]
        },
        warm: { // 26-30
            desc: ["æº«æš–ç¨ç†±ï¼Œé™½å…‰å……è¶³æ™‚æœƒå¾®å¾®å‡ºæ±—ã€‚", "ç©ºæ°£æº«æš–ï¼Œå¾®é¢¨å¹æ‹‚ä¸‹é‚„ç®—èˆ’é©ã€‚", "é©åˆæ´»å‹•çš„æº«åº¦ï¼Œèº«é«”æ„Ÿè¦ºå¾ˆæ”¾é¬†ã€‚"],
            advice: ["çŸ­è¢–æ­é…è–„è¥¯è¡«é˜²æ›¬ã€‚é©åˆå„é¡æˆ¶å¤–æ´»å‹•ã€‚", "å¤©æ°£ä¸éŒ¯ï¼Œå¯ä»¥å»æˆ¶å¤–èµ°èµ°ï¼Œä½†è¦æ³¨æ„é˜²æ›¬ã€‚", "ç©¿è‘—é€æ°£çš„æ£‰éº»æè³ªæœƒå¾ˆèˆ’æœã€‚"]
        },
        comfort: { // 21-25
            desc: ["é»ƒé‡‘æº«åº¦ï¼Œæ¶¼çˆ½èˆ’é©ï¼Œç©ºæ°£ä¸­å¸¶è‘—æ¸…ç”œæ„Ÿã€‚", "ä¸å†·ä¹Ÿä¸ç†±ï¼Œæ˜¯è®“äººæœ€æƒ³å¾…åœ¨æˆ¶å¤–çš„æº«åº¦ã€‚", "å¾®é¢¨è¼•æ‹‚ï¼Œé«”æ„Ÿéå¸¸å®Œç¾ã€‚"],
            advice: ["ğŸ‘• ç©¿è¡£è–å…¸ï¼šé•·è¢–è¥¯è¡«æˆ–è–„ T-shirtï¼Œä¸å†·ä¸ç†±å‰›å‰›å¥½ã€‚", "æŠŠæ¡å¥½å¤©æ°£ï¼Œå»æ•£æ­¥ã€é¨è»Šéƒ½éå¸¸æ£’ã€‚", "ç©¿ä¸€ä»¶è–„å¤–å¥—å‚™ç”¨å³å¯ã€‚"]
        },
        cool: { // 16-20
            desc: ["å¾®å¾®æ¶¼æ„ï¼Œæ—©æ™šæº«å·®é–‹å§‹é¡¯è‘—ã€‚", "ç©ºæ°£æ¸…æ–°è€Œæ¶¼çˆ½ï¼Œè®“äººç²¾ç¥ä¸€æŒ¯ã€‚", "é¢¨å¹éæ™‚æœƒæ„Ÿåˆ°ä¸€çµ²æ¶¼æ„ï¼Œç§‹æ„æ¼¸æ¿ƒã€‚"],
            advice: ["éœ€æ›ä¸Šè–„é•·è¢–åŠ ä¸Šä¸€ä»¶è–„å¤–å¥—ã€‚", "é©åˆæ´‹è”¥å¼ç©¿æ³•ï¼Œæ–¹ä¾¿éš¨æº«åº¦èª¿æ•´ã€‚", "æ—©å‡ºæ™šæ­¸è¨˜å¾—å¤šå¸¶ä¸€ä»¶è¡£æœã€‚"]
        },
        cold: { // 11-15
            desc: ["æ¶¼æ„æ˜é¡¯ï¼Œé¢¨å¹éæ™‚æœƒä¸è‡ªè¦ºç¸®èµ·è„–å­ã€‚", "ç©ºæ°£è®Šå¾—å†°æ¶¼ï¼Œå‘¼å¸æ™‚æ„Ÿè¦ºé¼»è…”å¾®å†·ã€‚", "å¯’æ„æ¼¸ç”Ÿï¼Œè®“äººæƒ³å°‹æ‰¾æº«æš–çš„åœ°æ–¹ã€‚"],
            advice: ["é˜²é¢¨å¤–å¥—ã€é‡ç¹”è¡«ã€‚æ˜¯åƒç«é‹çš„å¥½æ™‚æ©Ÿã€‚", "å‡ºé–€è¨˜å¾—åœä¸Šåœå·¾ï¼Œä¿è­·è„–å­ä¸å—é¢¨å¯’ã€‚", "æ³¨æ„ä¿æš–ï¼Œé¿å…è‘—æ¶¼æ„Ÿå†’ã€‚"]
        },
        freezing: { // 1-10
            desc: ["å¯’æ°£é€¼äººï¼Œæ‰‹è…³é–‹å§‹æ„Ÿåˆ°å†°å†·ã€‚", "å†·å¾¹å¿ƒæ‰‰ï¼Œå‘¼å¸æ™‚æœƒå‘¼å‡ºç™½ç…™ã€‚", "å†°å†·çš„ç©ºæ°£å½·å½¿èƒ½ç©¿é€è¡£ç‰©ã€‚"],
            advice: ["ç™¼ç†±è¡£ã€åšå¤–å¥—ã€æ¯›å¸½ä¸å¯å°‘ã€‚", "â„ï¸ é‡è£é˜²å¯’ï¼Œç¾½çµ¨è¡£ã€åœå·¾ã€æ‰‹å¥—å¿…é ˆå…¨å‰¯æ­¦è£ã€‚", "ä¿æŒèº«é«”ä¹¾ç‡¥æº«æš–ï¼Œå¤šå–ç†±æ°´ã€‚"]
        },
        polar: { // <= 0
            desc: ["å†°å°ä¸–ç•Œï¼Œåœ°é¢å¯èƒ½çµå†°ï¼Œç©ºæ°£ä¹¾å†·åˆºéª¨ã€‚", "é¼»è…”å…§çš„æ¿•æ°£æœƒç¬é–“çµå†°ï¼Œçœ¼ç«æ¯›å¯èƒ½æ›éœœã€‚", "æ¥µåº¦é…·å¯’ï¼Œæš´éœ²åœ¨å¤–çš„çš®è†šæœƒæ„Ÿåˆ°åˆºç—›ã€‚"],
            advice: ["å°ˆæ¥­é˜²å¯’æœï¼Œæ³¨æ„èµ°è·¯é˜²æ»‘ï¼ˆé»‘å†°è­¦å‘Šï¼‰ã€‚", "æ´‹è”¥å¼ç©¿æ³•æ¥µé™ï¼Œæš–æš–åŒ…å¿…å‚™ã€‚æ¸›å°‘çš®è†šå¤–éœ²ã€‚", "é™¤éå¿…è¦ï¼Œå¦å‰‡ç›¡é‡å¾…åœ¨æº«æš–çš„å®¤å…§ã€‚"]
        }
    },
    // å‹•æ…‹ç–ŠåŠ é‚è¼¯ (Source: Reference 1 & 2)
    modifiers: {
        wind: ["ğŸŒ¬ï¸ å¤–é¢é¢¨å¾ˆå¤§ï¼Œé«”æ„Ÿæº«åº¦æœƒæ›´ä½ï¼Œå»ºè­°ç©¿è‘—é˜²é¢¨å¤–å¥—ã€‚", "å¼·é¢¨å‘¼å˜¯ï¼Œè·¯æ¨¹æ–æ™ƒï¼Œå¸½å­éƒ½å¿«æˆ´ä¸ä½ã€‚", "é¿å…ç©¿è‘—é£„é€¸è£™è£ï¼Œæ©Ÿè»Šæ—è«‹æ³¨æ„å´é¢¨ã€‚"],
        uv: ["â˜€ï¸ ç´«å¤–ç·šæ¥µå¼· (Extreme)ï¼Œè«‹å‹™å¿…æˆ´å¸½ã€å¢¨é¡ä¸¦å¡—æŠ¹é˜²æ›¬ã€‚", "ğŸ˜ ç´«å¤–ç·šåé«˜ï¼Œå¤–å‡ºå»ºè­°åšå¥½é˜²æ›¬æªæ–½ã€‚", "é™½å…‰å’¬äººï¼Œçš®è†šæœ‰ç¼ç†±æ„Ÿï¼Œè«‹æ’é™½å‚˜ã€‚"],
        aqi_bad: ["ğŸ˜· ç©ºæ°£ä¸­æœ‰æ˜é¡¯çš„ç•°å‘³èˆ‡å¡µåœŸæ„Ÿï¼Œå®›å¦‚æ¯’æ°£å®¤ã€‚", "å¤©ç©ºæœ‰é»ç°æ¿›æ¿›ï¼Œå‘¼å¸é“ç¨å¾®æ•æ„Ÿã€‚", "AQIè­¦æˆ’ï¼šè«‹ä½©æˆ´å£ç½©ï¼Œæ¸›å°‘æˆ¶å¤–é€—ç•™æ™‚é–“ã€‚"],
        tsunami: ["ğŸŒŠ æµ·å˜¯æ³¨æ„ï¼šé é›¢æµ·ç˜ï¼Œæ³¨æ„å»£æ’­ã€‚", "å¿«è·‘ï¼å¾€é«˜è™•è·‘ï¼ä¸è¦ç®¡å¤©æ°£å¦‚ä½•äº†ï¼Œä¿å‘½è¦ç·Šï¼"],
        earthquake: ["âš  åœ°é¢æœ‰äº›è¨±æ™ƒå‹•ï¼Œåƒæ˜¯æœ‰å¤§å‹è»Šç¶“éã€‚", "åœ°éœ‡ï¼ç«‹å³æ¡å–è¶´ä¸‹ã€æ©è­·ã€ç©©ä½ (Drop, Cover, Hold on)ã€‚"]
    }
};

function getRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

function generateWeatherAdvice(temp, code, windSpeed, uvIndex) {
    // 1. æ±ºå®šå¤©æ°£é¡å‹ (Map WMO Code to Type)
    let type = 'cloudy';
    if (code <= 1) type = 'sunny';
    else if (code <= 3) type = 'cloudy';
    else if (code == 45 || code == 48) type = 'fog';
    else if (code >= 95) type = 'thunder';
    else if (code >= 71 || (code >= 85 && code <= 86)) type = 'snow';
    else type = 'rain'; // Default rain for other codes

    // 2. æ±ºå®šæº«åº¦å€é–“
    let tempZone = 'comfort';
    if (temp > 35) tempZone = 'extreme_hot';
    else if (temp > 30) tempZone = 'hot';
    else if (temp > 25) tempZone = 'warm';
    else if (temp > 20) tempZone = 'comfort';
    else if (temp > 15) tempZone = 'cool';
    else if (temp > 10) tempZone = 'cold';
    else if (temp > 0) tempZone = 'freezing';
    else tempZone = 'polar';

    // 3. éš¨æ©Ÿç”Ÿæˆæ¨¡æ“¬ AQI (å› ç‚º API æœªæä¾›ï¼Œç‚ºäº†å±•ç¤ºçŸ©é™£é‚è¼¯è€Œæ¨¡æ“¬)
    const simulatedAQI = Math.floor(Math.random() * 160); // 0-160
    
    // 4. é–‹å§‹çµ„åˆæ–‡æœ¬
    let baseDesc = getRandom(WEATHER_DB.weather[type].desc);
    let mood = getRandom(WEATHER_DB.weather[type].mood);
    let tempDesc = getRandom(WEATHER_DB.temp[tempZone].desc);
    let mainAdvice = getRandom(WEATHER_DB.weather[type].advice); // å„ªå…ˆä½¿ç”¨å¤©æ°£å»ºè­°
    
    // è‹¥æ¥µç«¯æº«åº¦ï¼Œå„ªå…ˆä½¿ç”¨æº«åº¦å»ºè­°
    if (tempZone === 'extreme_hot' || tempZone === 'polar' || tempZone === 'freezing') {
        mainAdvice = getRandom(WEATHER_DB.temp[tempZone].advice);
    }

    // 5. å‹•æ…‹ç–ŠåŠ  (Modifiers)
    let warnings = [];
    
    // é¢¨é€Ÿç–ŠåŠ 
    if (windSpeed > 30) {
        warnings.push(getRandom(WEATHER_DB.modifiers.wind));
    }
    
    // UV ç–ŠåŠ  (åƒ…åœ¨æ™´å¤©æˆ–å¤šé›²ä¸” UV é«˜æ™‚)
    if (uvIndex >= 6 && (type === 'sunny' || type === 'cloudy')) {
        warnings.push(getRandom(WEATHER_DB.modifiers.uv));
    }

    // AQI ç–ŠåŠ  (æ¨¡æ“¬)
    if (simulatedAQI > 100) {
        warnings.push(getRandom(WEATHER_DB.modifiers.aqi_bad));
    }

    // 6. æœ€çµ‚çµ„åˆ HTML
    let finalHtml = `
        <div style="margin-bottom:6px;"><b>${baseDesc}</b></div>
        <div style="font-size:0.9em; opacity:0.85; margin-bottom:8px;">${tempDesc} å¿ƒæƒ…ï¼š${mood}</div>
        <div style="border-top:1px solid rgba(255,255,255,0.3); padding-top:8px;">
            ğŸ’¡ ${mainAdvice}
        </div>
    `;

    if (warnings.length > 0) {
        finalHtml += `<div style="margin-top:8px; color:#ff6b6b; font-weight:600; font-size:0.9em;">
            ${warnings.join("<br/>")}
        </div>`;
    }

    return finalHtml;
}

async function fetchWeather() {
    let lat, lon;
    const val = citySelect.value;
    
    if (val === 'auto') {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (pos) => { getWeatherData(pos.coords.latitude, pos.coords.longitude); },
                (err) => { 
                    citySelect.value = "25.033,121.565"; 
                    getWeatherData(25.033, 121.565);
                }
            );
            return;
        } else {
            citySelect.value = "25.033,121.565"; 
            getWeatherData(25.033, 121.565);
            return;
        }
    } else {
        [lat, lon] = val.split(',');
        getWeatherData(lat, lon);
    }
}

async function getWeatherData(lat, lon) {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,apparent_temperature,weather_code,is_day,windspeed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max&timezone=auto`;
    try {
        const res = await fetch(url);
        const data = await res.json();
        renderWeather(data);
    } catch(e) {
        console.error(e);
        document.getElementById('weatherDesc').textContent = "æ›´æ–°å¤±æ•—";
        document.getElementById('clothingAdvice').textContent = "ç„¡æ³•å–å¾—å¤©æ°£è³‡è¨Šï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚";
    }
}

function renderWeather(data) {
    const current = data.current;
    const daily = data.daily;
    const info = getWeatherInfo(current.weather_code, current.is_day);
    
    document.getElementById('weatherTemp').textContent = `${Math.round(current.temperature_2m)}Â°`;
    document.getElementById('weatherFeels').textContent = `é«”æ„Ÿ ${Math.round(current.apparent_temperature)}Â°`;
    document.getElementById('weatherDesc').textContent = info.text;
    document.getElementById('weatherIcon').className = `ph ${info.icon} weather-icon-lg`;
    
    const uvMax = daily.uv_index_max[0];
    const windKmh = current.windspeed_10m;
    document.getElementById('uvIndex').textContent = uvMax;
    document.getElementById('windSpeed').textContent = `${windKmh} km/h`;

    const sunrise = new Date(daily.sunrise[0]).toLocaleTimeString('zh-TW', {hour:'2-digit', minute:'2-digit'});
    const sunset = new Date(daily.sunset[0]).toLocaleTimeString('zh-TW', {hour:'2-digit', minute:'2-digit'});
    document.getElementById('sunTime').textContent = `${sunrise} / ${sunset}`;

    // ä½¿ç”¨æ–°çš„ç”ŸæˆçŸ©é™£é‚è¼¯
    const adviceText = generateWeatherAdvice(current.temperature_2m, current.weather_code, windKmh, uvMax);
    document.getElementById('clothingAdvice').innerHTML = adviceText;

    const grid = document.getElementById('forecastGrid');
    grid.innerHTML = '';
    const days = ['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];
    
    for(let i=0; i<7; i++) {
        const date = new Date(daily.time[i]);
        const dInfo = getWeatherInfo(daily.weather_code[i], 1); 
        const dayName = i === 0 ? 'ä»Šæ—¥' : days[date.getDay()];
        
        grid.innerHTML += `
            <div class="forecast-day">
                <span>${dayName}</span>
                <i class="ph ${dInfo.icon}" style="font-size:20px;"></i>
                <span>${Math.round(daily.temperature_2m_max[i])}Â°</span>
                <span style="opacity:0.6; font-size:0.9em;">${Math.round(daily.temperature_2m_min[i])}Â°</span>
            </div>
        `;
    }
}

citySelect.addEventListener('change', fetchWeather);
setInterval(fetchWeather, 300000); 
fetchWeather();

// ===================================
// 5. Pomodoro Logic
// ===================================
const ringProgress = document.getElementById('ringProgress');
const ringOverlay = document.getElementById('ringOverlay');
const ringHandle = document.getElementById('ringHandle');
const timeText = document.getElementById('timeLeft');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');

let totalTime = 1800; 
let timeLeft = 1800;
let timerId = null;
let isDragging = false;
const RADIUS = 100;
const CENTER = 110; 
const CIRCUMFERENCE = 2 * Math.PI * RADIUS;

let currentRotation = (1800 / 10800) * 360; 
let lastRawAngle = 0;

function updateRing(seconds) {
  const ratio = seconds / 10800; 
  const offset = CIRCUMFERENCE - (ratio * CIRCUMFERENCE);
  ringProgress.style.strokeDashoffset = offset;
  
  const angleDeg = ratio * 360;
  const angleRad = (angleDeg - 90) * (Math.PI / 180);
  const hX = CENTER + RADIUS * Math.cos(angleRad);
  const hY = CENTER + RADIUS * Math.sin(angleRad);
  
  ringHandle.style.left = `${hX}px`;
  ringHandle.style.top = `${hY}px`;
  
  const m = Math.floor(seconds / 60).toString().padStart(2,'0');
  const s = (seconds % 60).toString().padStart(2,'0');
  timeText.textContent = `${m}:${s}`;
}

function getAngle(clientX, clientY) {
  const rect = ringOverlay.getBoundingClientRect();
  const x = clientX - rect.left - rect.width/2;
  const y = clientY - rect.top - rect.height/2;
  let angle = Math.atan2(y, x) * (180 / Math.PI) + 90;
  if(angle < 0) angle += 360;
  return angle;
}

function startDrag(clientX, clientY) {
  isDragging = true;
  lastRawAngle = getAngle(clientX, clientY);
}

function handleDrag(clientX, clientY) {
  if (timerId) clearInterval(timerId); 
  startBtn.textContent = STRINGS[currLang].start;
  
  const rawAngle = getAngle(clientX, clientY);
  let delta = rawAngle - lastRawAngle;
  
  if (delta < -180) delta += 360;
  if (delta > 180) delta -= 360;
  
  let sensitivity = 1.0;
  if (Math.abs(delta) < 4) { 
      sensitivity = 0.2; 
  }
  
  currentRotation += delta * sensitivity;
  
  if (currentRotation < 0) currentRotation = 0;
  if (currentRotation > 360) currentRotation = 360;
  
  lastRawAngle = rawAngle;
  
  let sec = Math.round((currentRotation / 360) * 10800);
  if (sensitivity === 1.0) {
      sec = Math.round(sec / 10) * 10;
  }
  
  if (sec < 10) sec = 10; 
  if (sec > 10800) sec = 10800; 
  
  timeLeft = sec;
  totalTime = sec;
  updateRing(sec);
}

ringOverlay.addEventListener('mousedown', (e) => startDrag(e.clientX, e.clientY));
document.addEventListener('mouseup', () => { isDragging = false; });
ringOverlay.addEventListener('touchstart', (e) => { 
    e.preventDefault(); 
    startDrag(e.touches[0].clientX, e.touches[0].clientY); 
}, {passive: false});
ringOverlay.addEventListener('touchmove', (e) => { 
    e.preventDefault(); 
    if(isDragging) handleDrag(e.touches[0].clientX, e.touches[0].clientY); 
}, {passive: false});
document.addEventListener('touchend', () => { isDragging = false; });

startBtn.addEventListener('click', () => {
  if (timerId) {
    clearInterval(timerId);
    timerId = null;
    startBtn.textContent = STRINGS[currLang].start;
  } else {
    startBtn.textContent = STRINGS[currLang].pause;
    timerId = setInterval(() => {
      if (timeLeft > 0) {
        timeLeft--;
        updateRing(timeLeft); 
      } else {
        clearInterval(timerId);
        timerId = null;
        startBtn.textContent = STRINGS[currLang].start;
        alert("Time's up!");
      }
    }, 1000);
  }
});

resetBtn.addEventListener('click', () => {
  clearInterval(timerId);
  timerId = null;
  startBtn.textContent = STRINGS[currLang].start;
  timeLeft = 1800;
  currentRotation = (1800 / 10800) * 360;
  updateRing(timeLeft);
});
updateRing(1800);

// ===================================
// 6. Theme Toggle
// ===================================
const themeBtn = document.getElementById('themeToggle');
themeBtn.addEventListener('click', () => {
  const body = document.body;
  const isDark = body.getAttribute('data-theme') === 'dark';
  body.setAttribute('data-theme', isDark ? 'light' : 'dark');
  themeBtn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
});

// ===================================
// 7. Language Menu (Modified for more items)
// ===================================
let currLang = "zh-TW";
const STRINGS = {
  "zh-TW": { title: "å…¨èƒ½æ‰¹æ¬¡æœå°‹æ§åˆ¶å°", subtitle: "æ•´åˆæœå°‹å¼•æ“ã€å­—å…¸èˆ‡å¯¦ç”¨å·¥å…·çš„ä¸­å¿ƒ", warning: "âš ï¸ è‹¥ç„¡æ³•é–‹å•Ÿï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦ã€Œé˜»æ“‹å½ˆå‡ºè¦–çª—ã€", cambridge: "åŠæ©‹è©å…¸", dreye: "è­¯å…¸é€š", googleweb: "Google / ç¶²é ", usage: "ğŸ¯ ä½¿ç”¨èªªæ˜ï¼š", tip1: "æ”¯æ´å¤šè¡Œè¼¸å…¥ï¼Œç´«è‰²æŒ‰éˆ•å¯ä¸€éµå…¨é–‹ã€‚", tip2: "é»æ“Šå¤©æ°£å¡ç‰‡å¯å±•é–‹æŸ¥çœ‹è©³ç´°è³‡è¨Šã€‚", tip3: "ç•ªèŒ„é˜æ…¢é€Ÿæ‹–æ›³å¯å¾®èª¿æ™‚é–“ï¼Œå¿«é€Ÿæ‹–æ›³å¯å¤§å¹…èª¿æ•´ã€‚", dragTip: "æ‹–æ›³èª¿æ•´", start: "é–‹å§‹", pause: "æš«åœ", reset: "é‡ç½®", statusProgress: "é€²åº¦", timeTotal: "é è¨ˆç¸½æ™‚", timeLeft: "å‰©é¤˜æ™‚é–“" },
  "zh-CN": { title: "å…¨èƒ½æ‰¹é‡æœç´¢æ§åˆ¶å°", subtitle: "æ•´åˆæœç´¢å¼•æ“ã€è¯å…¸ä¸å®ç”¨å·¥å…·çš„ä¸­å¿ƒ", warning: "âš ï¸ è‹¥æ— æ³•å¼€å¯ï¼Œè¯·æ£€æŸ¥â€œå¼¹å‡ºå¼çª—å£â€è®¾ç½®", cambridge: "å‰‘æ¡¥è¯å…¸", dreye: "è¯‘å…¸é€š", googleweb: "Google / ç½‘é¡µ", usage: "ğŸ¯ ä½¿ç”¨è¯´æ˜ï¼š", tip1: "æ”¯æŒå¤šè¡Œã€‚ç´«è‰²æŒ‰é’®ä¸€é”®å…¨å¼€ã€‚", tip2: "ç‚¹å‡»å¤©æ°”å¡ç‰‡å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚", tip3: "ç•ªèŒ„é’Ÿæ…¢é€Ÿæ‹–æ‹½å¯å¾®è°ƒæ—¶é—´ï¼Œå¿«é€Ÿæ‹–æ‹½å¯å¤§å¹…è°ƒæ•´ã€‚", dragTip: "æ‹–æ‹½è°ƒæ•´", start: "å¼€å§‹", pause: "æš‚åœ", reset: "é‡ç½®", statusProgress: "è¿›åº¦", timeTotal: "é¢„è®¡æ€»æ—¶", timeLeft: "å‰©ä½™æ—¶é—´" },
  "en": { title: "Batch Search Console", subtitle: "Search Engine, Dictionary, and Utilities Hub", warning: "âš ï¸ If blocked, please check your popup blocker settings.", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ Usage:", tip1: "Multi-line supported. Purple button opens all.", tip2: "Click weather card to expand details.", tip3: "Slow drag timer for precision, fast for speed.", dragTip: "Drag to set", start: "Start", pause: "Pause", reset: "Reset", statusProgress: "Progress", timeTotal: "Est. Total", timeLeft: "Time Left" },
  "ja": { title: "å…¨èƒ½ä¸€æ‹¬æ¤œç´¢ã‚³ãƒ³ã‚½ãƒ¼ãƒ«", subtitle: "æ¤œç´¢ãƒ»è¾æ›¸ãƒ»ãƒ„ãƒ¼ãƒ«ã®çµ±åˆãƒãƒ–", warning: "âš ï¸ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„", cambridge: "ã‚±ãƒ³ãƒ–ãƒªãƒƒã‚¸", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ ä½¿ã„æ–¹ï¼š", tip1: "è¤‡æ•°è¡Œå¯¾å¿œã€‚ç´«ãƒœã‚¿ãƒ³ã§ä¸€æ‹¬è¡¨ç¤ºã€‚", tip2: "å¤©æ°—ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°è¡¨ç¤ºã€‚", tip3: "ã‚¿ã‚¤ãƒãƒ¼ã¯ã‚†ã£ãã‚Šãƒ‰ãƒ©ãƒƒã‚°ã§å¾®èª¿æ•´å¯èƒ½ã€‚", dragTip: "ãƒ‰ãƒ©ãƒƒã‚°è¨­å®š", start: "é–‹å§‹", pause: "ä¸€æ™‚åœæ­¢", reset: "ãƒªã‚»ãƒƒãƒˆ", statusProgress: "é€²æ—", timeTotal: "äºˆæƒ³åˆè¨ˆ", timeLeft: "æ®‹ã‚Šæ™‚é–“" },
  "ko": { title: "ë‹¤ê¸°ëŠ¥ ì¼ê´„ ê²€ìƒ‰ ì½˜ì†”", subtitle: "ê²€ìƒ‰ ì—”ì§„, ì‚¬ì „ ë° ìœ í‹¸ë¦¬í‹° í—ˆë¸Œ", warning: "âš ï¸ íŒì—… ì°¨ë‹¨ ì„¤ì •ì„ í™•ì¸í•´ ì£¼ì„¸ìš”", cambridge: "ìº ë¸Œë¦¬ì§€", dreye: "Dr.eye", googleweb: "Google / ì›¹", usage: "ğŸ¯ ì‚¬ìš©ë²•:", tip1: "ì—¬ëŸ¬ ì¤„ ì§€ì›. ë³´ë¼ìƒ‰ ë²„íŠ¼ì€ ëª¨ë‘ ì—½ë‹ˆë‹¤.", tip2: "ë‚ ì”¨ ì¹´ë“œë¥¼ í´ë¦­í•˜ì—¬ ì„¸ë¶€ ì •ë³´ í™•ì¸.", tip3: "íƒ€ì´ë¨¸ë¥¼ ì²œì²œíˆ ë“œë˜ê·¸í•˜ì—¬ ë¯¸ì„¸ ì¡°ì •.", dragTip: "ë“œë˜ê·¸ ì„¤ì •", start: "ì‹œì‘", pause: "ì¼ì‹œì •ì§€", reset: "ì´ˆê¸°í™”", statusProgress: "ì§„í–‰", timeTotal: "ì˜ˆìƒ ì´", timeLeft: "ë‚¨ì€ ì‹œê°„" },
  "es": { title: "Consola de BÃºsqueda", subtitle: "Motor de bÃºsqueda, Diccionario y Utilidades", warning: "âš ï¸ Si falla, verifica las ventanas emergentes", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ Uso:", tip1: "Soporte multilÃ­nea. El botÃ³n violeta abre todo.", tip2: "Click en clima para detalles.", tip3: "Arrastre lento para precisiÃ³n, rÃ¡pido para velocidad.", dragTip: "Arrastrar", start: "Inicio", pause: "Pausa", reset: "Reiniciar", statusProgress: "Progreso", timeTotal: "Est. Total", timeLeft: "Restante" },
  "pt": { title: "Console de Busca", subtitle: "Motor de busca, DicionÃ¡rio e Utilidades", warning: "âš ï¸ Se falhar, verifique os pop-ups", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ Uso:", tip1: "Suporte multilinha. BotÃ£o roxo abre tudo.", tip2: "Clique no clima para detalhes.", tip3: "Arraste lento para precisÃ£o, rÃ¡pido para velocidade.", dragTip: "Arrastar", start: "Iniciar", pause: "Pausa", reset: "Redefinir", statusProgress: "Progresso", timeTotal: "Est. Total", timeLeft: "Restante" },
  "vi": { title: "Báº£ng TÃ¬m Kiáº¿m", subtitle: "CÃ´ng cá»¥ tÃ¬m kiáº¿m, Tá»« Ä‘iá»ƒn & Tiá»‡n Ã­ch", warning: "âš ï¸ Náº¿u lá»—i, hÃ£y kiá»ƒm tra cháº·n pop-up", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ HÆ°á»›ng dáº«n:", tip1: "Há»— trá»£ nhiá»u dÃ²ng. NÃºt tÃ­m má»Ÿ táº¥t cáº£.", tip2: "Nháº¥n vÃ o tháº» thá»i tiáº¿t Ä‘á»ƒ xem chi tiáº¿t.", tip3: "KÃ©o cháº­m Ä‘á»ƒ chá»‰nh ká»¹, kÃ©o nhanh Ä‘á»ƒ chá»‰nh nhanh.", dragTip: "KÃ©o", start: "Báº¯t Ä‘áº§u", pause: "Táº¡m dá»«ng", reset: "Äáº·t láº¡i", statusProgress: "Tiáº¿n Ä‘á»™", timeTotal: "Dá»± kiáº¿n", timeLeft: "CÃ²n láº¡i" },
  "bn": { title: "à¦¬à§à¦¯à¦¾à¦š à¦…à¦¨à§à¦¸à¦¨à§à¦§à¦¾à¦¨ à¦•à¦¨à¦¸à§‹à¦²", subtitle: "à¦¸à¦¾à¦°à§à¦š à¦‡à¦à§à¦œà¦¿à¦¨, à¦…à¦­à¦¿à¦§à¦¾à¦¨ à¦à¦¬à¦‚ à¦‡à¦‰à¦Ÿà¦¿à¦²à¦¿à¦Ÿà¦¿ à¦¹à¦¾à¦¬", warning: "âš ï¸ à¦ªà¦ª-à¦†à¦ª à¦¬à§à¦²à¦•à¦¾à¦° à¦¸à§‡à¦Ÿà¦¿à¦‚à¦¸ à¦šà§‡à¦• à¦•à¦°à§à¦¨", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°:", tip1: "à¦¬à§‡à¦—à§à¦¨à¦¿ à¦¬à§‹à¦¤à¦¾à¦® à¦¸à¦¬ à¦–à§‹à¦²à§‡à¥¤", tip2: "à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦¦à§‡à¦–à¦¤à§‡ à¦†à¦¬à¦¹à¦¾à¦“à¦¯à¦¼à¦¾ à¦•à¦¾à¦°à§à¦¡à§‡ à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨à¥¤", tip3: "à¦Ÿà¦¾à¦‡à¦®à¦¾à¦° à¦¸à§‡à¦Ÿ à¦•à¦°à¦¤à§‡ à¦¡à§à¦°à§à¦¯à¦¾à¦— à¦•à¦°à§à¦¨à¥¤", dragTip: "à¦¡à§à¦°à§à¦¯à¦¾à¦— à¦•à¦°à§à¦¨", start: "à¦¶à§à¦°à§", pause: "à¦¬à¦¿à¦°à¦¤à¦¿", reset: "à¦°à¦¿à¦¸à§‡à¦Ÿ", statusProgress: "à¦…à¦—à§à¦°à¦—à¦¤à¦¿", timeTotal: "à¦®à§‹à¦Ÿ à¦¸à¦®à¦¯à¦¼", timeLeft: "à¦¬à¦¾à¦•à¦¿ à¦¸à¦®à¦¯à¦¼" },
  "hi": { title: "à¤¬à¥ˆà¤š à¤–à¥‹à¤œ à¤•à¤‚à¤¸à¥‹à¤²", subtitle: "à¤–à¥‹à¤œ à¤‡à¤‚à¤œà¤¨, à¤¶à¤¬à¥à¤¦à¤•à¥‹à¤¶ à¤”à¤° à¤‰à¤ªà¤¯à¥‹à¤—à¤¿à¤¤à¤¾", warning: "âš ï¸ à¤ªà¥‰à¤ª-à¤…à¤ª à¤…à¤µà¤°à¥‹à¤§à¤• à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ à¤‰à¤ªà¤¯à¥‹à¤—:", tip1: "à¤¬à¥ˆà¤‚à¤—à¤¨à¥€ à¤¬à¤Ÿà¤¨ à¤¸à¤¬ à¤–à¥‹à¤²à¤¤à¤¾ à¤¹à¥ˆà¥¤", tip2: "à¤µà¤¿à¤µà¤°à¤£ à¤•à¥‡ à¤²à¤¿à¤ à¤®à¥Œà¤¸à¤® à¤•à¤¾à¤°à¥à¤¡ à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚à¥¤", tip3: "à¤Ÿà¤¾à¤‡à¤®à¤° à¤¸à¥‡à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤–à¥€à¤‚à¤šà¥‡à¤‚à¥¤", dragTip: "à¤–à¥€à¤‚à¤šà¥‡à¤‚", start: "à¤¶à¥à¤°à¥‚", pause: "à¤µà¤¿à¤°à¤¾à¤®", reset: "à¤°à¥€à¤¸à¥‡à¤Ÿ", statusProgress: "à¤ªà¥à¤°à¤—à¤¤à¤¿", timeTotal: "à¤•à¥à¤² à¤¸à¤®à¤¯", timeLeft: "à¤¶à¥‡à¤· à¤¸à¤®à¤¯" },
  "ru": { title: "ĞšĞ¾Ğ½ÑĞ¾Ğ»ÑŒ ĞŸĞ¾Ğ¸ÑĞºĞ°", subtitle: "ĞŸĞ¾Ğ¸ÑĞº, ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ¸ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹", warning: "âš ï¸ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ²ÑĞ¿Ğ»Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ñ… Ğ¾ĞºĞ¾Ğ½", cambridge: "Cambridge", dreye: "Dr.eye", googleweb: "Google / Web", usage: "ğŸ¯ Ğ˜Ğ½Ñ„Ğ¾:", tip1: "ĞœÑƒĞ»ÑŒÑ‚Ğ¸ÑÑ‚Ñ€Ğ¾ĞºĞ°. Ğ¤Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ÑÑ‘.", tip2: "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñƒ Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹.", tip3: "ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾ Ñ‚ÑĞ½Ğ¸Ñ‚Ğµ Ğ´Ğ»Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸, Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ´Ğ»Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸.", dragTip: "Ğ¢ÑĞ½ÑƒÑ‚ÑŒ", start: "Ğ¡Ñ‚Ğ°Ñ€Ñ‚", pause: "ĞŸĞ°ÑƒĞ·Ğ°", reset: "Ğ¡Ğ±Ñ€Ğ¾Ñ", statusProgress: "ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ", timeTotal: "Ğ’ÑĞµĞ³Ğ¾", timeLeft: "ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ" },
  "yue": { title: "å…¨èƒ½æ‰¹é‡æœå°‹æ§åˆ¶å°", subtitle: "æ•´åˆæœå°‹å¼•æ“ã€å­—å…¸åŒå¯¦ç”¨å·¥å…·å˜…ä¸­å¿ƒ", warning: "âš ï¸ å¦‚æœé–‹å””åˆ°ï¼Œè«‹æª¢æŸ¥ç€è¦½å™¨æœ‰ç„¡æ“‹å½ˆå‡ºè¦–çª—", cambridge: "åŠæ©‹è©å…¸", dreye: "è­¯å…¸é€š", googleweb: "Google / ç¶²é ", usage: "ğŸ¯ ä½¿ç”¨èªªæ˜ï¼š", tip1: "æ”¯æ´å¤šè¡Œè¼¸å…¥ï¼Œç´«è‰²æ£ä¸€æ¬¡é–‹æ™’ã€‚", tip2: "é»æ“Šå¤©æ°£å¡å¯ä»¥ç‡è©³ç´°è³‡è¨Šã€‚", tip3: "ç•ªèŒ„é˜æ…¢æ‹–å¾®èª¿ï¼Œå¿«æ‹–å¤§å¹…èª¿æ•´ã€‚", dragTip: "æ‹–æ›³èª¿æ•´", start: "é–‹å§‹", pause: "æš«åœ", reset: "é‡ç½®", statusProgress: "é€²åº¦", timeTotal: "é è¨ˆç¸½æ™‚", timeLeft: "å‰©è¿”æ™‚é–“" }
};

const langMenu = document.getElementById('langMenu');
const langFab = document.getElementById('langFab');

langFab.addEventListener('click', (e) => {
  e.stopPropagation();
  if (langMenu.classList.contains('active')) {
    langMenu.classList.remove('active');
    setTimeout(() => langMenu.style.display = 'none', 300);
  } else {
    langMenu.style.display = 'flex';
    void langMenu.offsetWidth; 
    langMenu.classList.add('active');
  }
});

document.addEventListener('click', () => {
  if (langMenu.classList.contains('active')) {
    langMenu.classList.remove('active');
    setTimeout(() => langMenu.style.display = 'none', 300);
  }
});

document.querySelectorAll('.lang-opt').forEach(opt => {
  opt.addEventListener('click', () => {
    currLang = opt.getAttribute('data-lang');
    updateLang();
  });
});

function updateLang() {
  const s = STRINGS[currLang];
  document.querySelector('[data-i18n="title"]').textContent = s.title;
  document.querySelector('[data-i18n="subtitle"]').textContent = s.subtitle;
  document.querySelector('[data-i18n="warning"]').textContent = s.warning;
  document.querySelector('[data-i18n="cambridge"]').textContent = s.cambridge;
  document.querySelector('[data-i18n="dreye"]').textContent = s.dreye;
  document.querySelector('[data-i18n="googleweb"]').textContent = s.googleweb;
  document.querySelector('[data-i18n="usage"]').textContent = s.usage;
  document.querySelector('[data-i18n="tip1"]').textContent = s.tip1;
  document.querySelector('[data-i18n="tip2"]').textContent = s.tip2;
  document.querySelector('[data-i18n="tip3"]').textContent = s.tip3;
  document.querySelector('[data-i18n="dragTip"]').textContent = s.dragTip;
  document.querySelector('[data-i18n="statusProgress"]').textContent = s.statusProgress;
  document.querySelector('[data-i18n="timeTotal"]').textContent = s.timeTotal;
  document.querySelector('[data-i18n="timeLeft"]').textContent = s.timeLeft;
  
  if(!timerId) startBtn.textContent = s.start;
  else startBtn.textContent = s.pause;
  resetBtn.textContent = s.reset;
}
</script>
</body>
</html>
